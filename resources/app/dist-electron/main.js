"use strict";var zb=Object.defineProperty;var Lb=(e,t,r)=>t in e?zb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var qt=(e,t,r)=>(Lb(e,typeof t!="symbol"?t+"":t,r),r);const _e=require("electron"),Kr=require("node:path"),$b=require("node:http"),Es=require("buffer"),vr=require("serialport"),De=require("child_process"),Ae=require("fs/promises"),fr=require("path"),Ts=require("fs"),Ub=require("readline"),xb=require("dgram"),Vb=require("os"),Gb=require("net"),Kt=require("aws-crt"),Bb=require("util"),Jr=require("events"),kb=require("node:fs"),cc=require("crypto");function Sd(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const Qe=Sd(Kr),Jb=Sd(Ub),Hb="2.1.1",Wb="https://fab.solarnative.cloud/v1".replace(/\/+$/,"");class Rd{constructor(t={}){this.configuration=t}set config(t){this.configuration=t}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:Wb}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||Od}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const t=this.configuration.apiKey;if(t)return typeof t=="function"?t:()=>t}get accessToken(){const t=this.configuration.accessToken;if(t)return typeof t=="function"?t:async()=>t}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const Qb=new Rd,oi=class oi{constructor(t=Qb){qt(this,"middleware");qt(this,"fetchApi",async(t,r)=>{let n={url:t,init:r};for(const a of this.middleware)a.pre&&(n=await a.pre({fetch:this.fetchApi,...n})||n);let i;try{i=await(this.configuration.fetchApi||fetch)(n.url,n.init)}catch(a){for(const o of this.middleware)o.onError&&(i=await o.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:a,response:i?i.clone():void 0})||i);if(i===void 0)throw a instanceof Error?new Xb(a,"The request failed and the interceptors did not return an alternative response"):a}for(const a of this.middleware)a.post&&(i=await a.post({fetch:this.fetchApi,url:n.url,init:n.init,response:i.clone()})||i);return i});this.configuration=t,this.middleware=t.middleware}withMiddleware(...t){const r=this.clone();return r.middleware=r.middleware.concat(...t),r}withPreMiddleware(...t){const r=t.map(n=>({pre:n}));return this.withMiddleware(...r)}withPostMiddleware(...t){const r=t.map(n=>({post:n}));return this.withMiddleware(...r)}isJsonMime(t){return t?oi.jsonRegex.test(t):!1}async request(t,r){const{url:n,init:i}=await this.createFetchParams(t,r),a=await this.fetchApi(n,i);if(a&&a.status>=200&&a.status<300)return a;throw new _d(a,"Response returned an error code")}async createFetchParams(t,r){let n=this.configuration.basePath+t.path;t.query!==void 0&&Object.keys(t.query).length!==0&&(n+="?"+this.configuration.queryParamsStringify(t.query));const i=Object.assign({},this.configuration.headers,t.headers);Object.keys(i).forEach(d=>i[d]===void 0?delete i[d]:{});const a=typeof r=="function"?r:async()=>r,o={method:t.method,headers:i,body:t.body,credentials:this.configuration.credentials},u={...o,...await a({init:o,context:t})};let l;Yb(u.body)||u.body instanceof URLSearchParams||Kb(u.body)?l=u.body:this.isJsonMime(i["Content-Type"])?l=JSON.stringify(u.body):l=u.body;const c={...u,body:l};return{url:n,init:c}}clone(){const t=this.constructor,r=new t(this.configuration);return r.middleware=this.middleware.slice(),r}};qt(oi,"jsonRegex",new RegExp("^(:?application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(:?;.*)?$","i"));let rs=oi;function Kb(e){return typeof Blob<"u"&&e instanceof Blob}function Yb(e){return typeof FormData<"u"&&e instanceof FormData}class _d extends Error{constructor(r,n){super(n);qt(this,"name","ResponseError");this.response=r}}class Xb extends Error{constructor(r,n){super(n);qt(this,"name","FetchError");this.cause=r}}class ee extends Error{constructor(r,n){super(n);qt(this,"name","RequiredError");this.field=r}}function D(e,t){const r=e[t];return r!=null}function Od(e,t=""){return Object.keys(e).map(r=>Ed(r,e[r],t)).filter(r=>r.length>0).join("&")}function Ed(e,t,r=""){const n=r+(r.length?`[${e}]`:e);if(t instanceof Array){const i=t.map(a=>encodeURIComponent(String(a))).join(`&${encodeURIComponent(n)}=`);return`${encodeURIComponent(n)}=${i}`}if(t instanceof Set){const i=Array.from(t);return Ed(e,i,r)}return t instanceof Date?`${encodeURIComponent(n)}=${encodeURIComponent(t.toISOString())}`:t instanceof Object?Od(t,n):`${encodeURIComponent(n)}=${encodeURIComponent(String(t))}`}class K{constructor(t,r=n=>n){this.raw=t,this.transformer=r}async value(){return this.transformer(await this.raw.json())}}class Y{constructor(t){this.raw=t}async value(){}}function Zb(e){return jb(e)}function jb(e,t){return e==null?e:{streetName:D(e,"streetName")?e.streetName:void 0,houseNumber:D(e,"houseNumber")?e.houseNumber:void 0,additionalInfo:D(e,"additionalInfo")?e.additionalInfo:void 0,zipCode:D(e,"zipCode")?e.zipCode:void 0,city:D(e,"city")?e.city:void 0,countryCode:D(e,"countryCode")?e.countryCode:void 0}}function eS(e){return tS(e)}function tS(e,t){return e==null?e:{productSerial:e.productSerial,productSerialId:D(e,"productSerialId")?e.productSerialId:void 0,dataMatrixCode:D(e,"dataMatrixCode")?e.dataMatrixCode:void 0,deviceHash:D(e,"deviceHash")?e.deviceHash:void 0,productCode:D(e,"productCode")?e.productCode:void 0,serialNumber:D(e,"serialNumber")?e.serialNumber:void 0,groupId:e.groupId,remarks:D(e,"remarks")?e.remarks:void 0}}function rS(e){return nS(e)}function nS(e,t){return e==null?e:{devices:e.devices.map(eS),integrityValue:D(e,"integrityValue")?e.integrityValue:void 0}}function j(e){return iS(e)}function iS(e,t){return e==null?e:{code:e.code}}function aS(e){return oS(e)}function oS(e,t){return e==null?e:{data:rS(e.data),meta:j(e.meta)}}function sS(e){if(e!==void 0)return e===null?null:{firmwareDeploymentGroupId:e.firmwareDeploymentGroupId}}function uS(e){if(e!==void 0)return e===null?null:{identifierType:e.identifierType,identifierValues:e.identifierValues,productCode:e.productCode,tagIds:e.tagIds,limit:e.limit}}function cS(e){if(e!==void 0)return e===null?null:{assign:sS(e.assign),select:uS(e.select),action:e.action,integrityValue:e.integrityValue}}function lS(e){return dS(e)}function dS(e,t){return e==null?e:{cert:e.cert,key:e.key,ca:e.ca}}function fS(e){return pS(e)}function pS(e,t){return e==null?e:{productCode:e.productCode,serialNumber:e.serialNumber,productSerial:e.productSerial,productSerialId:e.productSerialId}}function mS(e){return vS(e)}function vS(e,t){return e==null?e:{deviceIdentifiers:e.deviceIdentifiers.map(fS)}}function hS(e){return gS(e)}function gS(e,t){return e==null?e:{data:mS(e.data),meta:j(e.meta)}}function yS(e){if(e!==void 0)return e===null?null:{productVariantId:e.productVariantId,erpMaterialNumber:e.erpMaterialNumber,dataMatrixCode:e.dataMatrixCode,limit:e.limit,remarks:e.remarks,tagIds:e.tagIds}}function wS(e){return bS(e)}function bS(e,t){return e==null?e:{id:e.id}}function SS(e){return RS(e)}function RS(e,t){return e==null?e:{firmware:wS(e.firmware)}}function _S(e){return OS(e)}function OS(e,t){return e==null?e:{data:SS(e.data),meta:j(e.meta)}}function ES(e){return TS(e)}function TS(e,t){return e==null?e:{id:e.id}}function CS(e){return PS(e)}function PS(e,t){return e==null?e:{firmwareDeploymentGroup:ES(e.firmwareDeploymentGroup)}}function lc(e){return AS(e)}function AS(e,t){return e==null?e:{data:CS(e.data),meta:j(e.meta)}}function DS(e){if(e!==void 0)return e===null?null:{productId:e.productId,name:e.name,description:e.description,isDefaultForProduct:e.isDefaultForProduct}}function IS(e){return NS(e)}function NS(e,t){return e==null?e:{httpMethod:e.httpMethod,url:e.url,urlExpiry:new Date(e.urlExpiry)}}function FS(e){return MS(e)}function MS(e,t){return e==null?e:{id:e.id,encryptionKey:e.encryptionKey,upload:IS(e.upload)}}function qS(e){return zS(e)}function zS(e,t){return e==null?e:{firmwareFile:FS(e.firmwareFile)}}function LS(e){return $S(e)}function $S(e,t){return e==null?e:{data:qS(e.data),meta:j(e.meta)}}function US(e){if(e!==void 0)return e===null?null:{fileTypeId:e.fileTypeId,releaseTypeIds:e.releaseTypeIds,productIds:e.productIds,name:e.name,version:e.version,fileHash:e.fileHash,remarks:e.remarks}}function xS(e){return VS(e)}function VS(e,t){return e==null?e:{id:e.id}}function GS(e){return BS(e)}function BS(e,t){return e==null?e:{firmwareRelease:xS(e.firmwareRelease)}}function dc(e){return kS(e)}function kS(e,t){return e==null?e:{data:GS(e.data),meta:j(e.meta)}}function JS(e){if(e!==void 0)return e===null?null:{firmwareId:e.firmwareId,releaseTypeId:e.releaseTypeId,tag:e.tag,remarks:e.remarks,firmwareFileIds:e.firmwareFileIds}}function HS(e){if(e!==void 0)return e===null?null:{productId:e.productId,name:e.name,description:e.description,fileTypeIds:e.fileTypeIds}}function WS(e){return QS(e)}function QS(e,t){return e==null?e:{id:e.id}}function KS(e){return YS(e)}function YS(e,t){return e==null?e:{tag:WS(e.tag)}}function XS(e){return ZS(e)}function ZS(e,t){return e==null?e:{data:KS(e.data),meta:j(e.meta)}}function jS(e){if(e!==void 0)return e===null?null:{name:e.name,description:e.description}}function e0(e){return t0(e)}function t0(e,t){return e==null?e:{timestamp:e.timestamp,inverterExport:e.inverterExport,uptime:D(e,"uptime")?e.uptime:void 0,temp:D(e,"temp")?e.temp:void 0,firmwareHash:D(e,"firmwareHash")?e.firmwareHash:void 0,ram:D(e,"ram")?e.ram:void 0,reboot:D(e,"reboot")?e.reboot:void 0,ssid:D(e,"ssid")?e.ssid:void 0,bssid:D(e,"bssid")?e.bssid:void 0,rssi:D(e,"rssi")?e.rssi:void 0,ip:D(e,"ip")?e.ip:void 0,subnet:D(e,"subnet")?e.subnet:void 0,gateway:D(e,"gateway")?e.gateway:void 0}}function r0(e){return n0(e)}function n0(e,t){return e==null?e:{cursorNext:D(e,"cursorNext")?e.cursorNext:void 0,cursorPrevious:D(e,"cursorPrevious")?e.cursorPrevious:void 0}}function Cs(e){return i0(e)}function i0(e,t){return e==null?e:{pagination:r0(e.pagination)}}function a0(e){return o0(e)}function o0(e,t){return e==null?e:{data:e0(e.data),meta:Cs(e.meta)}}function s0(e){if(e!==void 0)return e===null?null:{limit:e.limit,cursorValue:e.cursorValue}}function Ps(e){if(e!==void 0)return e===null?null:{pagination:s0(e.pagination)}}function u0(e){if(e!==void 0)return e===null?null:{meta:Ps(e.meta),identifierType:e.identifierType,identifierValue:e.identifierValue,productCode:e.productCode,periodStart:e.periodStart,periodEnd:e.periodEnd}}function c0(e){return l0(e)}function l0(e,t){return e==null?e:{timestamp:e.timestamp,runtime:D(e,"runtime")?e.runtime:void 0,w:e.w,whruntime:e.whruntime,dca:D(e,"dca")?e.dca:void 0,dcv:D(e,"dcv")?e.dcv:void 0,fgrid:D(e,"fgrid")?e.fgrid:void 0,iline:D(e,"iline")?e.iline:void 0,tramp:D(e,"tramp")?e.tramp:void 0,vbias:D(e,"vbias")?e.vbias:void 0,vref:D(e,"vref")?e.vref:void 0,phvpha:D(e,"phvpha")?e.phvpha:void 0,spare1:D(e,"spare1")?e.spare1:void 0,spare2:D(e,"spare2")?e.spare2:void 0,trecl:D(e,"trecl")?e.trecl:void 0,tmpot:D(e,"tmpot")?e.tmpot:void 0,status:D(e,"status")?e.status:void 0}}function d0(e){return f0(e)}function f0(e,t){return e==null?e:{data:c0(e.data),meta:Cs(e.meta)}}function p0(e){if(e!==void 0)return e===null?null:{meta:Ps(e.meta),identifierType:e.identifierType,identifierValue:e.identifierValue,productCode:e.productCode,periodStart:e.periodStart,periodEnd:e.periodEnd}}function m0(e){return v0(e)}function v0(e,t){return e==null?e:{productSerial:e.productSerial,productSerialId:e.productSerialId,productCode:e.productCode,serialNumber:e.serialNumber,dataMatrixCode:e.dataMatrixCode,deviceHash:e.deviceHash}}function h0(e){return g0(e)}function g0(e,t){return e==null?e:{devices:e.devices.map(m0)}}function y0(e){return w0(e)}function w0(e,t){return e==null?e:{data:h0(e.data),meta:Cs(e.meta)}}function b0(e){if(e!==void 0)return e===null?null:{meta:Ps(e.meta),identifierType:e.identifierType,identifierValues:e.identifierValues,productCode:e.productCode,firmwareDeploymentGroupIds:e.firmwareDeploymentGroupIds,tagIds:e.tagIds}}function S0(e,t){return e==null?e:{wifiPassword:e.wifiPassword,certificates:lS(e.certificates),deviceFirmwareKey:D(e,"deviceFirmwareKey")?e.deviceFirmwareKey:void 0}}function R0(e){return _0(e)}function _0(e,t){return e==null?e:{...S0(e)}}function O0(e){return E0(e)}function E0(e,t){return e==null?e:{id:e.id,name:e.name}}function T0(e){return C0(e)}function C0(e,t){return e==null?e:{id:e.id,name:e.name}}function P0(e){return A0(e)}function A0(e,t){return e==null?e:{id:e.id,tag:e.tag}}function D0(e){return I0(e)}function I0(e,t){return e==null?e:{id:D(e,"id")?e.id:void 0,name:D(e,"name")?e.name:void 0,release:D(e,"release")?P0(e.release):void 0,deploymentGroup:T0(e.deploymentGroup)}}function As(e){return N0(e)}function N0(e,t){return e==null?e:{id:e.id,name:e.name}}function F0(e){return M0(e)}function M0(e,t){return e==null?e:{id:e.id,version:e.version,erpMaterialNumber:D(e,"erpMaterialNumber")?e.erpMaterialNumber:void 0,remarks:D(e,"remarks")?e.remarks:void 0}}function q0(e){return z0(e)}function z0(e,t){return e==null?e:{id:e.id,productCode:e.productCode,name:e.name,model:e.model,type:As(e.type),variant:F0(e.variant)}}function L0(e){return $0(e)}function $0(e,t){return e==null?e:{id:e.id,name:e.name,contactTimeStamp:D(e,"contactTimeStamp")?new Date(e.contactTimeStamp):void 0,isProvisioned:D(e,"isProvisioned")?e.isProvisioned:void 0}}function U0(e){return x0(e)}function x0(e,t){return e==null?e:{id:e.id,name:e.name}}function V0(e){return G0(e)}function G0(e,t){return e==null?e:{productSerial:e.productSerial,productSerialId:e.productSerialId,serialNumber:e.serialNumber,dataMatrixCode:D(e,"dataMatrixCode")?e.dataMatrixCode:void 0,deviceHash:D(e,"deviceHash")?e.deviceHash:void 0,encryptionKey:D(e,"encryptionKey")?e.encryptionKey:void 0,product:q0(e.product),status:L0(e.status),debugModes:D(e,"debugModes")?e.debugModes.map(O0):void 0,firmware:D0(e.firmware),additionalAttributes:D(e,"additionalAttributes")?R0(e.additionalAttributes):void 0,remarks:D(e,"remarks")?e.remarks:void 0,creationTimeStamp:D(e,"creationTimeStamp")?new Date(e.creationTimeStamp):void 0,productionTimeStamp:D(e,"productionTimeStamp")?new Date(e.productionTimeStamp):void 0,tags:e.tags.map(U0)}}function B0(e){return k0(e)}function k0(e,t){return e==null?e:{devices:e.devices.map(V0)}}function J0(e){return H0(e)}function H0(e,t){return e==null?e:{data:B0(e.data),meta:j(e.meta)}}function W0(e){if(e!==void 0)return e===null?null:{identifierType:e.identifierType,identifierValues:e.identifierValues,productCode:e.productCode}}function si(e){return Q0(e)}function Q0(e,t){return e==null?e:{id:e.id,name:e.name,encoding:e.encoding}}function Yr(e){return K0(e)}function K0(e,t){return e==null?e:{id:e.id,productCode:e.productCode,name:e.name,model:e.model}}function Y0(e){return X0(e)}function X0(e,t){return e==null?e:{id:e.id,name:e.name,description:D(e,"description")?e.description:void 0,product:Yr(e.product),fileTypes:e.fileTypes.map(si)}}function Z0(e){return j0(e)}function j0(e,t){return e==null?e:{id:e.id,name:e.name,description:e.description,creationTimeStamp:new Date(e.creationTimeStamp),usage:e.usage,product:Yr(e.product),isDefaultForProduct:e.isDefaultForProduct}}function eR(e){return tR(e)}function tR(e,t){return e==null?e:{firmwareDeploymentGroups:e.firmwareDeploymentGroups.map(Z0)}}function rR(e){return nR(e)}function nR(e,t){return e==null?e:{data:eR(e.data),meta:j(e.meta)}}function iR(e){if(e!==void 0)return e===null?null:{productIds:e.productIds,firmwareDeploymentGroupIds:e.firmwareDeploymentGroupIds,isDefaultForProduct:e.isDefaultForProduct}}function aR(e){return oR(e)}function oR(e,t){return e==null?e:{firmwares:e.firmwares.map(Y0)}}function sR(e){return uR(e)}function uR(e,t){return e==null?e:{data:aR(e.data),meta:j(e.meta)}}function cR(e){if(e!==void 0)return e===null?null:{firmwareId:e.firmwareId}}function lR(e){return dR(e)}function dR(e,t){return e==null?e:{id:e.id,tag:e.tag}}function Ds(e){return fR(e)}function fR(e,t){return e==null?e:{id:e.id,name:e.name}}function pR(e){return mR(e)}function mR(e,t){return e==null?e:{id:D(e,"id")?e.id:void 0,name:D(e,"name")?e.name:void 0}}function vR(e){return hR(e)}function hR(e,t){return e==null?e:{id:e.id,name:e.name,description:D(e,"description")?e.description:void 0,productTypes:e.productTypes.map(pR)}}function gR(e){return yR(e)}function yR(e,t){return e==null?e:{debugModes:e.debugModes.map(vR)}}function wR(e){return bR(e)}function bR(e,t){return e==null?e:{data:gR(e.data),meta:j(e.meta)}}function SR(e){return RR(e)}function RR(e,t){return e==null?e:{id:e.id,name:e.name,description:D(e,"description")?e.description:void 0}}function _R(e){return OR(e)}function OR(e,t){return e==null?e:{deviceStatus:D(e,"deviceStatus")?e.deviceStatus.map(SR):void 0}}function ER(e){return TR(e)}function TR(e,t){return e==null?e:{data:_R(e.data),meta:j(e.meta)}}function CR(e){if(e!==void 0)return e===null?null:{deviceStatusId:e.deviceStatusId}}function PR(e){return AR(e)}function AR(e,t){return e==null?e:{httpMethod:e.httpMethod,url:e.url,urlExpiry:new Date(e.urlExpiry)}}function Td(e){return DR(e)}function DR(e,t){return e==null?e:{id:e.id,name:e.name,releases:e.releases.map(lR)}}function IR(e){return NR(e)}function NR(e,t){return e==null?e:{id:D(e,"id")?e.id:void 0,type:D(e,"type")?si(e.type):void 0,releaseTypes:D(e,"releaseTypes")?e.releaseTypes.map(Ds):void 0,products:D(e,"products")?e.products.map(Yr):void 0,name:D(e,"name")?e.name:void 0,version:D(e,"version")?e.version:void 0,fileHash:D(e,"fileHash")?e.fileHash:void 0,remarks:D(e,"remarks")?e.remarks:void 0,firmwares:D(e,"firmwares")?e.firmwares.map(Td):void 0,encryptionKey:D(e,"encryptionKey")?e.encryptionKey:void 0,download:D(e,"download")?PR(e.download):void 0}}function FR(e){return MR(e)}function MR(e,t){return e==null?e:{firmwareFiles:e.firmwareFiles.map(IR)}}function qR(e){return zR(e)}function zR(e,t){return e==null?e:{data:FR(e.data),meta:j(e.meta)}}function LR(e){return $R(e)}function $R(e,t){return e==null?e:{id:e.id,type:si(e.type),releaseTypes:e.releaseTypes.map(Ds),products:e.products.map(Yr),name:e.name,version:e.version,fileHash:e.fileHash,remarks:D(e,"remarks")?e.remarks:void 0,firmwares:e.firmwares.map(Td)}}function UR(e){return xR(e)}function xR(e,t){return e==null?e:{firmwareFiles:e.firmwareFiles.map(LR)}}function VR(e){return GR(e)}function GR(e,t){return e==null?e:{data:UR(e.data),meta:j(e.meta)}}function BR(e){if(e!==void 0)return e===null?null:{firmwareFileIds:e.firmwareFileIds,firmwareReleaseIds:e.firmwareReleaseIds,firmwareFileTypeIds:e.firmwareFileTypeIds,firmwareReleaseTypeIds:e.firmwareReleaseTypeIds}}function kR(e){if(e!==void 0)return e===null?null:{firmwareFileIds:e.firmwareFileIds}}function JR(e){return HR(e)}function HR(e,t){return e==null?e:{id:e.id,name:e.name,encoding:e.encoding,description:D(e,"description")?e.description:void 0}}function WR(e){return QR(e)}function QR(e,t){return e==null?e:{firmwareFileTypes:e.firmwareFileTypes.map(JR)}}function KR(e){return YR(e)}function YR(e,t){return e==null?e:{data:WR(e.data),meta:j(e.meta)}}function XR(e){return ZR(e)}function ZR(e,t){return e==null?e:{id:e.id,name:e.name,version:e.version,fileHash:e.fileHash,type:si(e.type)}}function jR(e){return e_(e)}function e_(e,t){return e==null?e:{id:e.id,name:e.name}}function t_(e){return r_(e)}function r_(e,t){return e==null?e:{id:e.id,erpMaterialNumber:D(e,"erpMaterialNumber")?e.erpMaterialNumber:void 0}}function n_(e){return i_(e)}function i_(e,t){return e==null?e:{id:e.id,tag:e.tag,remarks:D(e,"remarks")?e.remarks:void 0,creationTimeStamp:new Date(e.creationTimeStamp),firmware:jR(e.firmware),type:Ds(e.type),files:e.files.map(XR),productVariants:e.productVariants.map(t_)}}function a_(e){return o_(e)}function o_(e,t){return e==null?e:{firmwareReleases:e.firmwareReleases.map(n_)}}function s_(e){return u_(e)}function u_(e,t){return e==null?e:{data:a_(e.data),meta:j(e.meta)}}function c_(e){if(e!==void 0)return e===null?null:{firmwareIds:e.firmwareIds,firmwareReleaseIds:e.firmwareReleaseIds,firmwareReleaseTypeIds:e.firmwareReleaseTypeIds,productVariantIds:e.productVariantIds}}function l_(e){return d_(e)}function d_(e,t){return e==null?e:{id:e.id,name:e.name,description:D(e,"description")?e.description:void 0}}function f_(e){return p_(e)}function p_(e,t){return e==null?e:{firmwareReleaseTypes:e.firmwareReleaseTypes.map(l_)}}function m_(e){return v_(e)}function v_(e,t){return e==null?e:{data:f_(e.data),meta:j(e.meta)}}function Cd(e){return h_(e)}function h_(e,t){return e==null?e:{date:D(e,"date")?new Date(e.date):void 0,updates:D(e,"updates")?e.updates:void 0}}function g_(e){return y_(e)}function y_(e,t){return e==null?e:{productSerial:e.productSerial,productCode:e.productCode,serialNumber:e.serialNumber,creationTimeStamp:new Date(e.creationTimeStamp),latestContact:D(e,"latestContact")?new Date(e.latestContact):void 0,messageStats:e.messageStats.map(Cd)}}function w_(e){return b_(e)}function b_(e,t){return e==null?e:{countryCode:e.countryCode,name:e.name}}function S_(e){return R_(e)}function R_(e,t){return e}function __(e){return O_(e)}function O_(e,t){return e==null?e:{productSerial:e.productSerial,parentProductSerial:D(e,"parentProductSerial")?S_(e.parentProductSerial):void 0,productCode:e.productCode,serialNumber:e.serialNumber,creationTimeStamp:new Date(e.creationTimeStamp),latestContact:D(e,"latestContact")?new Date(e.latestContact):void 0,messageStats:e.messageStats.map(Cd)}}function E_(e){return T_(e)}function T_(e,t){return e==null?e:{id:D(e,"id")?e.id:void 0,name:D(e,"name")?e.name:void 0,email:D(e,"email")?e.email:void 0}}function C_(e){return P_(e)}function P_(e,t){return e==null?e:{id:e.id,name:e.name,creationDate:new Date(e.creationDate),installationDate:D(e,"installationDate")?new Date(e.installationDate):void 0,timeZone:D(e,"timeZone")?e.timeZone:void 0,installedCapacity:D(e,"installedCapacity")?e.installedCapacity:void 0,gridCode:w_(e.gridCode),address:Zb(e.address),users:e.users.map(E_),gateways:e.gateways.map(g_),inverters:e.inverters.map(__)}}function A_(e){return D_(e)}function D_(e,t){return e==null?e:{plants:D(e,"plants")?e.plants.map(C_):void 0}}function I_(e){return N_(e)}function N_(e,t){return e==null?e:{data:A_(e.data),meta:j(e.meta)}}function F_(e){if(e!==void 0)return e===null?null:{periodStart:e.periodStart,periodEnd:e.periodEnd}}function M_(e){if(e!==void 0)return e===null?null:{identifierType:e.identifierType,identifierValues:e.identifierValues,productCode:e.productCode,tagId:e.tagId}}function q_(e){if(e!==void 0)return e===null?null:{plantIds:e.plantIds,productSerials:e.productSerials,device:M_(e.device),emailAddress:e.emailAddress,tagId:e.tagId,creationTimeStamp:F_(e.creationTimeStamp)}}function z_(e){return L_(e)}function L_(e,t){return e==null?e:{devices:e.devices}}function $_(e){return U_(e)}function U_(e,t){return e==null?e:{id:e.id,name:e.name,description:D(e,"description")?e.description:void 0,usage:z_(e.usage),creationTimeStamp:new Date(e.creationTimeStamp)}}function x_(e){return V_(e)}function V_(e,t){return e==null?e:{tags:e.tags.map($_)}}function G_(e){return B_(e)}function B_(e,t){return e==null?e:{data:x_(e.data),meta:j(e.meta)}}function k_(e){return J_(e)}function J_(e,t){return e==null?e:{logisticsBoxId:e.logisticsBoxId}}function H_(e){return W_(e)}function W_(e,t){return e==null?e:{data:k_(e.data),meta:j(e.meta)}}function Q_(e){if(e!==void 0)return e===null?null:{productBoxIds:e.productBoxIds,logisticsBoxTypeId:e.logisticsBoxTypeId}}function K_(e){return Y_(e)}function Y_(e,t){return e==null?e:{productSerials:e.productSerials}}function X_(e){return Z_(e)}function Z_(e,t){return e==null?e:{id:e.id,articleNumber:D(e,"articleNumber")?e.articleNumber:void 0}}function j_(e){return eO(e)}function eO(e,t){return e==null?e:{id:e.id,type:X_(e.type),device:K_(e.device)}}function tO(e){return rO(e)}function rO(e,t){return e==null?e:{id:e.id}}function nO(e){return iO(e)}function iO(e,t){return e==null?e:{id:e.id,type:tO(e.type),productBoxes:e.productBoxes.map(j_)}}function aO(e){return oO(e)}function oO(e,t){return e==null?e:{logisticsBox:nO(e.logisticsBox)}}function sO(e){return uO(e)}function uO(e,t){return e==null?e:{data:aO(e.data),meta:j(e.meta)}}function cO(e){if(e!==void 0)return e===null?null:{productSerial:e.productSerial,productBoxId:e.productBoxId,logisticsBoxId:e.logisticsBoxId}}function Pd(e){return lO(e)}function lO(e,t){return e==null?e:{id:e.id,numberUnits:e.numberUnits,gTIN:e.GTIN,articleNumber:e.articleNumber,product:Yr(e.product)}}function dO(e){return fO(e)}function fO(e,t){return e==null?e:{id:e.id,numberUnits:e.numberUnits,productBoxType:Pd(e.productBoxType)}}function pO(e){return mO(e)}function mO(e,t){return e==null?e:{logisticsBoxTypes:D(e,"logisticsBoxTypes")?e.logisticsBoxTypes.map(dO):void 0}}function vO(e){return hO(e)}function hO(e,t){return e==null?e:{data:pO(e.data),meta:j(e.meta)}}function gO(e){if(e!==void 0)return e===null?null:{productSerial:e.productSerial,dataMatrixCode:e.dataMatrixCode,deviceStatusId:e.deviceStatusId,deviceFirmwareKey:e.deviceFirmwareKey,firmwareReleaseId:e.firmwareReleaseId,remarks:e.remarks,tagIds:e.tagIds,debugModeIds:e.debugModeIds}}function yO(e){if(e!==void 0)return e===null?null:{firmwareDeploymentGroupId:e.firmwareDeploymentGroupId,name:e.name,description:e.description,isDefaultForProduct:e.isDefaultForProduct}}function wO(e){if(e!==void 0)return e===null?null:{firmwareReleaseId:e.firmwareReleaseId,tag:e.tag,remarks:e.remarks,productVariantIds:e.productVariantIds}}function bO(e){return SO(e)}function SO(e,t){return e==null?e:{productBoxId:e.productBoxId}}function RO(e){return _O(e)}function _O(e,t){return e==null?e:{data:bO(e.data),meta:j(e.meta)}}function OO(e){if(e!==void 0)return e===null?null:{productSerials:e.productSerials,productBoxTypeId:e.productBoxTypeId}}function EO(e){return TO(e)}function TO(e,t){return e==null?e:{productSerials:e.productSerials}}function CO(e){return PO(e)}function PO(e,t){return e==null?e:{id:e.id}}function AO(e){return DO(e)}function DO(e,t){return e==null?e:{id:e.id,type:D(e,"type")?CO(e.type):void 0}}function IO(e){return NO(e)}function NO(e,t){return e==null?e:{id:e.id}}function FO(e){return MO(e)}function MO(e,t){return e==null?e:{id:e.id,type:IO(e.type),device:EO(e.device),logisticsBox:D(e,"logisticsBox")?AO(e.logisticsBox):void 0}}function qO(e){return zO(e)}function zO(e,t){return e==null?e:{productBox:FO(e.productBox)}}function LO(e){return $O(e)}function $O(e,t){return e==null?e:{data:qO(e.data),meta:j(e.meta)}}function UO(e){if(e!==void 0)return e===null?null:{productSerial:e.productSerial,productBoxId:e.productBoxId}}function xO(e){return VO(e)}function VO(e,t){return e==null?e:{productBoxTypes:e.productBoxTypes.map(Pd)}}function GO(e){return BO(e)}function BO(e,t){return e==null?e:{data:xO(e.data),meta:j(e.meta)}}function Ad(e){return kO(e)}function kO(e,t){return e==null?e:{id:e.id,name:e.name}}function JO(e){return HO(e)}function HO(e,t){return e==null?e:{id:e.id,productCode:e.productCode,name:e.name,model:e.model,type:As(e.type),provisionMode:Ad(e.provisionMode)}}function WO(e){return QO(e)}function QO(e,t){return e==null?e:{products:e.products.map(JO)}}function KO(e){return YO(e)}function YO(e,t){return e==null?e:{data:WO(e.data),meta:j(e.meta)}}function XO(e){if(e!==void 0)return e===null?null:{productTypeId:e.productTypeId}}function ZO(e){return jO(e)}function jO(e,t){return e==null?e:{id:e.id,name:e.name,description:D(e,"description")?e.description:void 0}}function eE(e){return tE(e)}function tE(e,t){return e==null?e:{productProvisionModes:e.productProvisionModes.map(ZO)}}function rE(e){return nE(e)}function nE(e,t){return e==null?e:{data:eE(e.data),meta:j(e.meta)}}function iE(e){return aE(e)}function aE(e,t){return e==null?e:{id:e.id,name:e.name,description:D(e,"description")?e.description:void 0}}function oE(e){return sE(e)}function sE(e,t){return e==null?e:{productTypes:e.productTypes.map(iE)}}function uE(e){return cE(e)}function cE(e,t){return e==null?e:{data:oE(e.data),meta:j(e.meta)}}function lE(e){return dE(e)}function dE(e,t){return e==null?e:{id:e.id}}function fE(e){return pE(e)}function pE(e,t){return e==null?e:{productVariant:lE(e.productVariant)}}function fc(e){return mE(e)}function mE(e,t){return e==null?e:{data:fE(e.data),meta:j(e.meta)}}function vE(e){if(e!==void 0)return e===null?null:{productId:e.productId,version:e.version,erpMaterialNumber:e.erpMaterialNumber,remarks:e.remarks}}function hE(e){return gE(e)}function gE(e,t){return e==null?e:{id:e.id,version:e.version,erpMaterialNumber:D(e,"erpMaterialNumber")?e.erpMaterialNumber:void 0,remarks:D(e,"remarks")?e.remarks:void 0,creationTimeStamp:new Date(e.creationTimeStamp)}}function yE(e){return wE(e)}function wE(e,t){return e==null?e:{id:e.id,productCode:e.productCode,name:e.name,model:e.model,type:As(e.type),provisionMode:Ad(e.provisionMode),variants:e.variants.map(hE)}}function bE(e){return SE(e)}function SE(e,t){return e==null?e:{products:e.products.map(yE)}}function RE(e){return _E(e)}function _E(e,t){return e==null?e:{data:bE(e.data),meta:j(e.meta)}}function OE(e){if(e!==void 0)return e===null?null:{productId:e.productId,productVariantIds:e.productVariantIds,erpMaterialNumbers:e.erpMaterialNumbers}}function EE(e){if(e!==void 0)return e===null?null:{productVariantId:e.productVariantId,version:e.version,erpMaterialNumber:e.erpMaterialNumber,remarks:e.remarks}}function TE(e){return CE(e)}function CE(e,t){return e==null?e:{data:e.data,meta:j(e.meta)}}function PE(e){if(e!==void 0)return e===null?null:{vac:e.vac,vdc:e.vdc,iac:e.iac,idc:e.idc,epc:e.epc,pac:e.pac,phi:e.phi,pfc:e.pfc,sap:e.sap}}function AE(e){if(e!==void 0)return e===null?null:{productSerial:e.productSerial,status:e.status,results:PE(e.results)}}function pc(e){return DE(e)}function DE(e,t){return e==null?e:{data:D(e,"data")?e.data:void 0,meta:j(e.meta)}}function IE(e){if(e!==void 0)return e===null?null:{productSerialId:e.productSerialId,dataMatrixCode:e.dataMatrixCode}}function NE(e){if(e!==void 0)return e===null?null:{identifiers:e.identifiers===void 0?void 0:e.identifiers.map(IE)}}class FE extends rs{async assignFirmwareDeploymentGroupRaw(t,r){if(t.assignFirmwareDeploymentGroupRequest===null||t.assignFirmwareDeploymentGroupRequest===void 0)throw new ee("assignFirmwareDeploymentGroupRequest","Required parameter requestParameters.assignFirmwareDeploymentGroupRequest was null or undefined when calling assignFirmwareDeploymentGroup.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/deploymentGroup/assign",method:"POST",headers:i,query:n,body:cS(t.assignFirmwareDeploymentGroupRequest)},r);return new K(a,o=>aS(o))}async assignFirmwareDeploymentGroup(t,r){return await(await this.assignFirmwareDeploymentGroupRaw(t,r)).value()}async assignFirmwareDeploymentGroupOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/deploymentGroup/assign",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async assignFirmwareDeploymentGroupOptions(t){await this.assignFirmwareDeploymentGroupOptionsRaw(t)}async createDeviceRaw(t,r){if(t.createDeviceRequest===null||t.createDeviceRequest===void 0)throw new ee("createDeviceRequest","Required parameter requestParameters.createDeviceRequest was null or undefined when calling createDevice.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/device/create",method:"POST",headers:i,query:n,body:yS(t.createDeviceRequest)},r);return new K(a,o=>hS(o))}async createDevice(t,r){return await(await this.createDeviceRaw(t,r)).value()}async createDeviceOptionsRaw(t){const r={},n={},i=await this.request({path:"/device/create",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async createDeviceOptions(t){await this.createDeviceOptionsRaw(t)}async createFirmwareRaw(t,r){if(t.createFirmwareRequest===null||t.createFirmwareRequest===void 0)throw new ee("createFirmwareRequest","Required parameter requestParameters.createFirmwareRequest was null or undefined when calling createFirmware.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/create",method:"POST",headers:i,query:n,body:HS(t.createFirmwareRequest)},r);return new K(a,o=>_S(o))}async createFirmware(t,r){return await(await this.createFirmwareRaw(t,r)).value()}async createFirmwareDeploymentGroupRaw(t,r){if(t.createFirmwareDeploymentGroupRequest===null||t.createFirmwareDeploymentGroupRequest===void 0)throw new ee("createFirmwareDeploymentGroupRequest","Required parameter requestParameters.createFirmwareDeploymentGroupRequest was null or undefined when calling createFirmwareDeploymentGroup.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/deploymentGroup/create",method:"POST",headers:i,query:n,body:DS(t.createFirmwareDeploymentGroupRequest)},r);return new K(a,o=>lc(o))}async createFirmwareDeploymentGroup(t,r){return await(await this.createFirmwareDeploymentGroupRaw(t,r)).value()}async createFirmwareDeploymentGroupOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/deploymentGroup/create",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async createFirmwareDeploymentGroupOptions(t){await this.createFirmwareDeploymentGroupOptionsRaw(t)}async createFirmwareFileRaw(t,r){if(t.createFirmwareFileRequest===null||t.createFirmwareFileRequest===void 0)throw new ee("createFirmwareFileRequest","Required parameter requestParameters.createFirmwareFileRequest was null or undefined when calling createFirmwareFile.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/file/create",method:"POST",headers:i,query:n,body:US(t.createFirmwareFileRequest)},r);return new K(a,o=>LS(o))}async createFirmwareFile(t,r){return await(await this.createFirmwareFileRaw(t,r)).value()}async createFirmwareFileOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/file/create",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async createFirmwareFileOptions(t){await this.createFirmwareFileOptionsRaw(t)}async createFirmwareOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/create",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async createFirmwareOptions(t){await this.createFirmwareOptionsRaw(t)}async createFirmwareReleaseRaw(t,r){if(t.createFirmwareReleaseRequest===null||t.createFirmwareReleaseRequest===void 0)throw new ee("createFirmwareReleaseRequest","Required parameter requestParameters.createFirmwareReleaseRequest was null or undefined when calling createFirmwareRelease.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/release/create",method:"POST",headers:i,query:n,body:JS(t.createFirmwareReleaseRequest)},r);return new K(a,o=>dc(o))}async createFirmwareRelease(t,r){return await(await this.createFirmwareReleaseRaw(t,r)).value()}async createFirmwareReleaseOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/release/create",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async createFirmwareReleaseOptions(t){await this.createFirmwareReleaseOptionsRaw(t)}async createTagRaw(t,r){if(t.createTagRequest===null||t.createTagRequest===void 0)throw new ee("createTagRequest","Required parameter requestParameters.createTagRequest was null or undefined when calling createTag.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/tag/create",method:"POST",headers:i,query:n,body:jS(t.createTagRequest)},r);return new K(a,o=>XS(o))}async createTag(t,r){return await(await this.createTagRaw(t,r)).value()}async createTagOptionsRaw(t){const r={},n={},i=await this.request({path:"/tag/create",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async createTagOptions(t){await this.createTagOptionsRaw(t)}async debugGatewayDataRaw(t,r){if(t.debugGatewayDataRequest===null||t.debugGatewayDataRequest===void 0)throw new ee("debugGatewayDataRequest","Required parameter requestParameters.debugGatewayDataRequest was null or undefined when calling debugGatewayData.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/debug/gateway/data",method:"POST",headers:i,query:n,body:u0(t.debugGatewayDataRequest)},r);return new K(a,o=>a0(o))}async debugGatewayData(t,r){return await(await this.debugGatewayDataRaw(t,r)).value()}async debugGatewayDataOptionsRaw(t){const r={},n={},i=await this.request({path:"/debug/gateway/data",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async debugGatewayDataOptions(t){await this.debugGatewayDataOptionsRaw(t)}async debugInverterDataRaw(t,r){if(t.debugInverterDataRequest===null||t.debugInverterDataRequest===void 0)throw new ee("debugInverterDataRequest","Required parameter requestParameters.debugInverterDataRequest was null or undefined when calling debugInverterData.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/debug/inverter/data",method:"POST",headers:i,query:n,body:p0(t.debugInverterDataRequest)},r);return new K(a,o=>d0(o))}async debugInverterData(t,r){return await(await this.debugInverterDataRaw(t,r)).value()}async debugInverterDataOptionsRaw(t){const r={},n={},i=await this.request({path:"/debug/inverter/data",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async debugInverterDataOptions(t){await this.debugInverterDataOptionsRaw(t)}async deviceIdentifierListRaw(t,r){if(t.deviceIdentifierListRequest===null||t.deviceIdentifierListRequest===void 0)throw new ee("deviceIdentifierListRequest","Required parameter requestParameters.deviceIdentifierListRequest was null or undefined when calling deviceIdentifierList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/device/identifier/list",method:"POST",headers:i,query:n,body:b0(t.deviceIdentifierListRequest)},r);return new K(a,o=>y0(o))}async deviceIdentifierList(t,r){return await(await this.deviceIdentifierListRaw(t,r)).value()}async deviceIdentifierListOptionsRaw(t){const r={},n={},i=await this.request({path:"/device/identifier/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async deviceIdentifierListOptions(t){await this.deviceIdentifierListOptionsRaw(t)}async deviceListRaw(t,r){if(t.deviceListRequest===null||t.deviceListRequest===void 0)throw new ee("deviceListRequest","Required parameter requestParameters.deviceListRequest was null or undefined when calling deviceList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/device/list",method:"POST",headers:i,query:n,body:W0(t.deviceListRequest)},r);return new K(a,o=>J0(o))}async deviceList(t,r){return await(await this.deviceListRaw(t,r)).value()}async deviceListOptionsRaw(t){const r={},n={},i=await this.request({path:"/device/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async deviceListOptions(t){await this.deviceListOptionsRaw(t)}async firmwareDeploymentGroupListRaw(t,r){if(t.firmwareDeploymentGroupListRequest===null||t.firmwareDeploymentGroupListRequest===void 0)throw new ee("firmwareDeploymentGroupListRequest","Required parameter requestParameters.firmwareDeploymentGroupListRequest was null or undefined when calling firmwareDeploymentGroupList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/deploymentGroup/list",method:"POST",headers:i,query:n,body:iR(t.firmwareDeploymentGroupListRequest)},r);return new K(a,o=>rR(o))}async firmwareDeploymentGroupList(t,r){return await(await this.firmwareDeploymentGroupListRaw(t,r)).value()}async firmwareDeploymentGroupListOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/deploymentGroup/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async firmwareDeploymentGroupListOptions(t){await this.firmwareDeploymentGroupListOptionsRaw(t)}async firmwareListRaw(t,r){if(t.firmwareListRequest===null||t.firmwareListRequest===void 0)throw new ee("firmwareListRequest","Required parameter requestParameters.firmwareListRequest was null or undefined when calling firmwareList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/list",method:"POST",headers:i,query:n,body:cR(t.firmwareListRequest)},r);return new K(a,o=>sR(o))}async firmwareList(t,r){return await(await this.firmwareListRaw(t,r)).value()}async firmwareListOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async firmwareListOptions(t){await this.firmwareListOptionsRaw(t)}async getDebugModeListRaw(t){const r={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const i=await this.request({path:"/debug/mode/list",method:"POST",headers:n,query:r},t);return new K(i,a=>wR(a))}async getDebugModeList(t){return await(await this.getDebugModeListRaw(t)).value()}async getDebugModeListOptionsRaw(t){const r={},n={},i=await this.request({path:"/debug/mode/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async getDebugModeListOptions(t){await this.getDebugModeListOptionsRaw(t)}async getDeviceStatusListRaw(t,r){if(t.getDeviceStatusListRequest===null||t.getDeviceStatusListRequest===void 0)throw new ee("getDeviceStatusListRequest","Required parameter requestParameters.getDeviceStatusListRequest was null or undefined when calling getDeviceStatusList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/device/status/list",method:"POST",headers:i,query:n,body:CR(t.getDeviceStatusListRequest)},r);return new K(a,o=>ER(o))}async getDeviceStatusList(t,r){return await(await this.getDeviceStatusListRaw(t,r)).value()}async getDeviceStatusListOptionsRaw(t){const r={},n={},i=await this.request({path:"/device/status/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async getDeviceStatusListOptions(t){await this.getDeviceStatusListOptionsRaw(t)}async getFirmwareFileRaw(t,r){if(t.getFirmwareFileRequest===null||t.getFirmwareFileRequest===void 0)throw new ee("getFirmwareFileRequest","Required parameter requestParameters.getFirmwareFileRequest was null or undefined when calling getFirmwareFile.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/file/get",method:"POST",headers:i,query:n,body:kR(t.getFirmwareFileRequest)},r);return new K(a,o=>qR(o))}async getFirmwareFile(t,r){return await(await this.getFirmwareFileRaw(t,r)).value()}async getFirmwareFileListRaw(t,r){if(t.getFirmwareFileListRequest===null||t.getFirmwareFileListRequest===void 0)throw new ee("getFirmwareFileListRequest","Required parameter requestParameters.getFirmwareFileListRequest was null or undefined when calling getFirmwareFileList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/file/list",method:"POST",headers:i,query:n,body:BR(t.getFirmwareFileListRequest)},r);return new K(a,o=>VR(o))}async getFirmwareFileList(t,r){return await(await this.getFirmwareFileListRaw(t,r)).value()}async getFirmwareFileListOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/file/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async getFirmwareFileListOptions(t){await this.getFirmwareFileListOptionsRaw(t)}async getFirmwareFileOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/file/get",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async getFirmwareFileOptions(t){await this.getFirmwareFileOptionsRaw(t)}async getFirmwareFileTypeListRaw(t){const r={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const i=await this.request({path:"/firmware/fileType/list",method:"POST",headers:n,query:r},t);return new K(i,a=>KR(a))}async getFirmwareFileTypeList(t){return await(await this.getFirmwareFileTypeListRaw(t)).value()}async getFirmwareFileTypeListOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/fileType/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async getFirmwareFileTypeListOptions(t){await this.getFirmwareFileTypeListOptionsRaw(t)}async getFirmwareReleaseListRaw(t,r){if(t.getFirmwareReleaseListRequest===null||t.getFirmwareReleaseListRequest===void 0)throw new ee("getFirmwareReleaseListRequest","Required parameter requestParameters.getFirmwareReleaseListRequest was null or undefined when calling getFirmwareReleaseList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/release/list",method:"POST",headers:i,query:n,body:c_(t.getFirmwareReleaseListRequest)},r);return new K(a,o=>s_(o))}async getFirmwareReleaseList(t,r){return await(await this.getFirmwareReleaseListRaw(t,r)).value()}async getFirmwareReleaseListOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/release/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async getFirmwareReleaseListOptions(t){await this.getFirmwareReleaseListOptionsRaw(t)}async getFirmwareReleaseTypeListRaw(t){const r={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const i=await this.request({path:"/firmware/releaseType/list",method:"POST",headers:n,query:r},t);return new K(i,a=>m_(a))}async getFirmwareReleaseTypeList(t){return await(await this.getFirmwareReleaseTypeListRaw(t)).value()}async getFirmwareReleaseTypeListOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/releaseType/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async getFirmwareReleaseTypeListOptions(t){await this.getFirmwareReleaseTypeListOptionsRaw(t)}async getPlantListRaw(t,r){if(t.getPlantListRequest===null||t.getPlantListRequest===void 0)throw new ee("getPlantListRequest","Required parameter requestParameters.getPlantListRequest was null or undefined when calling getPlantList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/plant/list",method:"POST",headers:i,query:n,body:q_(t.getPlantListRequest)},r);return new K(a,o=>I_(o))}async getPlantList(t,r){return await(await this.getPlantListRaw(t,r)).value()}async getPlantListOptionsRaw(t){const r={},n={},i=await this.request({path:"/plant/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async getPlantListOptions(t){await this.getPlantListOptionsRaw(t)}async getTagListRaw(t){const r={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const i=await this.request({path:"/tag/list",method:"POST",headers:n,query:r},t);return new K(i,a=>G_(a))}async getTagList(t){return await(await this.getTagListRaw(t)).value()}async getTagListOptionsRaw(t){const r={},n={},i=await this.request({path:"/tag/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async getTagListOptions(t){await this.getTagListOptionsRaw(t)}async logisticsBoxCreateRaw(t,r){if(t.logisticsBoxCreateRequest===null||t.logisticsBoxCreateRequest===void 0)throw new ee("logisticsBoxCreateRequest","Required parameter requestParameters.logisticsBoxCreateRequest was null or undefined when calling logisticsBoxCreate.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/logistics/box/create",method:"POST",headers:i,query:n,body:Q_(t.logisticsBoxCreateRequest)},r);return new K(a,o=>H_(o))}async logisticsBoxCreate(t,r){return await(await this.logisticsBoxCreateRaw(t,r)).value()}async logisticsBoxCreateOptionsRaw(t){const r={},n={},i=await this.request({path:"/logistics/box/create",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async logisticsBoxCreateOptions(t){await this.logisticsBoxCreateOptionsRaw(t)}async logisticsBoxGetRaw(t,r){if(t.logisticsBoxGetRequest===null||t.logisticsBoxGetRequest===void 0)throw new ee("logisticsBoxGetRequest","Required parameter requestParameters.logisticsBoxGetRequest was null or undefined when calling logisticsBoxGet.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/logistics/box/get",method:"POST",headers:i,query:n,body:cO(t.logisticsBoxGetRequest)},r);return new K(a,o=>sO(o))}async logisticsBoxGet(t,r){return await(await this.logisticsBoxGetRaw(t,r)).value()}async logisticsBoxGetOptionsRaw(t){const r={},n={},i=await this.request({path:"/logistics/box/get",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async logisticsBoxGetOptions(t){await this.logisticsBoxGetOptionsRaw(t)}async logisticsBoxTypeListRaw(t){const r={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const i=await this.request({path:"/logistics/boxType/list",method:"POST",headers:n,query:r},t);return new K(i,a=>vO(a))}async logisticsBoxTypeList(t){return await(await this.logisticsBoxTypeListRaw(t)).value()}async logisticsBoxTypeListOptionsRaw(t){const r={},n={},i=await this.request({path:"/logistics/boxType/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async logisticsBoxTypeListOptions(t){await this.logisticsBoxTypeListOptionsRaw(t)}async modifyDeviceRaw(t,r){if(t.modifyDeviceRequest===null||t.modifyDeviceRequest===void 0)throw new ee("modifyDeviceRequest","Required parameter requestParameters.modifyDeviceRequest was null or undefined when calling modifyDevice.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/device/modify",method:"POST",headers:i,query:n,body:gO(t.modifyDeviceRequest)},r);return new K(a,o=>pc(o))}async modifyDevice(t,r){return await(await this.modifyDeviceRaw(t,r)).value()}async modifyDeviceOptionsRaw(t){const r={},n={},i=await this.request({path:"/device/modify",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async modifyDeviceOptions(t){await this.modifyDeviceOptionsRaw(t)}async modifyFirmwareDeploymentGroupRaw(t,r){if(t.modifyFirmwareDeploymentGroupRequest===null||t.modifyFirmwareDeploymentGroupRequest===void 0)throw new ee("modifyFirmwareDeploymentGroupRequest","Required parameter requestParameters.modifyFirmwareDeploymentGroupRequest was null or undefined when calling modifyFirmwareDeploymentGroup.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/deploymentGroup/modify",method:"POST",headers:i,query:n,body:yO(t.modifyFirmwareDeploymentGroupRequest)},r);return new K(a,o=>lc(o))}async modifyFirmwareDeploymentGroup(t,r){return await(await this.modifyFirmwareDeploymentGroupRaw(t,r)).value()}async modifyFirmwareDeploymentGroupOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/deploymentGroup/modify",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async modifyFirmwareDeploymentGroupOptions(t){await this.modifyFirmwareDeploymentGroupOptionsRaw(t)}async modifyFirmwareReleaseRaw(t,r){if(t.modifyFirmwareReleaseRequest===null||t.modifyFirmwareReleaseRequest===void 0)throw new ee("modifyFirmwareReleaseRequest","Required parameter requestParameters.modifyFirmwareReleaseRequest was null or undefined when calling modifyFirmwareRelease.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/firmware/release/modify",method:"POST",headers:i,query:n,body:wO(t.modifyFirmwareReleaseRequest)},r);return new K(a,o=>dc(o))}async modifyFirmwareRelease(t,r){return await(await this.modifyFirmwareReleaseRaw(t,r)).value()}async modifyFirmwareReleaseOptionsRaw(t){const r={},n={},i=await this.request({path:"/firmware/release/modify",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async modifyFirmwareReleaseOptions(t){await this.modifyFirmwareReleaseOptionsRaw(t)}async productBoxCreateRaw(t,r){if(t.productBoxCreateRequest===null||t.productBoxCreateRequest===void 0)throw new ee("productBoxCreateRequest","Required parameter requestParameters.productBoxCreateRequest was null or undefined when calling productBoxCreate.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/product/box/create",method:"POST",headers:i,query:n,body:OO(t.productBoxCreateRequest)},r);return new K(a,o=>RO(o))}async productBoxCreate(t,r){return await(await this.productBoxCreateRaw(t,r)).value()}async productBoxCreateOptionsRaw(t){const r={},n={},i=await this.request({path:"/product/box/create",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async productBoxCreateOptions(t){await this.productBoxCreateOptionsRaw(t)}async productBoxGetRaw(t,r){if(t.productBoxGetRequest===null||t.productBoxGetRequest===void 0)throw new ee("productBoxGetRequest","Required parameter requestParameters.productBoxGetRequest was null or undefined when calling productBoxGet.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/product/box/get",method:"POST",headers:i,query:n,body:UO(t.productBoxGetRequest)},r);return new K(a,o=>LO(o))}async productBoxGet(t,r){return await(await this.productBoxGetRaw(t,r)).value()}async productBoxGetOptionsRaw(t){const r={},n={},i=await this.request({path:"/product/box/get",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async productBoxGetOptions(t){await this.productBoxGetOptionsRaw(t)}async productBoxTypeListRaw(t){const r={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const i=await this.request({path:"/product/boxType/list",method:"POST",headers:n,query:r},t);return new K(i,a=>GO(a))}async productBoxTypeList(t){return await(await this.productBoxTypeListRaw(t)).value()}async productBoxTypeListOptionsRaw(t){const r={},n={},i=await this.request({path:"/product/boxType/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async productBoxTypeListOptions(t){await this.productBoxTypeListOptionsRaw(t)}async productListRaw(t,r){if(t.productListRequest===null||t.productListRequest===void 0)throw new ee("productListRequest","Required parameter requestParameters.productListRequest was null or undefined when calling productList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/product/list",method:"POST",headers:i,query:n,body:XO(t.productListRequest)},r);return new K(a,o=>KO(o))}async productList(t,r){return await(await this.productListRaw(t,r)).value()}async productListOptionsRaw(t){const r={},n={},i=await this.request({path:"/product/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async productListOptions(t){await this.productListOptionsRaw(t)}async productProvisionModeListRaw(t){const r={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const i=await this.request({path:"/product/provisionMode/list",method:"POST",headers:n,query:r},t);return new K(i,a=>rE(a))}async productProvisionModeList(t){return await(await this.productProvisionModeListRaw(t)).value()}async productProvisionModeListOptionsRaw(t){const r={},n={},i=await this.request({path:"/product/provisionMode/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async productProvisionModeListOptions(t){await this.productProvisionModeListOptionsRaw(t)}async productTypeListRaw(t){const r={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const i=await this.request({path:"/product/type/list",method:"POST",headers:n,query:r},t);return new K(i,a=>uE(a))}async productTypeList(t){return await(await this.productTypeListRaw(t)).value()}async productTypeListOptionsRaw(t){const r={},n={},i=await this.request({path:"/product/type/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async productTypeListOptions(t){await this.productTypeListOptionsRaw(t)}async productVarianModifyOptionsRaw(t){const r={},n={},i=await this.request({path:"/product/variant/modify",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async productVarianModifyOptions(t){await this.productVarianModifyOptionsRaw(t)}async productVariantCreateRaw(t,r){if(t.productVariantCreateRequest===null||t.productVariantCreateRequest===void 0)throw new ee("productVariantCreateRequest","Required parameter requestParameters.productVariantCreateRequest was null or undefined when calling productVariantCreate.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/product/variant/create",method:"POST",headers:i,query:n,body:vE(t.productVariantCreateRequest)},r);return new K(a,o=>fc(o))}async productVariantCreate(t,r){return await(await this.productVariantCreateRaw(t,r)).value()}async productVariantCreateOptionsRaw(t){const r={},n={},i=await this.request({path:"/product/variant/create",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async productVariantCreateOptions(t){await this.productVariantCreateOptionsRaw(t)}async productVariantListRaw(t,r){if(t.productVariantListRequest===null||t.productVariantListRequest===void 0)throw new ee("productVariantListRequest","Required parameter requestParameters.productVariantListRequest was null or undefined when calling productVariantList.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/product/variant/list",method:"POST",headers:i,query:n,body:OE(t.productVariantListRequest)},r);return new K(a,o=>RE(o))}async productVariantList(t,r){return await(await this.productVariantListRaw(t,r)).value()}async productVariantListOptionsRaw(t){const r={},n={},i=await this.request({path:"/product/variant/list",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async productVariantListOptions(t){await this.productVariantListOptionsRaw(t)}async productVariantModifyRaw(t,r){if(t.productVariantModifyRequest===null||t.productVariantModifyRequest===void 0)throw new ee("productVariantModifyRequest","Required parameter requestParameters.productVariantModifyRequest was null or undefined when calling productVariantModify.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/product/variant/modify",method:"POST",headers:i,query:n,body:EE(t.productVariantModifyRequest)},r);return new K(a,o=>fc(o))}async productVariantModify(t,r){return await(await this.productVariantModifyRaw(t,r)).value()}async qaInverterEfficiencyTestRaw(t,r){if(t.qaInverterEfficiencyTestRequest===null||t.qaInverterEfficiencyTestRequest===void 0)throw new ee("qaInverterEfficiencyTestRequest","Required parameter requestParameters.qaInverterEfficiencyTestRequest was null or undefined when calling qaInverterEfficiencyTest.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/qa/inverterEfficiencyTest",method:"POST",headers:i,query:n,body:AE(t.qaInverterEfficiencyTestRequest)},r);return new K(a,o=>TE(o))}async qaInverterEfficiencyTest(t,r){return await(await this.qaInverterEfficiencyTestRaw(t,r)).value()}async qaInverterEfficiencyTestOptionsRaw(t){const r={},n={},i=await this.request({path:"/qa/inverterEfficiencyTest",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async qaInverterEfficiencyTestOptions(t){await this.qaInverterEfficiencyTestOptionsRaw(t)}async setDataMatrixCodeRaw(t,r){if(t.setDataMatrixCodeRequest===null||t.setDataMatrixCodeRequest===void 0)throw new ee("setDataMatrixCodeRequest","Required parameter requestParameters.setDataMatrixCodeRequest was null or undefined when calling setDataMatrixCode.");const n={},i={};i["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(i.Authorization=this.configuration.apiKey("Authorization"));const a=await this.request({path:"/device/identifier/setDataMatrixCode",method:"POST",headers:i,query:n,body:NE(t.setDataMatrixCodeRequest)},r);return new K(a,o=>pc(o))}async setDataMatrixCode(t,r){return await(await this.setDataMatrixCodeRaw(t,r)).value()}async setDataMatrixCodeOptionsRaw(t){const r={},n={},i=await this.request({path:"/device/identifier/setDataMatrixCode",method:"OPTIONS",headers:n,query:r},t);return new Y(i)}async setDataMatrixCodeOptions(t){await this.setDataMatrixCodeOptionsRaw(t)}}var Pe=(e=>(e.ESP32_C3="esp32c3",e.ESP32_S3="esp32s3",e.MICROCHIP="microchip",e.UNKNOWN="unknown",e))(Pe||{}),se=(e=>(e.FLASH="Flash",e.VERIFY="Verify",e))(se||{}),te=(e=>(e.BOOTLOADER="Bootloader",e.PARTITION="Partition",e.STORAGE="Storage",e.OTA="OTA",e.KEY="Key",e.APP="App",e))(te||{}),we=(e=>(e.IDLE="idle",e.RUNNING="running",e.SUCCESS="success",e.SKIPPED="skipped",e.WARNING="warning",e.ERROR="error",e))(we||{}),Ne=(e=>(e.STOPPED="stopped",e.STARTED="started",e.SUCCEEDED="succeeded",e.FAILED="failed",e.WARNING="warning",e))(Ne||{}),B=(e=>(e.ERROR="error",e.WARN="warn",e.INFO="info",e.DEBUG="debug",e.TRACE="trace",e))(B||{}),Gr=(e=>(e.PRODUCT="PRODUCT",e.PRODUCT_BOX="PRODUCT_BOX",e.PRODUCT_BOX_WIFI="PRODUCT_BOX_WIFI",e.LOGISTICS_BOX="LOGISTICS_BOX",e))(Gr||{}),pr=(e=>(e.WIFI="wifi",e.STANDARD="standard",e))(pr||{}),Dd=(e=>(e.CRC32="crc32",e))(Dd||{}),ut=(e=>(e[e.PLANNED=1]="PLANNED",e[e.PRODUCED=2]="PRODUCED",e[e.FLASHED=3]="FLASHED",e[e.OPERABLE=4]="OPERABLE",e[e.DEFECT=5]="DEFECT",e[e.DEPLOYED=6]="DEPLOYED",e[e.SCRAPPED=7]="SCRAPPED",e))(ut||{}),Se=(e=>(e.CLEAR_Z_BIT="7A",e.SET_RANDOMIZE="61",e.GET_RANDOMIZE_0="72",e.GET_RANDOMIZE_1="74",e.CLEAR_RANDOMIZE="5A",e.ACTIVATE_FIRMWARE="41",e.SET_POWER="40",e.GET_DATA="44",e.FIRMWARE="46",e.INIT="49",e.BLOCK="42",e.RESET="5E",e))(Se||{}),Id=(e=>(e[e.BOOTLOADER=0]="BOOTLOADER",e[e.APP=1]="APP",e))(Id||{}),ns=(e=>(e[e.AtMostOnce=0]="AtMostOnce",e[e.AtLeastOnce=1]="AtLeastOnce",e[e.ExactlyOnce=2]="ExactlyOnce",e))(ns||{});function ME(){let e=0;return{newMsgId:()=>++e,resetMsgId:()=>e=0}}var Xr=(e=>(e.API_FETCH_FROM_RENDER="0",e.API_KEYS_FROM_RENDER="1",e.CREDENTIALS_FROM_RENDER="2",e.TO_CLIPBOARD_IN_MAIN="3",e.IPC_FLASH="4",e))(Xr||{}),w=(e=>(e.PING="Ping",e.PONG="Pong",e.ERROR_RESPONSE="ErrorResponse",e.GENERATE_NVS_CSV_REQUEST="GenerateNvsRequest",e.GENERATE_NVS_CSV_RESPONSE="GenerateNvsResponse",e.COM_PORT_LIST_REQUEST="ComPortListRequest",e.COM_PORT_LIST_RESPONSE="ComPortListResponse",e.COM_PORT_TEST_REQUEST="ComPortTestRequest",e.COM_PORT_TEST_RESPONSE="ComPortTestResponse",e.FLASH_TEST_REQUEST="FlashTestRequest",e.FLASH_TEST_RESPONSE="FlashTestResponse",e.FLASH_START_REQUEST="FlashStartRequest",e.FLASH_STOP_REQUEST="FlashStopRequest",e.FLASH_ERASE_REQUEST="FlashEraseRequest",e.FLASH_LOG_UPDATE="FlashLogUpdate",e.FLASH_STATE_UPDATE="FlashStateUpdate",e.FLASH_STATUS_UPDATE="FlashStatusUpdate",e.PRINT_TEST_REQUEST="PrintTestRequest",e.PRINT_TEST_RESPONSE="PrintTestResponse",e.PRINT_COMMAND_REQUEST="PrintCommandRequest",e.PRINT_COMMAND_RESPONSE="PrintCommandResponse",e.PRINT_REQUEST="PrintRequest",e.PRINT_RESPONSE="PrintResponse",e.MICROCHIP_LIST_REQUEST="MicrochipListRequest",e.MICROCHIP_LIST_RESPONSE="MicrochipListResponse",e.PROGRAMMER_TEST_REQUEST="ProgrammerTestRequest",e.PROGRAMMER_TEST_RESPONSE="ProgrammerTestResponse",e.GENERATE_OTP_REQUEST="GenerateOtpRequest",e.GENERATE_OTP_RESPONSE="GenerateOtpResponse",e.UTILITY_REQUEST="UtilityRequest",e.UTILITY_RESPONSE="UtilityResponse",e.IGB_TEST_REQUEST="IbgTestRequest",e.IGB_TEST_UPDATE="IbgTestUpdate",e.IGB_TEST_RESPONSE="IbgTestResponse",e.SAVE_FILE_REQUEST="SaveFileRequest",e.SAVE_FILE_RESPONSE="SaveFileResponse",e.READ_FILE_REQUEST="ReadFileRequest",e.READ_FILE_RESPONSE="ReadFileResponse",e.SET_MENU_BAR_VISIBILITY="SetMenuBarVisibility",e.ENCRYPT_REQUEST="EncryptRequest",e.ENCRYPT_RESPONSE="EncryptResponse",e.INVERTER_EFFICIENCY_TEST_REQUEST="InverterEfficiencyTestRequest",e.INVERTER_EFFICIENCY_TEST_UPDATE="InverterEfficiencyTestUpdate",e.INVERTER_EFFICIENCY_TEST_RESPONSE="InverterEfficiencyTestResponse",e.SERIAL_PORT_REQUEST="SerialPortRequest",e.SERIAL_PORT_RESPONSE="SerialPortResponse",e.SERIAL_PORT_CLOSE_REQUEST="SerialPortCloseRequest",e.SERIAL_PORT_CLOSE_RESPONSE="SerialPortCloseResponse",e.START_COM_MONITOR_REQUEST="StartComMonitorRequest",e.STOP_COM_MONITOR_REQUEST="StopComMonitorRequest",e.COM_MONITOR_INFO_RESPONSE="ComMonitorInfoResponse",e.COM_MONITOR_DATA_RESPONSE="ComMonitorDataResponse",e.COM_MONITOR_SEND_DATA="ComMonitorSendData",e.PLC_REQUEST="PlcRequest",e.PLC_RESPONSE="PlcResponse",e.PLC_OPEN_REQUEST="PlcOpenRequest",e.PLC_OPEN_RESPONSE="PlcOpenResponse",e.PLC_CLOSE_REQUEST="PlcCloseRequest",e.PLC_CLOSE_RESPONSE="PlcCloseResponse",e.PLC_SCAN_DEVICES_REQUEST="PlcScanDevicesRequest",e.PLC_SCAN_DEVICES_RESPONSE="PlcScanDevicesResponse",e.PLC_GET_DEVICE_INFO_REQUEST="PlcGetDeviceInfoRequest",e.PLC_GET_DEVICE_INFO_RESPONSE="PlcGetDeviceInfoResponse",e.PLC_GET_DATA_REQUEST="PlcGetDataRequest",e.PLC_GET_DATA_RESPONSE="PlcGetDataResponse",e.PLC_SET_POWER_REQUEST="PlcSetPowerRequest",e.PLC_SET_POWER_RESPONSE="PlcSetPowerResponse",e.DOWNLOAD_FIRMWARE_FILE_REQUEST="DownloadFirmwareFileRequest",e.DOWNLOAD_FIRMWARE_FILE_RESPONSE="DownloadFirmwareFileResponse",e.MQTT_CONNECT_REQUEST="MqttConnectRequest",e.MQTT_CONNECT_RESPONSE="MqttConnectResponse",e.MQTT_DISCONNECT_REQUEST="MqttDisconnectRequest",e.MQTT_DISCONNECT_RESPONSE="MqttDisconnectResponse",e.MQTT_PUBLISH_REQUEST="MqttPublishRequest",e.MQTT_PUBLISH_RESPONSE="MqttPublishResponse",e.MQTT_SUBSCRIBE_REQUEST="MqttSubscribeRequest",e.MQTT_SUBSCRIBE_UPDATE="MqttSubscribeUpdate",e.MQTT_SUBSCRIBE_RESPONSE="MqttSubscribeResponse",e.MQTT_UNSUBSCRIBE_REQUEST="MqttUnsubscribeRequest",e.MQTT_UNSUBSCRIBE_RESPONSE="MqttUnsubscribeResponse",e))(w||{});const qE=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,zE=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,LE=/^([/\\]\s*){2,}[^/\\]/,$E=/^\.?\//;function UE(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?qE.test(e):zE.test(e)||(t.acceptRelative?LE.test(e):!1)}function xE(e="",t){return e.endsWith("/")}function VE(e="",t){return(xE(e)?e.slice(0,-1):e)||"/"}function GE(e="",t){return e.endsWith("/")?e:e+"/"}function BE(e=""){return e.startsWith("/")}function kE(e=""){return BE(e)?e:"/"+e}function JE(e){return e&&e!=="/"}function HE(e,...t){let r=e||"";for(const n of t.filter(i=>JE(i)))if(r){const i=n.replace($E,"");r=GE(r)+i}else r=n;return r}const WE=Symbol.for("ufo:protocolRelative");function QE(e="",t){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,f,m=""]=r;return{protocol:f.toLowerCase(),pathname:m,href:f+m,auth:"",host:"",search:"",hash:""}}if(!UE(e,{acceptRelative:!0}))return mc(e);const[,n="",i,a=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,o="",u=""]=a.match(/([^#/?]*)(.*)?/)||[],{pathname:l,search:c,hash:d}=mc(u.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:n.toLowerCase(),auth:i?i.slice(0,Math.max(0,i.length-1)):"",host:o,pathname:l,search:c,hash:d,[WE]:!n}}function mc(e=""){const[t="",r="",n=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:n}}const st={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function KE(e={}){const t={options:e,rootNode:Nd(),staticRoutesMap:{}},r=n=>e.strictTrailingSlash?n:n.replace(/\/$/,"")||"/";if(e.routes)for(const n in e.routes)vc(t,r(n),e.routes[n]);return{ctx:t,lookup:n=>YE(t,r(n)),insert:(n,i)=>vc(t,r(n),i),remove:n=>XE(t,r(n))}}function YE(e,t){const r=e.staticRoutesMap[t];if(r)return r.data;const n=t.split("/"),i={};let a=!1,o=null,u=e.rootNode,l=null;for(let c=0;c<n.length;c++){const d=n[c];u.wildcardChildNode!==null&&(o=u.wildcardChildNode,l=n.slice(c).join("/"));const f=u.children.get(d);if(f===void 0){if(u&&u.placeholderChildren.length>1){const m=n.length-c;u=u.placeholderChildren.find(v=>v.maxDepth===m)||null}else u=u.placeholderChildren[0]||null;if(!u)break;u.paramName&&(i[u.paramName]=d),a=!0}else u=f}return(u===null||u.data===null)&&o!==null&&(u=o,i[u.paramName||"_"]=l,a=!0),u?a?{...u.data,params:a?i:void 0}:u.data:null}function vc(e,t,r){let n=!0;const i=t.split("/");let a=e.rootNode,o=0;const u=[a];for(const l of i){let c;if(c=a.children.get(l))a=c;else{const d=ZE(l);c=Nd({type:d,parent:a}),a.children.set(l,c),d===st.PLACEHOLDER?(c.paramName=l==="*"?`_${o++}`:l.slice(1),a.placeholderChildren.push(c),n=!1):d===st.WILDCARD&&(a.wildcardChildNode=c,c.paramName=l.slice(3)||"_",n=!1),u.push(c),a=c}}for(const[l,c]of u.entries())c.maxDepth=Math.max(u.length-l,c.maxDepth||0);return a.data=r,n===!0&&(e.staticRoutesMap[t]=a),a}function XE(e,t){let r=!1;const n=t.split("/");let i=e.rootNode;for(const a of n)if(i=i.children.get(a),!i)return r;if(i.data){const a=n.at(-1)||"";i.data=null,Object.keys(i.children).length===0&&i.parent&&(i.parent.children.delete(a),i.parent.wildcardChildNode=null,i.parent.placeholderChildren=[]),r=!0}return r}function Nd(e={}){return{type:e.type||st.NORMAL,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function ZE(e){return e.startsWith("**")?st.WILDCARD:e[0]===":"||e==="*"?st.PLACEHOLDER:st.NORMAL}function jE(e){const t=Md("",e.ctx.rootNode);return eT(t,e.ctx.options.strictTrailingSlash)}function eT(e,t){return{ctx:{table:e},matchAll:r=>Fd(r,e,t)}}function tT(){return{static:new Map,wildcard:new Map,dynamic:new Map}}function Fd(e,t,r){r!==!0&&e.endsWith("/")&&(e=e.slice(0,-1)||"/");const n=[];for(const[a,o]of hc(t.wildcard))(e===a||e.startsWith(a+"/"))&&n.push(o);for(const[a,o]of hc(t.dynamic))if(e.startsWith(a+"/")){const u="/"+e.slice(a.length).split("/").splice(2).join("/");n.push(...Fd(u,o))}const i=t.static.get(e);return i&&n.push(i),n.filter(Boolean)}function hc(e){return[...e.entries()].sort((t,r)=>t[0].length-r[0].length)}function Md(e,t){const r=tT();function n(i,a){if(i){if(a.type===st.NORMAL&&!(i.includes("*")||i.includes(":")))a.data&&r.static.set(i,a.data);else if(a.type===st.WILDCARD)r.wildcard.set(i.replace("/**",""),a.data);else if(a.type===st.PLACEHOLDER){const o=Md("",a);a.data&&o.static.set("/",a.data),r.dynamic.set(i.replace(/\/\*|\/:\w+/,""),o);return}}for(const[o,u]of a.children.entries())n(`${i}/${o}`.replace("//","/"),u)}return n(e,t),r}function Zn(e,t){try{return t in e}catch{return!1}}var rT=Object.defineProperty,nT=(e,t,r)=>t in e?rT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$t=(e,t,r)=>(nT(e,typeof t!="symbol"?t+"":t,r),r);class is extends Error{constructor(t,r={}){super(t,r),$t(this,"statusCode",500),$t(this,"fatal",!1),$t(this,"unhandled",!1),$t(this,"statusMessage"),$t(this,"data"),$t(this,"cause"),r.cause&&!this.cause&&(this.cause=r.cause)}toJSON(){const t={message:this.message,statusCode:hr(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=ui(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}$t(is,"__h3_error__",!0);function Ve(e){if(typeof e=="string")return new is(e);if(Is(e))return e;const t=new is(e.message??e.statusMessage??"",{cause:e.cause||e});if(Zn(e,"stack"))try{Object.defineProperty(t,"stack",{get(){return e.stack}})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=hr(e.statusCode,t.statusCode):e.status&&(t.statusCode=hr(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const r=t.statusMessage;ui(t.statusMessage)!==r&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(t.fatal=e.fatal),e.unhandled!==void 0&&(t.unhandled=e.unhandled),t}function iT(e,t,r){if(e.handled)return;const n=Is(t)?t:Ve(t),i={statusCode:n.statusCode,statusMessage:n.statusMessage,stack:[],data:n.data};if(r&&(i.stack=(n.stack||"").split(`
`).map(o=>o.trim())),e.handled)return;const a=Number.parseInt(n.statusCode);lT(e,a,n.statusMessage),e.node.res.setHeader("content-type",Yn.json),e.node.res.end(JSON.stringify(i,void 0,2))}function Is(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.__h3_error__)===!0}function aT(e){const t={};for(const r in e.node.req.headers){const n=e.node.req.headers[r];t[r]=Array.isArray(n)?n.filter(Boolean).join(", "):n}return t}function oT(e,t){return aT(e)[t.toLowerCase()]}const Yn={html:"text/html",json:"application/json"},sT=/[^\u0009\u0020-\u007E]/g;function ui(e=""){return e.replace(sT,"")}function hr(e,t=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?t:e}function qd(e){if(Array.isArray(e))return e.flatMap(d=>qd(d));if(typeof e!="string")return[];const t=[];let r=0,n,i,a,o,u;const l=()=>{for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length},c=()=>(i=e.charAt(r),i!=="="&&i!==";"&&i!==",");for(;r<e.length;){for(n=r,u=!1;l();)if(i=e.charAt(r),i===","){for(a=r,r+=1,l(),o=r;r<e.length&&c();)r+=1;r<e.length&&e.charAt(r)==="="?(u=!0,r=o,t.push(e.slice(n,a)),n=r):r=a+1}else r+=1;(!u||r>=e.length)&&t.push(e.slice(n,e.length))}return t}const uT=typeof setImmediate>"u"?e=>e():setImmediate;function xr(e,t,r){return r&&dT(e,r),new Promise(n=>{uT(()=>{e.handled||e.node.res.end(t),n()})})}function cT(e,t){if(e.handled)return;!t&&e.node.res.statusCode!==200&&(t=e.node.res.statusCode);const r=hr(t,204);r===204&&e.node.res.removeHeader("content-length"),e.node.res.writeHead(r),e.node.res.end()}function lT(e,t,r){t&&(e.node.res.statusCode=hr(t,e.node.res.statusCode)),r&&(e.node.res.statusMessage=ui(r))}function dT(e,t){t&&e.node.res.statusCode!==304&&!e.node.res.getHeader("content-type")&&e.node.res.setHeader("content-type",t)}function fT(e){return!e||typeof e!="object"?!1:typeof e.pipe=="function"&&(typeof e._read=="function"||typeof e.abort=="function")||typeof e.pipeTo=="function"}function pT(e){return typeof Response<"u"&&e instanceof Response}function zd(e,t){if(!t||typeof t!="object")throw new Error("[h3] Invalid stream provided.");if(e.node.res._data=t,!e.node.res.socket)return e._handled=!0,Promise.resolve();if(Zn(t,"pipeTo")&&typeof t.pipeTo=="function")return t.pipeTo(new WritableStream({write(r){e.node.res.write(r)}})).then(()=>{e.node.res.end()});if(Zn(t,"pipe")&&typeof t.pipe=="function")return new Promise((r,n)=>{t.pipe(e.node.res),t.on&&(t.on("end",()=>{e.node.res.end(),r()}),t.on("error",i=>{n(i)})),e.node.res.on("close",()=>{t.abort&&t.abort()})});throw new Error("[h3] Invalid or incompatible stream provided.")}function Ld(e,t){for(const[r,n]of t.headers)r==="set-cookie"?e.node.res.appendHeader(r,qd(n)):e.node.res.setHeader(r,n);if(t.status&&(e.node.res.statusCode=hr(t.status,e.node.res.statusCode)),t.statusText&&(e.node.res.statusMessage=ui(t.statusText)),t.redirected&&e.node.res.setHeader("location",t.url),!t.body){e.node.res.end();return}return zd(e,t.body)}var mT=Object.defineProperty,vT=(e,t,r)=>t in e?mT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,at=(e,t,r)=>(vT(e,typeof t!="symbol"?t+"":t,r),r);class hT{constructor(t,r){at(this,"__is_event__",!0),at(this,"node"),at(this,"web"),at(this,"context",{}),at(this,"_method"),at(this,"_path"),at(this,"_headers"),at(this,"_requestBody"),at(this,"_handled",!1),this.node={req:t,res:r}}get method(){return this._method||(this._method=(this.node.req.method||"GET").toUpperCase()),this._method}get path(){return this._path||this.node.req.url||"/"}get headers(){return this._headers||(this._headers=yT(this.node.req.headers)),this._headers}get handled(){return this._handled||this.node.res.writableEnded||this.node.res.headersSent}respondWith(t){return Promise.resolve(t).then(r=>Ld(this,r))}toString(){return`[${this.method}] ${this.path}`}toJSON(){return this.toString()}get req(){return this.node.req}get res(){return this.node.res}}function gT(e,t){return new hT(e,t)}function yT(e){const t=new Headers;for(const[r,n]of Object.entries(e))if(Array.isArray(n))for(const i of n)t.append(r,i);else n&&t.set(r,n);return t}function wT(e){if(typeof e=="function")return e.__is_handler__=!0,e;const t={onRequest:gc(e.onRequest),onBeforeResponse:gc(e.onBeforeResponse)},r=n=>bT(n,e.handler,t);return r.__is_handler__=!0,r.__resolve__=e.handler.__resolve__,r.__websocket__=e.websocket,r}function gc(e){return e?Array.isArray(e)?e:[e]:void 0}async function bT(e,t,r){if(r.onRequest){for(const a of r.onRequest)if(await a(e),e.handled)return}const i={body:await t(e)};if(r.onBeforeResponse)for(const a of r.onBeforeResponse)await a(e,i);return i.body}const Ut=wT;function $d(e){return Zn(e,"__is_handler__")}function Ns(e,t,r){return $d(e)||console.warn("[h3] Implicit event handler conversion is deprecated. Use `eventHandler()` or `fromNodeMiddleware()` to define event handlers.",r&&r!=="/"?`
     Route: ${r}`:"",`
     Handler: ${e}`),e}function ST(e){let t,r;const n=()=>r?Promise.resolve(r):(t||(t=Promise.resolve(e()).then(a=>{const o=a.default||a;if(typeof o!="function")throw new TypeError("Invalid lazy handler result. It should be a function:",o);return r={handler:Ns(a.default||a)},r})),t),i=Ut(a=>r?r.handler(a):n().then(o=>o.handler(a)));return i.__resolve__=n,i}const RT=ST;function _T(e={}){const t=[],r=OT(t,e),n=ET(t);r.__resolve__=n;const i=CT(()=>PT(n,e)),a={use:(o,u,l)=>as(a,o,u,l),resolve:n,handler:r,stack:t,options:e,get websocket(){return i()}};return a}function as(e,t,r,n){if(Array.isArray(t))for(const i of t)as(e,i,r,n);else if(Array.isArray(r))for(const i of r)as(e,t,i,n);else typeof t=="string"?e.stack.push(qo({...n,route:t,handler:r})):typeof t=="function"?e.stack.push(qo({...r,handler:t})):e.stack.push(qo({...t}));return e}function OT(e,t){const r=t.debug?2:void 0;return Ut(async n=>{n.node.req.originalUrl=n.node.req.originalUrl||n.node.req.url||"/";const i=n._path||n.node.req.url||"/";let a;t.onRequest&&await t.onRequest(n);for(const o of e){if(o.route.length>1){if(!i.startsWith(o.route))continue;a=i.slice(o.route.length)||"/"}else a=i;if(o.match&&!o.match(a,n))continue;n._path=a,n.node.req.url=a;const u=await o.handler(n),l=u===void 0?void 0:await u;if(l!==void 0){const c={body:l};t.onBeforeResponse&&await t.onBeforeResponse(n,c),await TT(n,c.body,r),t.onAfterResponse&&await t.onAfterResponse(n,c);return}if(n.handled){t.onAfterResponse&&await t.onAfterResponse(n,void 0);return}}if(!n.handled)throw Ve({statusCode:404,statusMessage:`Cannot find any path matching ${n.path||"/"}.`});t.onAfterResponse&&await t.onAfterResponse(n,void 0)})}function ET(e){return async t=>{let r;for(const n of e){if(n.route==="/"&&!n.handler.__resolve__||!t.startsWith(n.route)||(r=t.slice(n.route.length)||"/",n.match&&!n.match(r,void 0)))continue;let i={route:n.route,handler:n.handler};if(i.handler.__resolve__){const a=await i.handler.__resolve__(r);if(!a)continue;i={...i,...a,route:HE(i.route||"/",a.route||"/")}}return i}}}function qo(e){let t=e.handler;return t.handler&&(t=t.handler),e.lazy?t=RT(t):$d(t)||(t=Ns(t,void 0,e.route)),{route:VE(e.route),match:e.match,handler:t}}function TT(e,t,r){if(t===null)return cT(e);if(t){if(pT(t))return Ld(e,t);if(fT(t))return zd(e,t);if(t.buffer)return xr(e,t);if(t.arrayBuffer&&typeof t.arrayBuffer=="function")return t.arrayBuffer().then(i=>xr(e,Buffer.from(i),t.type));if(t instanceof Error)throw Ve(t);if(typeof t.end=="function")return!0}const n=typeof t;if(n==="string")return xr(e,t,Yn.html);if(n==="object"||n==="boolean"||n==="number")return xr(e,JSON.stringify(t,void 0,r),Yn.json);if(n==="bigint")return xr(e,t.toString(),Yn.json);throw Ve({statusCode:500,statusMessage:`[h3] Cannot send ${n} as response.`})}function CT(e){let t;return()=>(t||(t=e()),t)}function PT(e,t){return{...t.websocket,async resolve(r){var a;const{pathname:n}=QE(r.url||"/"),i=await e(n);return((a=i==null?void 0:i.handler)==null?void 0:a.__websocket__)||{}}}}const AT=["connect","delete","get","head","options","post","put","trace","patch"];function DT(e={}){const t=KE({}),r={};let n;const i={},a=(l,c,d)=>{let f=r[l];if(f||(r[l]=f={path:l,handlers:{}},t.insert(l,f)),Array.isArray(d))for(const m of d)a(l,c,m);else f.handlers[d]=Ns(c,void 0,l);return i};i.use=i.add=(l,c,d)=>a(l,c,d||"all");for(const l of AT)i[l]=(c,d)=>i.add(c,d,l);const o=(l="/",c="get")=>{const d=l.indexOf("?");d!==-1&&(l=l.slice(0,Math.max(0,d)));const f=t.lookup(l);if(!f||!f.handlers)return{error:Ve({statusCode:404,name:"Not Found",statusMessage:`Cannot find any route matching ${l||"/"}.`})};let m=f.handlers[c]||f.handlers.all;if(!m){n||(n=jE(t));const v=n.matchAll(l).reverse();for(const h of v){if(h.handlers[c]){m=h.handlers[c],f.handlers[c]=f.handlers[c]||m;break}if(h.handlers.all){m=h.handlers.all,f.handlers.all=f.handlers.all||m;break}}}return m?{matched:f,handler:m}:{error:Ve({statusCode:405,name:"Method Not Allowed",statusMessage:`Method ${c} is not allowed on this route.`})}},u=e.preemptive||e.preemtive;return i.handler=Ut(l=>{const c=o(l.path,l.method.toLowerCase());if("error"in c){if(u)throw c.error;return}l.context.matchedRoute=c.matched;const d=c.matched.params||{};return l.context.params=d,Promise.resolve(c.handler(l)).then(f=>f===void 0&&u?null:f)}),i.handler.__resolve__=async l=>{l=kE(l);const c=o(l);if("error"in c)return;let d={route:c.matched.path,handler:c.handler};if(c.handler.__resolve__){const f=await c.handler.__resolve__(l);if(!f)return;d={...d,...f}}return d},i}function IT(e){return async function(r,n){const i=gT(r,n);try{await e.handler(i)}catch(a){const o=Ve(a);if(Is(a)||(o.unhandled=!0),e.options.onError&&await e.options.onError(o,i),i.handled)return;(o.unhandled||o.fatal)&&console.error("[h3]",o.fatal?"[fatal]":"[unhandled]",o),await iT(i,o,!!e.options.debug)}}}const Ud={},os={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Ud[e]=t,os[t]=e}function NT(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(n in os)t[r/2]=os[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function xt(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Ud[e[r]];return t}var yc;(function(e){e.HEADER="header",e.QUERY="query"})(yc||(yc={}));var wc;(function(e){e.HEADER="header",e.QUERY="query"})(wc||(wc={}));var bc;(function(e){e.HTTP="http",e.HTTPS="https"})(bc||(bc={}));var Sc;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Sc||(Sc={}));var Rc;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Rc||(Rc={}));var _c;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(_c||(_c={}));var Oc;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Oc||(Oc={}));const Ec=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},Br=e=>encodeURIComponent(e).replace(/[!'()*]/g,FT),FT=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,MT=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",qT=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return Es.Buffer.from(e,t)},ss=e=>{const t=qT(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Hr=e=>typeof e=="string"?ss(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),zT="X-Amz-Algorithm",LT="X-Amz-Credential",xd="X-Amz-Date",$T="X-Amz-SignedHeaders",UT="X-Amz-Expires",Vd="X-Amz-Signature",Gd="X-Amz-Security-Token",Bd="authorization",kd=xd.toLowerCase(),xT="date",VT=[Bd,kd,xT],GT=Vd.toLowerCase(),us="x-amz-content-sha256",BT=Gd.toLowerCase(),kT={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},JT=/^proxy-/,HT=/^sec-/,zo="AWS4-HMAC-SHA256",WT="AWS4-HMAC-SHA256-PAYLOAD",QT="UNSIGNED-PAYLOAD",KT=50,Jd="aws4_request",YT=60*60*24*7,Gn={},Lo=[],$o=(e,t,r)=>`${e}/${t}/${r}/${Jd}`,XT=async(e,t,r,n,i)=>{const a=await Tc(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${i}:${xt(a)}:${t.sessionToken}`;if(o in Gn)return Gn[o];for(Lo.push(o);Lo.length>KT;)delete Gn[Lo.shift()];let u=`AWS4${t.secretAccessKey}`;for(const l of[r,n,i,Jd])u=await Tc(e,u,l);return Gn[o]=u},Tc=(e,t,r)=>{const n=new e(t);return n.update(Hr(r)),n.digest()},Cc=({headers:e},t,r)=>{const n={};for(const i of Object.keys(e).sort()){if(e[i]==null)continue;const a=i.toLowerCase();(a in kT||t!=null&&t.has(a)||JT.test(a)||HT.test(a))&&(!r||r&&!r.has(a))||(n[a]=e[i].trim().replace(/\s+/g," "))}return n},ZT=({query:e={}})=>{const t=[],r={};for(const n of Object.keys(e).sort()){if(n.toLowerCase()===GT)continue;t.push(n);const i=e[n];typeof i=="string"?r[n]=`${Br(n)}=${Br(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).reduce((a,o)=>a.concat([`${Br(n)}=${Br(o)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")},Uo=async({headers:e,body:t},r)=>{for(const n of Object.keys(e))if(n.toLowerCase()===us)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||MT(t)){const n=new r;return n.update(Hr(t)),xt(await n.digest())}return QT};class jT{format(t){const r=[];for(const a of Object.keys(t)){const o=ss(a);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[a]))}const n=new Uint8Array(r.reduce((a,o)=>a+o.byteLength,0));let i=0;for(const a of r)n.set(a,i),i+=a.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":const i=new Uint8Array(9);return i[0]=5,i.set(t.value.bytes,1),i;case"binary":const a=new DataView(new ArrayBuffer(3+t.value.byteLength));a.setUint8(0,6),a.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(a.buffer);return o.set(t.value,3),o;case"string":const u=ss(t.value),l=new DataView(new ArrayBuffer(3+u.byteLength));l.setUint8(0,7),l.setUint16(1,u.byteLength,!1);const c=new Uint8Array(l.buffer);return c.set(u,3),c;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(Fs.fromNumber(t.value.valueOf()).bytes,1),d;case"uuid":if(!eC.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const f=new Uint8Array(17);return f[0]=9,f.set(NT(t.value.replace(/\-/g,"")),1),f}}}var Pc;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Pc||(Pc={}));const eC=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class Fs{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,i=Math.abs(Math.round(t));n>-1&&i>0;n--,i/=256)r[n]=i;return t<0&&Ac(r),new Fs(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&Ac(t),parseInt(xt(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function Ac(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}const tC=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},Hd=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?rC(t):void 0}),rC=e=>Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{}),nC=(e,t={})=>{var i;const{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():Hd(e);for(const a of Object.keys(r)){const o=a.toLowerCase();o.slice(0,6)==="x-amz-"&&!((i=t.unhoistableHeaders)!=null&&i.has(o))&&(n[a]=r[a],delete r[a])}return{...e,headers:r,query:n}},Dc=e=>{e=typeof e.clone=="function"?e.clone():Hd(e);for(const t of Object.keys(e.headers))VT.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},iC=e=>aC(e).toISOString().replace(/\.\d{3}Z$/,"Z"),aC=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class oC{constructor({applyChecksum:t,credentials:r,region:n,service:i,sha256:a,uriEscapePath:o=!0}){this.headerFormatter=new jT,this.service=i,this.sha256=a,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Ec(n),this.credentialProvider=Ec(r)}async presign(t,r={}){const{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:a,unhoistableHeaders:o,signableHeaders:u,signingRegion:l,signingService:c}=r,d=await this.credentialProvider();this.validateResolvedCredentials(d);const f=l??await this.regionProvider(),{longDate:m,shortDate:v}=Bn(n);if(i>YT)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const h=$o(v,f,c??this.service),y=nC(Dc(t),{unhoistableHeaders:o});d.sessionToken&&(y.query[Gd]=d.sessionToken),y.query[zT]=zo,y.query[LT]=`${d.accessKeyId}/${h}`,y.query[xd]=m,y.query[UT]=i.toString(10);const _=Cc(y,a,u);return y.query[$T]=Ic(_),y.query[Vd]=await this.getSignature(m,h,this.getSigningKey(d,f,v,c),this.createCanonicalRequest(y,_,await Uo(t,this.sha256))),y}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:i,signingRegion:a,signingService:o}){const u=a??await this.regionProvider(),{shortDate:l,longDate:c}=Bn(n),d=$o(l,u,o??this.service),f=await Uo({headers:{},body:r},this.sha256),m=new this.sha256;m.update(t);const v=xt(await m.digest()),h=[WT,c,d,i,v,f].join(`
`);return this.signString(h,{signingDate:n,signingRegion:u,signingService:o})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:i,priorSignature:t.priorSignature}).then(o=>({message:t.message,signature:o}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:i}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const o=n??await this.regionProvider(),{shortDate:u}=Bn(r),l=new this.sha256(await this.getSigningKey(a,o,u,i));return l.update(Hr(t)),xt(await l.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:a,signingService:o}={}){const u=await this.credentialProvider();this.validateResolvedCredentials(u);const l=a??await this.regionProvider(),c=Dc(t),{longDate:d,shortDate:f}=Bn(r),m=$o(f,l,o??this.service);c.headers[kd]=d,u.sessionToken&&(c.headers[BT]=u.sessionToken);const v=await Uo(c,this.sha256);!tC(us,c.headers)&&this.applyChecksum&&(c.headers[us]=v);const h=Cc(c,i,n),y=await this.getSignature(d,m,this.getSigningKey(u,l,f,o),this.createCanonicalRequest(c,h,v));return c.headers[Bd]=`${zo} Credential=${u.accessKeyId}/${m}, SignedHeaders=${Ic(h)}, Signature=${y}`,c}createCanonicalRequest(t,r,n){const i=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${ZT(t)}
${i.map(a=>`${a}:${r[a]}`).join(`
`)}

${i.join(";")}
${n}`}async createStringToSign(t,r,n){const i=new this.sha256;i.update(Hr(n));const a=await i.digest();return`${zo}
${t}
${r}
${xt(a)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const r=[];for(const a of t.split("/"))(a==null?void 0:a.length)!==0&&a!=="."&&(a===".."?r.pop():r.push(a));const n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return Br(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,i){const a=await this.createStringToSign(t,r,i),o=new this.sha256(await n);return o.update(Hr(a)),xt(await o.digest())}getSigningKey(t,r,n,i){return XT(this.sha256,t,n,r,i||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const Bn=e=>{const t=iC(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Ic=e=>Object.keys(e).sort().join(";");function sC(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(u,l)}c((n=n.apply(e,t||[])).next())})}function uC(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Me=64,cC=32,lC=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dC=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],fC=Math.pow(2,53)-1,Xn=function(){function e(){this.state=Int32Array.from(dC),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=t.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>fC)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=t[r++],n--,this.bufferLength===Me&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%Me>=Me-8){for(var i=this.bufferLength;i<Me;i++)r.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<Me-8;i++)r.setUint8(i,0);r.setUint32(Me-8,Math.floor(t/4294967296),!0),r.setUint32(Me-4,t),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(cC),i=0;i<8;i++)a[i*4]=this.state[i]>>>24&255,a[i*4+1]=this.state[i]>>>16&255,a[i*4+2]=this.state[i]>>>8&255,a[i*4+3]=this.state[i]>>>0&255;return a},e.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,n=t.state,i=n[0],a=n[1],o=n[2],u=n[3],l=n[4],c=n[5],d=n[6],f=n[7],m=0;m<Me;m++){if(m<16)this.temp[m]=(r[m*4]&255)<<24|(r[m*4+1]&255)<<16|(r[m*4+2]&255)<<8|r[m*4+3]&255;else{var v=this.temp[m-2],h=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[m-15];var y=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[m]=(h+this.temp[m-7]|0)+(y+this.temp[m-16]|0)}var _=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&c^~l&d)|0)+(f+(lC[m]+this.temp[m]|0)|0)|0,O=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&a^i&o^a&o)|0;f=d,d=c,c=l,l=u+_|0,u=o,o=a,a=i,i=_+O|0}n[0]+=i,n[1]+=a,n[2]+=o,n[3]+=u,n[4]+=l,n[5]+=c,n[6]+=d,n[7]+=f},e}();const pC=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return Es.Buffer.from(e,t)},mC=e=>{const t=pC(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var vC=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:mC;function Wd(e){return e instanceof Uint8Array?e:typeof e=="string"?vC(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function hC(e){return typeof e=="string"?e.length===0:e.byteLength===0}var gC=function(){function e(t){this.secret=t,this.hash=new Xn,this.reset()}return e.prototype.update=function(t){if(!(hC(t)||this.error))try{this.hash.update(Wd(t))}catch(r){this.error=r}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return sC(this,void 0,void 0,function(){return uC(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new Xn,this.secret){this.outer=new Xn;var t=yC(this.secret),r=new Uint8Array(Me);r.set(t);for(var n=0;n<Me;n++)t[n]^=54,r[n]^=92;this.hash.update(t),this.outer.update(r);for(var n=0;n<t.byteLength;n++)t[n]=0}},e}();function yC(e){var t=Wd(e);if(t.byteLength>Me){var r=new Xn;r.update(t),t=r.digest()}var n=new Uint8Array(Me);return n.set(t),n}class Ms{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;const r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){const t=new Ms({...this,headers:{...this.headers}});return t.query&&(t.query=wC(t.query)),t}}function wC(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}const bC="https://fab.solarnative.cloud/v1",SC="execute-api",RC="eu-central-1",_C=6e3,OC=!1,EC="nvs/nvs.csv",gr="print",TC="ProductLabelIG-v5.prn",CC="ProductLabelPS-v7.prn",PC="ProductBox-1PK-v6.prn",AC="ProductBox-2PK-v6.prn",DC="ProductBoxWiFi-v4.prn",IC="LogisticsBox-v5.prn",NC="https://device.solarnative.cloud/v1/gateway/data",FC="https://device.solarnative.cloud/v1/gateway/data",MC="https://ota.solarnative.cloud",qC="https://ota-fallback.solarnative.cloud",zC="",LC="",yt="33CK32MC103",Gt="storage",Nc={bin:"./tools/esptool-v4.5.1-win64/esptool.exe",baud:"115200",stages:[{stage:te.BOOTLOADER,fileTypeId:1,enabled:!0,verify:!0,address:"0x0000"},{stage:te.PARTITION,fileTypeId:2,enabled:!0,verify:!0,address:"0xD000"},{stage:te.STORAGE,fileTypeId:5,enabled:!0,verify:!0,address:"0xE000",filename:"storage.bin"},{stage:te.OTA,fileTypeId:3,enabled:!0,verify:!0,address:"0x1D000"},{stage:te.KEY,enabled:!0,verify:!0,address:"0x3E000",filename:"key.bin"},{stage:te.APP,fileTypeId:4,enabled:!0,verify:!0,address:"0x40000"}]},ct={flash:{esp32c3:Nc,esp32s3:Nc,microchip:{bin:"C:\\Program Files\\Microchip\\MPLABX\\v6.15\\mplab_platform\\mplab_ipe\\ipecmd.exe",voltage:"3.25",stages:[{stage:te.STORAGE,enabled:!0,verify:!1,address:"0x0000",filename:"otp.num"},{stage:te.APP,fileTypeId:6,enabled:!0,verify:!0,address:"0x0000"}]}}};function $C(e){return async function(r,n){return await new Promise((a,o)=>{const{port1:u,port2:l}=new _e.MessageChannelMain,c=setTimeout(()=>{o(new Error(`Timeout on ipc ch${r} `))},_C);l.postMessage(n),l.on("message",({data:d})=>{l.close(),clearTimeout(c),a(d)}),l.start(),e.webContents.postMessage(r,n,[u])})}}function Fc(e){console.error("API",e);const r=e instanceof Error?e.message:"Unknown error. Check logs.";switch(r){case"Unauthorized":return Ve({statusCode:401,statusMessage:r});default:return Ve({statusCode:500,statusMessage:r})}}let kn=null;function Qd(e){if(kn!==null)return kn;const t=$C(e);async function r(){return await t(Xr.CREDENTIALS_FROM_RENDER)}async function n(d,f,m){const v=await r(),h=new URL(f),y=new Ms({hostname:h.hostname,path:h.pathname+h.search,method:d,body:m,headers:{host:h.hostname,"Content-Type":"application/json"}});return await new oC({credentials:v,region:RC,service:SC,sha256:gC}).sign(y)}async function i(d,f,m){try{const v=bC+f,{headers:h,body:y}=await n(d,v,m!==void 0?JSON.stringify(m):void 0);return await(await fetch(v,{method:d,headers:h,body:y})).json()}catch(v){return Fc(v)}}function a(d){if(d!=null)return typeof d=="string"?d:JSON.stringify(d)}const o={pre:async d=>{const{headers:f}=await n(d.init.method??"GET",d.url,a(d.init.body));return d.init.headers={...f},d}},u={onError:async d=>{const f=Fc(d.error);return console.error(f),d.response}},l=new Rd({middleware:[o,u]});return kn={api:new FE(l),request:i,ipcFetchFromWindow:t},kn}const Mc={foo:"bar"},UC="<style>body{font-family:Arial,Helvetica,sans-serif;font-size:xx-large;}</style>",qc=`<!doctype html><html lang=en><head><meta charset=utf-8><title>API</title>${UC}</head><body><h1>`;function xC(e){const t=_T(),r=DT(),{request:n,ipcFetchFromWindow:i}=Qd(e);return t.use(Ut(async a=>{const o=oT(a,"Authorization")??" ",[u,l]=o.split(" ");if(a.node.res.setHeader("Content-Type","application/json"),!(u==="Bearer"))return Ve({statusCode:400,statusMessage:"Bad Request"});const d=await i(Xr.API_KEYS_FROM_RENDER);if(!(o!==void 0&&d.map(m=>m.key).includes(l)))return Ve({statusCode:401,statusMessage:"Unauthorized"})})),r.get("/",Ut(()=>`${qc}  ${Mc.foo}`)),r.get("/set/:value",Ut(a=>{var u;const o=((u=a.context.params)==null?void 0:u.value)??"";return Mc.foo=o,`${qc} Received: ${o} `})),t.use(r),t.use(Ut(async a=>{const o=a.node.req.method,u=a.path;if(o!==void 0){if(o==="POST"){const l=a.node.req.read();if(l!==null){const c=JSON.parse(l.toString());return await n(o,u,c)}}return await n(o,u)}})),IT(t)}function VC(e){const t=xC(e);return $b.createServer(t).listen(3001)}var g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var le={},ie={},_r={},re={};Object.defineProperty(re,"__esModule",{value:!0});re.isFunction=void 0;function BC(e){return typeof e=="function"}re.isFunction=BC;var pe={},Zr={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.createErrorClass=void 0;function kC(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}je.createErrorClass=kC;Object.defineProperty(Zr,"__esModule",{value:!0});Zr.UnsubscriptionError=void 0;var JC=je;Zr.UnsubscriptionError=JC.createErrorClass(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.arrRemove=void 0;function HC(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}Be.arrRemove=HC;var zc=g&&g.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Lc=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},$c=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(pe,"__esModule",{value:!0});pe.isSubscription=pe.EMPTY_SUBSCRIPTION=pe.Subscription=void 0;var Wr=re,xo=Zr,Uc=Be,qs=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,i,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var u=zc(o),l=u.next();!l.done;l=u.next()){var c=l.value;c.remove(this)}}catch(y){t={error:y}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}else o.remove(this);var d=this.initialTeardown;if(Wr.isFunction(d))try{d()}catch(y){a=y instanceof xo.UnsubscriptionError?y.errors:[y]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var m=zc(f),v=m.next();!v.done;v=m.next()){var h=v.value;try{xc(h)}catch(y){a=a??[],y instanceof xo.UnsubscriptionError?a=$c($c([],Lc(a)),Lc(y.errors)):a.push(y)}}}catch(y){n={error:y}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(n)throw n.error}}}if(a)throw new xo.UnsubscriptionError(a)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)xc(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Uc.arrRemove(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&Uc.arrRemove(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();pe.Subscription=qs;pe.EMPTY_SUBSCRIPTION=qs.EMPTY;function WC(e){return e instanceof qs||e&&"closed"in e&&Wr.isFunction(e.remove)&&Wr.isFunction(e.add)&&Wr.isFunction(e.unsubscribe)}pe.isSubscription=WC;function xc(e){Wr.isFunction(e)?e():e.unsubscribe()}var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.config=void 0;Pt.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var jr={},zs={};(function(e){var t=g&&g.__read||function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var o=a.call(n),u,l=[],c;try{for(;(i===void 0||i-- >0)&&!(u=o.next()).done;)l.push(u.value)}catch(d){c={error:d}}finally{try{u&&!u.done&&(a=o.return)&&a.call(o)}finally{if(c)throw c.error}}return l},r=g&&g.__spreadArray||function(n,i){for(var a=0,o=i.length,u=n.length;a<o;a++,u++)n[u]=i[a];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,i){for(var a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];var u=e.timeoutProvider.delegate;return u!=null&&u.setTimeout?u.setTimeout.apply(u,r([n,i],t(a))):setTimeout.apply(void 0,r([n,i],t(a)))},clearTimeout:function(n){var i=e.timeoutProvider.delegate;return((i==null?void 0:i.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(zs);Object.defineProperty(jr,"__esModule",{value:!0});jr.reportUnhandledError=void 0;var QC=Pt,KC=zs;function YC(e){KC.timeoutProvider.setTimeout(function(){var t=QC.config.onUnhandledError;if(t)t(e);else throw e})}jr.reportUnhandledError=YC;var me={};Object.defineProperty(me,"__esModule",{value:!0});me.noop=void 0;function XC(){}me.noop=XC;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createNotification=Ke.nextNotification=Ke.errorNotification=Ke.COMPLETE_NOTIFICATION=void 0;Ke.COMPLETE_NOTIFICATION=function(){return ci("C",void 0,void 0)}();function ZC(e){return ci("E",void 0,e)}Ke.errorNotification=ZC;function jC(e){return ci("N",e,void 0)}Ke.nextNotification=jC;function ci(e,t,r){return{kind:e,value:t,error:r}}Ke.createNotification=ci;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.captureError=Ot.errorContext=void 0;var Kd=Pt,Vt=null;function eP(e){if(Kd.config.useDeprecatedSynchronousErrorHandling){var t=!Vt;if(t&&(Vt={errorThrown:!1,error:null}),e(),t){var r=Vt,n=r.errorThrown,i=r.error;if(Vt=null,n)throw i}}else e()}Ot.errorContext=eP;function tP(e){Kd.config.useDeprecatedSynchronousErrorHandling&&Vt&&(Vt.errorThrown=!0,Vt.error=e)}Ot.captureError=tP;(function(e){var t=g&&g.__extends||function(){var P=function(C,b){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(T[A]=S[A])},P(C,b)};return function(C,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");P(C,b);function T(){this.constructor=C}C.prototype=b===null?Object.create(b):(T.prototype=b.prototype,new T)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var r=re,n=pe,i=Pt,a=jr,o=me,u=Ke,l=zs,c=Ot,d=function(P){t(C,P);function C(b){var T=P.call(this)||this;return T.isStopped=!1,b?(T.destination=b,n.isSubscription(b)&&b.add(T)):T.destination=e.EMPTY_OBSERVER,T}return C.create=function(b,T,S){return new h(b,T,S)},C.prototype.next=function(b){this.isStopped?O(u.nextNotification(b),this):this._next(b)},C.prototype.error=function(b){this.isStopped?O(u.errorNotification(b),this):(this.isStopped=!0,this._error(b))},C.prototype.complete=function(){this.isStopped?O(u.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},C.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,P.prototype.unsubscribe.call(this),this.destination=null)},C.prototype._next=function(b){this.destination.next(b)},C.prototype._error=function(b){try{this.destination.error(b)}finally{this.unsubscribe()}},C.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},C}(n.Subscription);e.Subscriber=d;var f=Function.prototype.bind;function m(P,C){return f.call(P,C)}var v=function(){function P(C){this.partialObserver=C}return P.prototype.next=function(C){var b=this.partialObserver;if(b.next)try{b.next(C)}catch(T){y(T)}},P.prototype.error=function(C){var b=this.partialObserver;if(b.error)try{b.error(C)}catch(T){y(T)}else y(C)},P.prototype.complete=function(){var C=this.partialObserver;if(C.complete)try{C.complete()}catch(b){y(b)}},P}(),h=function(P){t(C,P);function C(b,T,S){var A=P.call(this)||this,F;if(r.isFunction(b)||!b)F={next:b??void 0,error:T??void 0,complete:S??void 0};else{var I;A&&i.config.useDeprecatedNextContext?(I=Object.create(b),I.unsubscribe=function(){return A.unsubscribe()},F={next:b.next&&m(b.next,I),error:b.error&&m(b.error,I),complete:b.complete&&m(b.complete,I)}):F=b}return A.destination=new v(F),A}return C}(d);e.SafeSubscriber=h;function y(P){i.config.useDeprecatedSynchronousErrorHandling?c.captureError(P):a.reportUnhandledError(P)}function _(P){throw P}function O(P,C){var b=i.config.onStoppedNotification;b&&l.timeoutProvider.setTimeout(function(){return b(P,C)})}e.EMPTY_OBSERVER={closed:!0,next:o.noop,error:_,complete:o.noop}})(_r);var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.observable=void 0;Yt.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var lt={},ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.identity=void 0;function rP(e){return e}ve.identity=rP;Object.defineProperty(lt,"__esModule",{value:!0});lt.pipeFromArray=lt.pipe=void 0;var nP=ve;function iP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yd(e)}lt.pipe=iP;function Yd(e){return e.length===0?nP.identity:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}lt.pipeFromArray=Yd;Object.defineProperty(ie,"__esModule",{value:!0});ie.Observable=void 0;var cs=_r,aP=pe,oP=Yt,sP=lt,uP=Pt,Vo=re,cP=Ot,lP=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this,a=fP(t)?t:new cs.SafeSubscriber(t,r,n);return cP.errorContext(function(){var o=i,u=o.operator,l=o.source;a.add(u?u.call(a,l):l?i._subscribe(a):i._trySubscribe(a))}),a},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=Vc(r),new r(function(i,a){var o=new cs.SafeSubscriber({next:function(u){try{t(u)}catch(l){a(l),o.unsubscribe()}},error:a,complete:i});n.subscribe(o)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[oP.observable]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return sP.pipeFromArray(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=Vc(t),new t(function(n,i){var a;r.subscribe(function(o){return a=o},function(o){return i(o)},function(){return n(a)})})},e.create=function(t){return new e(t)},e}();ie.Observable=lP;function Vc(e){var t;return(t=e??uP.config.Promise)!==null&&t!==void 0?t:Promise}function dP(e){return e&&Vo.isFunction(e.next)&&Vo.isFunction(e.error)&&Vo.isFunction(e.complete)}function fP(e){return e&&e instanceof cs.Subscriber||dP(e)&&aP.isSubscription(e)}var Xt={},en={},q={};Object.defineProperty(q,"__esModule",{value:!0});q.operate=q.hasLift=void 0;var pP=re;function Xd(e){return pP.isFunction(e==null?void 0:e.lift)}q.hasLift=Xd;function mP(e){return function(t){if(Xd(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}q.operate=mP;var V={},vP=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(V,"__esModule",{value:!0});V.OperatorSubscriber=V.createOperatorSubscriber=void 0;var hP=_r;function gP(e,t,r,n,i){return new Zd(e,t,r,n,i)}V.createOperatorSubscriber=gP;var Zd=function(e){vP(t,e);function t(r,n,i,a,o,u){var l=e.call(this,r)||this;return l.onFinalize=o,l.shouldUnsubscribe=u,l._next=n?function(c){try{n(c)}catch(d){r.error(d)}}:e.prototype._next,l._error=a?function(c){try{a(c)}catch(d){r.error(d)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(c){r.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(hP.Subscriber);V.OperatorSubscriber=Zd;Object.defineProperty(en,"__esModule",{value:!0});en.refCount=void 0;var yP=q,wP=V;function bP(){return yP.operate(function(e,t){var r=null;e._refCount++;var n=wP.createOperatorSubscriber(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){r=null;return}var i=e._connection,a=r;r=null,i&&(!a||i===a)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(n),n.closed||(r=e.connect())})}en.refCount=bP;var SP=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Xt,"__esModule",{value:!0});Xt.ConnectableObservable=void 0;var RP=ie,Gc=pe,_P=en,OP=V,EP=q,TP=function(e){SP(t,e);function t(r,n){var i=e.call(this)||this;return i.source=r,i.subjectFactory=n,i._subject=null,i._refCount=0,i._connection=null,EP.hasLift(r)&&(i.lift=r.lift),i}return t.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},t.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var r=this._connection;this._subject=this._connection=null,r==null||r.unsubscribe()},t.prototype.connect=function(){var r=this,n=this._connection;if(!n){n=this._connection=new Gc.Subscription;var i=this.getSubject();n.add(this.source.subscribe(OP.createOperatorSubscriber(i,void 0,function(){r._teardown(),i.complete()},function(a){r._teardown(),i.error(a)},function(){return r._teardown()}))),n.closed&&(this._connection=null,n=Gc.Subscription.EMPTY)}return n},t.prototype.refCount=function(){return _P.refCount()(this)},t}(RP.Observable);Xt.ConnectableObservable=TP;var li={},jd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(jd);var Ls={};(function(e){var t=g&&g.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var u=o.call(i),l,c=[],d;try{for(;(a===void 0||a-- >0)&&!(l=u.next()).done;)c.push(l.value)}catch(f){d={error:f}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(d)throw d.error}}return c},r=g&&g.__spreadArray||function(i,a){for(var o=0,u=a.length,l=i.length;o<u;o++,l++)i[l]=a[o];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=pe;e.animationFrameProvider={schedule:function(i){var a=requestAnimationFrame,o=cancelAnimationFrame,u=e.animationFrameProvider.delegate;u&&(a=u.requestAnimationFrame,o=u.cancelAnimationFrame);var l=a(function(c){o=void 0,i(c)});return new n.Subscription(function(){return o==null?void 0:o(l)})},requestAnimationFrame:function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e.animationFrameProvider.delegate;return((o==null?void 0:o.requestAnimationFrame)||requestAnimationFrame).apply(void 0,r([],t(i)))},cancelAnimationFrame:function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e.animationFrameProvider.delegate;return((o==null?void 0:o.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,r([],t(i)))},delegate:void 0}})(Ls);Object.defineProperty(li,"__esModule",{value:!0});li.animationFrames=void 0;var CP=ie,PP=jd,Bc=Ls;function AP(e){return e?ef(e):DP}li.animationFrames=AP;function ef(e){return new CP.Observable(function(t){var r=e||PP.performanceTimestampProvider,n=r.now(),i=0,a=function(){t.closed||(i=Bc.animationFrameProvider.requestAnimationFrame(function(o){i=0;var u=r.now();t.next({timestamp:e?u:o,elapsed:u-n}),a()}))};return a(),function(){i&&Bc.animationFrameProvider.cancelAnimationFrame(i)}})}var DP=ef(),de={},tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.ObjectUnsubscribedError=void 0;var IP=je;tn.ObjectUnsubscribedError=IP.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var tf=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NP=g&&g.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(de,"__esModule",{value:!0});de.AnonymousSubject=de.Subject=void 0;var kc=ie,ls=pe,FP=tn,MP=Be,Go=Ot,rf=function(e){tf(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new ds(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new FP.ObjectUnsubscribedError},t.prototype.next=function(r){var n=this;Go.errorContext(function(){var i,a;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var o=NP(n.currentObservers),u=o.next();!u.done;u=o.next()){var l=u.value;l.next(r)}}catch(c){i={error:c}}finally{try{u&&!u.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}})},t.prototype.error=function(r){var n=this;Go.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},t.prototype.complete=function(){var r=this;Go.errorContext(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,i=this,a=i.hasError,o=i.isStopped,u=i.observers;return a||o?ls.EMPTY_SUBSCRIPTION:(this.currentObservers=null,u.push(r),new ls.Subscription(function(){n.currentObservers=null,MP.arrRemove(u,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,a=n.thrownError,o=n.isStopped;i?r.error(a):o&&r.complete()},t.prototype.asObservable=function(){var r=new kc.Observable;return r.source=this,r},t.create=function(r,n){return new ds(r,n)},t}(kc.Observable);de.Subject=rf;var ds=function(e){tf(t,e);function t(r,n){var i=e.call(this)||this;return i.destination=r,i.source=n,i}return t.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},t.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:ls.EMPTY_SUBSCRIPTION},t}(rf);de.AnonymousSubject=ds;var rn={},qP=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(rn,"__esModule",{value:!0});rn.BehaviorSubject=void 0;var zP=de,LP=function(e){qP(t,e);function t(r){var n=e.call(this)||this;return n._value=r,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(r){var n=e.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},t.prototype.getValue=function(){var r=this,n=r.hasError,i=r.thrownError,a=r._value;if(n)throw i;return this._throwIfClosed(),a},t.prototype.next=function(r){e.prototype.next.call(this,this._value=r)},t}(zP.Subject);rn.BehaviorSubject=LP;var Or={},di={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(di);var $P=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Or,"__esModule",{value:!0});Or.ReplaySubject=void 0;var UP=de,xP=di,VP=function(e){$P(t,e);function t(r,n,i){r===void 0&&(r=1/0),n===void 0&&(n=1/0),i===void 0&&(i=xP.dateTimestampProvider);var a=e.call(this)||this;return a._bufferSize=r,a._windowTime=n,a._timestampProvider=i,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=n===1/0,a._bufferSize=Math.max(1,r),a._windowTime=Math.max(1,n),a}return t.prototype.next=function(r){var n=this,i=n.isStopped,a=n._buffer,o=n._infiniteTimeWindow,u=n._timestampProvider,l=n._windowTime;i||(a.push(r),!o&&a.push(u.now()+l)),this._trimBuffer(),e.prototype.next.call(this,r)},t.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),i=this,a=i._infiniteTimeWindow,o=i._buffer,u=o.slice(),l=0;l<u.length&&!r.closed;l+=a?1:2)r.next(u[l]);return this._checkFinalizedStatuses(r),n},t.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,i=r._timestampProvider,a=r._buffer,o=r._infiniteTimeWindow,u=(o?1:2)*n;if(n<1/0&&u<a.length&&a.splice(0,a.length-u),!o){for(var l=i.now(),c=0,d=1;d<a.length&&a[d]<=l;d+=2)c=d;c&&a.splice(0,c+1)}},t}(UP.Subject);Or.ReplaySubject=VP;var Er={},GP=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Er,"__esModule",{value:!0});Er.AsyncSubject=void 0;var BP=de,kP=function(e){GP(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._value=null,r._hasValue=!1,r._isComplete=!1,r}return t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,a=n._hasValue,o=n._value,u=n.thrownError,l=n.isStopped,c=n._isComplete;i?r.error(u):(l||c)&&(a&&r.next(o),r.complete())},t.prototype.next=function(r){this.isStopped||(this._value=r,this._hasValue=!0)},t.prototype.complete=function(){var r=this,n=r._hasValue,i=r._value,a=r._isComplete;a||(this._isComplete=!0,n&&e.prototype.next.call(this,i),e.prototype.complete.call(this))},t}(BP.Subject);Er.AsyncSubject=kP;var nf={},fi={},At={},pi={},JP=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(pi,"__esModule",{value:!0});pi.Action=void 0;var HP=pe,WP=function(e){JP(t,e);function t(r,n){return e.call(this)||this}return t.prototype.schedule=function(r,n){return this},t}(HP.Subscription);pi.Action=WP;var af={};(function(e){var t=g&&g.__read||function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var o=a.call(n),u,l=[],c;try{for(;(i===void 0||i-- >0)&&!(u=o.next()).done;)l.push(u.value)}catch(d){c={error:d}}finally{try{u&&!u.done&&(a=o.return)&&a.call(o)}finally{if(c)throw c.error}}return l},r=g&&g.__spreadArray||function(n,i){for(var a=0,o=i.length,u=n.length;a<o;a++,u++)n[u]=i[a];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,i){for(var a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];var u=e.intervalProvider.delegate;return u!=null&&u.setInterval?u.setInterval.apply(u,r([n,i],t(a))):setInterval.apply(void 0,r([n,i],t(a)))},clearInterval:function(n){var i=e.intervalProvider.delegate;return((i==null?void 0:i.clearInterval)||clearInterval)(n)},delegate:void 0}})(af);var QP=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(At,"__esModule",{value:!0});At.AsyncAction=void 0;var KP=pi,Jc=af,YP=Be,XP=function(e){QP(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(r,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var a=this.id,o=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(o,a,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),Jc.intervalProvider.setInterval(r.flush.bind(r,this),i)},t.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Jc.intervalProvider.clearInterval(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var i=!1,a;try{this.work(r)}catch(o){i=!0,a=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),a},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,a=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,YP.arrRemove(a,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(KP.Action);At.AsyncAction=XP;var of={},yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.TestTools=yr.Immediate=void 0;var ZP=1,Bo,jn={};function Hc(e){return e in jn?(delete jn[e],!0):!1}yr.Immediate={setImmediate:function(e){var t=ZP++;return jn[t]=!0,Bo||(Bo=Promise.resolve()),Bo.then(function(){return Hc(t)&&e()}),t},clearImmediate:function(e){Hc(e)}};yr.TestTools={pending:function(){return Object.keys(jn).length}};(function(e){var t=g&&g.__read||function(o,u){var l=typeof Symbol=="function"&&o[Symbol.iterator];if(!l)return o;var c=l.call(o),d,f=[],m;try{for(;(u===void 0||u-- >0)&&!(d=c.next()).done;)f.push(d.value)}catch(v){m={error:v}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(m)throw m.error}}return f},r=g&&g.__spreadArray||function(o,u){for(var l=0,c=u.length,d=o.length;l<c;l++,d++)o[d]=u[l];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=yr,i=n.Immediate.setImmediate,a=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];var l=e.immediateProvider.delegate;return((l==null?void 0:l.setImmediate)||i).apply(void 0,r([],t(o)))},clearImmediate:function(o){var u=e.immediateProvider.delegate;return((u==null?void 0:u.clearImmediate)||a)(o)},delegate:void 0}})(of);var jP=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(fi,"__esModule",{value:!0});fi.AsapAction=void 0;var eA=At,Wc=of,tA=function(e){jP(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=Wc.immediateProvider.setImmediate(r.flush.bind(r,void 0))))},t.prototype.recycleAsyncId=function(r,n,i){var a;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,r,n,i);var o=r.actions;n!=null&&((a=o[o.length-1])===null||a===void 0?void 0:a.id)!==n&&(Wc.immediateProvider.clearImmediate(n),r._scheduled===n&&(r._scheduled=void 0))},t}(eA.AsyncAction);fi.AsapAction=tA;var mi={},Dt={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.Scheduler=void 0;var rA=di,nA=function(){function e(t,r){r===void 0&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(n,r)},e.now=rA.dateTimestampProvider.now,e}();nn.Scheduler=nA;var iA=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Dt,"__esModule",{value:!0});Dt.AsyncScheduler=void 0;var Qc=nn,aA=function(e){iA(t,e);function t(r,n){n===void 0&&(n=Qc.Scheduler.now);var i=e.call(this,r,n)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},t}(Qc.Scheduler);Dt.AsyncScheduler=aA;var oA=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(mi,"__esModule",{value:!0});mi.AsapScheduler=void 0;var sA=Dt,uA=function(e){oA(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(r){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,a;r=r||i.shift();do if(a=r.execute(r.state,r.delay))break;while((r=i[0])&&r.id===n&&i.shift());if(this._active=!1,a){for(;(r=i[0])&&r.id===n&&i.shift();)r.unsubscribe();throw a}},t}(sA.AsyncScheduler);mi.AsapScheduler=uA;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var t=fi,r=mi;e.asapScheduler=new r.AsapScheduler(t.AsapAction),e.asap=e.asapScheduler})(nf);var Ie={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var t=At,r=Dt;e.asyncScheduler=new r.AsyncScheduler(t.AsyncAction),e.async=e.asyncScheduler})(Ie);var sf={},vi={},cA=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(vi,"__esModule",{value:!0});vi.QueueAction=void 0;var lA=At,dA=function(e){cA(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},t.prototype.execute=function(r,n){return n>0||this.closed?e.prototype.execute.call(this,r,n):this._execute(r,n)},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.flush(this),0)},t}(lA.AsyncAction);vi.QueueAction=dA;var hi={},fA=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(hi,"__esModule",{value:!0});hi.QueueScheduler=void 0;var pA=Dt,mA=function(e){fA(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(pA.AsyncScheduler);hi.QueueScheduler=mA;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var t=vi,r=hi;e.queueScheduler=new r.QueueScheduler(t.QueueAction),e.queue=e.queueScheduler})(sf);var uf={},gi={},vA=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(gi,"__esModule",{value:!0});gi.AnimationFrameAction=void 0;var hA=At,Kc=Ls,gA=function(e){vA(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=Kc.animationFrameProvider.requestAnimationFrame(function(){return r.flush(void 0)})))},t.prototype.recycleAsyncId=function(r,n,i){var a;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,r,n,i);var o=r.actions;n!=null&&((a=o[o.length-1])===null||a===void 0?void 0:a.id)!==n&&(Kc.animationFrameProvider.cancelAnimationFrame(n),r._scheduled=void 0)},t}(hA.AsyncAction);gi.AnimationFrameAction=gA;var yi={},yA=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(yi,"__esModule",{value:!0});yi.AnimationFrameScheduler=void 0;var wA=Dt,bA=function(e){yA(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(r){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,a;r=r||i.shift();do if(a=r.execute(r.state,r.delay))break;while((r=i[0])&&r.id===n&&i.shift());if(this._active=!1,a){for(;(r=i[0])&&r.id===n&&i.shift();)r.unsubscribe();throw a}},t}(wA.AsyncScheduler);yi.AnimationFrameScheduler=bA;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var t=gi,r=yi;e.animationFrameScheduler=new r.AnimationFrameScheduler(t.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(uf);var wr={},cf=g&&g.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(wr,"__esModule",{value:!0});wr.VirtualAction=wr.VirtualTimeScheduler=void 0;var SA=At,RA=pe,_A=Dt,OA=function(e){cf(t,e);function t(r,n){r===void 0&&(r=lf),n===void 0&&(n=1/0);var i=e.call(this,r,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return t.prototype.flush=function(){for(var r=this,n=r.actions,i=r.maxFrames,a,o;(o=n[0])&&o.delay<=i&&(n.shift(),this.frame=o.delay,!(a=o.execute(o.state,o.delay))););if(a){for(;o=n.shift();)o.unsubscribe();throw a}},t.frameTimeFactor=10,t}(_A.AsyncScheduler);wr.VirtualTimeScheduler=OA;var lf=function(e){cf(t,e);function t(r,n,i){i===void 0&&(i=r.index+=1);var a=e.call(this,r,n)||this;return a.scheduler=r,a.work=n,a.index=i,a.active=!0,a.index=r.index=i,a}return t.prototype.schedule=function(r,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)}else return RA.Subscription.EMPTY},t.prototype.requestAsyncId=function(r,n,i){i===void 0&&(i=0),this.delay=r.frame+i;var a=r.actions;return a.push(this),a.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(r,n,i){},t.prototype._execute=function(r,n){if(this.active===!0)return e.prototype._execute.call(this,r,n)},t.sortActions=function(r,n){return r.delay===n.delay?r.index===n.index?0:r.index>n.index?1:-1:r.delay>n.delay?1:-1},t}(SA.AsyncAction);wr.VirtualAction=lf;var wi={},Ge={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var t=ie;e.EMPTY=new t.Observable(function(i){return i.complete()});function r(i){return i?n(i):e.EMPTY}e.empty=r;function n(i){return new t.Observable(function(a){return i.schedule(function(){return a.complete()})})}})(Ge);var Tr={},fe={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.isScheduler=void 0;var EA=re;function TA(e){return e&&EA.isFunction(e.schedule)}Zt.isScheduler=TA;Object.defineProperty(fe,"__esModule",{value:!0});fe.popNumber=fe.popScheduler=fe.popResultSelector=void 0;var CA=re,PA=Zt;function $s(e){return e[e.length-1]}function AA(e){return CA.isFunction($s(e))?e.pop():void 0}fe.popResultSelector=AA;function DA(e){return PA.isScheduler($s(e))?e.pop():void 0}fe.popScheduler=DA;function IA(e,t){return typeof $s(e)=="number"?e.pop():t}fe.popNumber=IA;var ke={},an={},bi={},k={},Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.isArrayLike=void 0;Cr.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var on={};Object.defineProperty(on,"__esModule",{value:!0});on.isPromise=void 0;var NA=re;function FA(e){return NA.isFunction(e==null?void 0:e.then)}on.isPromise=FA;var sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.isInteropObservable=void 0;var MA=Yt,qA=re;function zA(e){return qA.isFunction(e[MA.observable])}sn.isInteropObservable=zA;var un={};Object.defineProperty(un,"__esModule",{value:!0});un.isAsyncIterable=void 0;var LA=re;function $A(e){return Symbol.asyncIterator&&LA.isFunction(e==null?void 0:e[Symbol.asyncIterator])}un.isAsyncIterable=$A;var cn={};Object.defineProperty(cn,"__esModule",{value:!0});cn.createInvalidObservableTypeError=void 0;function UA(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}cn.createInvalidObservableTypeError=UA;var ln={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.iterator=Bt.getSymbolIterator=void 0;function df(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Bt.getSymbolIterator=df;Bt.iterator=df();Object.defineProperty(ln,"__esModule",{value:!0});ln.isIterable=void 0;var xA=Bt,VA=re;function GA(e){return VA.isFunction(e==null?void 0:e[xA.iterator])}ln.isIterable=GA;var Et={},BA=g&&g.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},mr=g&&g.__await||function(e){return this instanceof mr?(this.v=e,this):new mr(e)},kA=g&&g.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){n[m]&&(i[m]=function(v){return new Promise(function(h,y){a.push([m,v,h,y])>1||u(m,v)})})}function u(m,v){try{l(n[m](v))}catch(h){f(a[0][3],h)}}function l(m){m.value instanceof mr?Promise.resolve(m.value.v).then(c,d):f(a[0][2],m)}function c(m){u("next",m)}function d(m){u("throw",m)}function f(m,v){m(v),a.shift(),a.length&&u(a[0][0],a[0][1])}};Object.defineProperty(Et,"__esModule",{value:!0});Et.isReadableStreamLike=Et.readableStreamLikeToAsyncGenerator=void 0;var JA=re;function HA(e){return kA(this,arguments,function(){var r,n,i,a;return BA(this,function(o){switch(o.label){case 0:r=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,mr(r.read())];case 3:return n=o.sent(),i=n.value,a=n.done,a?[4,mr(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,mr(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}Et.readableStreamLikeToAsyncGenerator=HA;function WA(e){return JA.isFunction(e==null?void 0:e.getReader)}Et.isReadableStreamLike=WA;var QA=g&&g.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(u,l)}c((n=n.apply(e,t||[])).next())})},KA=g&&g.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},YA=g&&g.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof fs=="function"?fs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=e[a]&&function(o){return new Promise(function(u,l){o=e[a](o),i(u,l,o.done,o.value)})}}function i(a,o,u,l){Promise.resolve(l).then(function(c){a({value:c,done:u})},o)}},fs=g&&g.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(k,"__esModule",{value:!0});k.fromReadableStreamLike=k.fromAsyncIterable=k.fromIterable=k.fromPromise=k.fromArrayLike=k.fromInteropObservable=k.innerFrom=void 0;var XA=Cr,ZA=on,Pr=ie,jA=sn,eD=un,tD=cn,rD=ln,ff=Et,nD=re,iD=jr,aD=Yt;function oD(e){if(e instanceof Pr.Observable)return e;if(e!=null){if(jA.isInteropObservable(e))return pf(e);if(XA.isArrayLike(e))return mf(e);if(ZA.isPromise(e))return vf(e);if(eD.isAsyncIterable(e))return Us(e);if(rD.isIterable(e))return hf(e);if(ff.isReadableStreamLike(e))return gf(e)}throw tD.createInvalidObservableTypeError(e)}k.innerFrom=oD;function pf(e){return new Pr.Observable(function(t){var r=e[aD.observable]();if(nD.isFunction(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}k.fromInteropObservable=pf;function mf(e){return new Pr.Observable(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}k.fromArrayLike=mf;function vf(e){return new Pr.Observable(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,iD.reportUnhandledError)})}k.fromPromise=vf;function hf(e){return new Pr.Observable(function(t){var r,n;try{for(var i=fs(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(t.next(o),t.closed)return}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()})}k.fromIterable=hf;function Us(e){return new Pr.Observable(function(t){sD(e,t).catch(function(r){return t.error(r)})})}k.fromAsyncIterable=Us;function gf(e){return Us(ff.readableStreamLikeToAsyncGenerator(e))}k.fromReadableStreamLike=gf;function sD(e,t){var r,n,i,a;return QA(this,void 0,void 0,function(){var o,u;return KA(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=YA(e),l.label=1;case 1:return[4,r.next()];case 2:if(n=l.sent(),!!n.done)return[3,4];if(o=n.value,t.next(o),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=l.sent(),i={error:u},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(a=r.return)?[4,a.call(r)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}var jt={},Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.executeSchedule=void 0;function uD(e,t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var a=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(a),!i)return a}Je.executeSchedule=uD;Object.defineProperty(jt,"__esModule",{value:!0});jt.observeOn=void 0;var ko=Je,cD=q,lD=V;function dD(e,t){return t===void 0&&(t=0),cD.operate(function(r,n){r.subscribe(lD.createOperatorSubscriber(n,function(i){return ko.executeSchedule(n,e,function(){return n.next(i)},t)},function(){return ko.executeSchedule(n,e,function(){return n.complete()},t)},function(i){return ko.executeSchedule(n,e,function(){return n.error(i)},t)}))})}jt.observeOn=dD;var er={};Object.defineProperty(er,"__esModule",{value:!0});er.subscribeOn=void 0;var fD=q;function pD(e,t){return t===void 0&&(t=0),fD.operate(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}er.subscribeOn=pD;Object.defineProperty(bi,"__esModule",{value:!0});bi.scheduleObservable=void 0;var mD=k,vD=jt,hD=er;function gD(e,t){return mD.innerFrom(e).pipe(hD.subscribeOn(t),vD.observeOn(t))}bi.scheduleObservable=gD;var Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.schedulePromise=void 0;var yD=k,wD=jt,bD=er;function SD(e,t){return yD.innerFrom(e).pipe(bD.subscribeOn(t),wD.observeOn(t))}Si.schedulePromise=SD;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.scheduleArray=void 0;var RD=ie;function _D(e,t){return new RD.Observable(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}Ri.scheduleArray=_D;var dn={};Object.defineProperty(dn,"__esModule",{value:!0});dn.scheduleIterable=void 0;var OD=ie,ED=Bt,TD=re,Yc=Je;function CD(e,t){return new OD.Observable(function(r){var n;return Yc.executeSchedule(r,t,function(){n=e[ED.iterator](),Yc.executeSchedule(r,t,function(){var i,a,o;try{i=n.next(),a=i.value,o=i.done}catch(u){r.error(u);return}o?r.complete():r.next(a)},0,!0)}),function(){return TD.isFunction(n==null?void 0:n.return)&&n.return()}})}dn.scheduleIterable=CD;var fn={};Object.defineProperty(fn,"__esModule",{value:!0});fn.scheduleAsyncIterable=void 0;var PD=ie,Xc=Je;function AD(e,t){if(!e)throw new Error("Iterable cannot be null");return new PD.Observable(function(r){Xc.executeSchedule(r,t,function(){var n=e[Symbol.asyncIterator]();Xc.executeSchedule(r,t,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}fn.scheduleAsyncIterable=AD;var _i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.scheduleReadableStreamLike=void 0;var DD=fn,ID=Et;function ND(e,t){return DD.scheduleAsyncIterable(ID.readableStreamLikeToAsyncGenerator(e),t)}_i.scheduleReadableStreamLike=ND;Object.defineProperty(an,"__esModule",{value:!0});an.scheduled=void 0;var FD=bi,MD=Si,qD=Ri,zD=dn,LD=fn,$D=sn,UD=on,xD=Cr,VD=ln,GD=un,BD=cn,kD=Et,JD=_i;function HD(e,t){if(e!=null){if($D.isInteropObservable(e))return FD.scheduleObservable(e,t);if(xD.isArrayLike(e))return qD.scheduleArray(e,t);if(UD.isPromise(e))return MD.schedulePromise(e,t);if(GD.isAsyncIterable(e))return LD.scheduleAsyncIterable(e,t);if(VD.isIterable(e))return zD.scheduleIterable(e,t);if(kD.isReadableStreamLike(e))return JD.scheduleReadableStreamLike(e,t)}throw BD.createInvalidObservableTypeError(e)}an.scheduled=HD;Object.defineProperty(ke,"__esModule",{value:!0});ke.from=void 0;var WD=an,QD=k;function KD(e,t){return t?WD.scheduled(e,t):QD.innerFrom(e)}ke.from=KD;Object.defineProperty(Tr,"__esModule",{value:!0});Tr.of=void 0;var YD=fe,XD=ke;function ZD(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=YD.popScheduler(e);return XD.from(e,r)}Tr.of=ZD;var pn={};Object.defineProperty(pn,"__esModule",{value:!0});pn.throwError=void 0;var jD=ie,e1=re;function t1(e,t){var r=e1.isFunction(e)?e:function(){return e},n=function(i){return i.error(r())};return new jD.Observable(t?function(i){return t.schedule(n,0,i)}:n)}pn.throwError=t1;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var t=Ge,r=Tr,n=pn,i=re;(function(u){u.NEXT="N",u.ERROR="E",u.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var a=function(){function u(l,c,d){this.kind=l,this.value=c,this.error=d,this.hasValue=l==="N"}return u.prototype.observe=function(l){return o(this,l)},u.prototype.do=function(l,c,d){var f=this,m=f.kind,v=f.value,h=f.error;return m==="N"?l==null?void 0:l(v):m==="E"?c==null?void 0:c(h):d==null?void 0:d()},u.prototype.accept=function(l,c,d){var f;return i.isFunction((f=l)===null||f===void 0?void 0:f.next)?this.observe(l):this.do(l,c,d)},u.prototype.toObservable=function(){var l=this,c=l.kind,d=l.value,f=l.error,m=c==="N"?r.of(d):c==="E"?n.throwError(function(){return f}):c==="C"?t.EMPTY:0;if(!m)throw new TypeError("Unexpected notification kind "+c);return m},u.createNext=function(l){return new u("N",l)},u.createError=function(l){return new u("E",void 0,l)},u.createComplete=function(){return u.completeNotification},u.completeNotification=new u("C"),u}();e.Notification=a;function o(u,l){var c,d,f,m=u,v=m.kind,h=m.value,y=m.error;if(typeof v!="string")throw new TypeError('Invalid notification, missing "kind"');v==="N"?(c=l.next)===null||c===void 0||c.call(l,h):v==="E"?(d=l.error)===null||d===void 0||d.call(l,y):(f=l.complete)===null||f===void 0||f.call(l)}e.observeNotification=o})(wi);var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.isObservable=void 0;var r1=ie,Zc=re;function n1(e){return!!e&&(e instanceof r1.Observable||Zc.isFunction(e.lift)&&Zc.isFunction(e.subscribe))}Oi.isObservable=n1;var Ei={},et={};Object.defineProperty(et,"__esModule",{value:!0});et.EmptyError=void 0;var i1=je;et.EmptyError=i1.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(Ei,"__esModule",{value:!0});Ei.lastValueFrom=void 0;var a1=et;function o1(e,t){var r=typeof t=="object";return new Promise(function(n,i){var a=!1,o;e.subscribe({next:function(u){o=u,a=!0},error:i,complete:function(){a?n(o):r?n(t.defaultValue):i(new a1.EmptyError)}})})}Ei.lastValueFrom=o1;var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.firstValueFrom=void 0;var s1=et,u1=_r;function c1(e,t){var r=typeof t=="object";return new Promise(function(n,i){var a=new u1.SafeSubscriber({next:function(o){n(o),a.unsubscribe()},error:i,complete:function(){r?n(t.defaultValue):i(new s1.EmptyError)}});e.subscribe(a)})}Ti.firstValueFrom=c1;var mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.ArgumentOutOfRangeError=void 0;var l1=je;mn.ArgumentOutOfRangeError=l1.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.NotFoundError=void 0;var d1=je;vn.NotFoundError=d1.createErrorClass(function(e){return function(r){e(this),this.name="NotFoundError",this.message=r}});var hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.SequenceError=void 0;var f1=je;hn.SequenceError=f1.createErrorClass(function(e){return function(r){e(this),this.name="SequenceError",this.message=r}});var ei={},Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.isValidDate=void 0;function p1(e){return e instanceof Date&&!isNaN(e)}Ar.isValidDate=p1;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var t=Ie,r=Ar,n=q,i=k,a=je,o=V,u=Je;e.TimeoutError=a.createErrorClass(function(d){return function(m){m===void 0&&(m=null),d(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=m}});function l(d,f){var m=r.isValidDate(d)?{first:d}:typeof d=="number"?{each:d}:d,v=m.first,h=m.each,y=m.with,_=y===void 0?c:y,O=m.scheduler,P=O===void 0?f??t.asyncScheduler:O,C=m.meta,b=C===void 0?null:C;if(v==null&&h==null)throw new TypeError("No timeout provided.");return n.operate(function(T,S){var A,F,I=null,z=0,U=function($){F=u.executeSchedule(S,P,function(){try{A.unsubscribe(),i.innerFrom(_({meta:b,lastValue:I,seen:z})).subscribe(S)}catch(L){S.error(L)}},$)};A=T.subscribe(o.createOperatorSubscriber(S,function($){F==null||F.unsubscribe(),z++,S.next(I=$),h>0&&U(h)},void 0,void 0,function(){F!=null&&F.closed||F==null||F.unsubscribe(),I=null})),!z&&U(v!=null?typeof v=="number"?v:+v-P.now():h)})}e.timeout=l;function c(d){throw new e.TimeoutError(d)}})(ei);var Ci={},gn={},tt={},rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.map=void 0;var m1=q,v1=V;function h1(e,t){return m1.operate(function(r,n){var i=0;r.subscribe(v1.createOperatorSubscriber(n,function(a){n.next(e.call(t,a,i++))}))})}rt.map=h1;var g1=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},y1=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(tt,"__esModule",{value:!0});tt.mapOneOrManyArgs=void 0;var w1=rt,b1=Array.isArray;function S1(e,t){return b1(t)?e.apply(void 0,y1([],g1(t))):e(t)}function R1(e){return w1.map(function(t){return S1(e,t)})}tt.mapOneOrManyArgs=R1;var _1=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},jc=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(gn,"__esModule",{value:!0});gn.bindCallbackInternals=void 0;var O1=Zt,E1=ie,T1=er,C1=tt,P1=jt,A1=Er;function ps(e,t,r,n){if(r)if(O1.isScheduler(r))n=r;else return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return ps(e,t,n).apply(this,i).pipe(C1.mapOneOrManyArgs(r))};return n?function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return ps(e,t).apply(this,i).pipe(T1.subscribeOn(n),P1.observeOn(n))}:function(){for(var i=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var u=new A1.AsyncSubject,l=!0;return new E1.Observable(function(c){var d=u.subscribe(c);if(l){l=!1;var f=!1,m=!1;t.apply(i,jc(jc([],_1(a)),[function(){for(var v=[],h=0;h<arguments.length;h++)v[h]=arguments[h];if(e){var y=v.shift();if(y!=null){u.error(y);return}}u.next(1<v.length?v:v[0]),m=!0,f&&u.complete()}])),m&&u.complete(),f=!0}return d})}}gn.bindCallbackInternals=ps;Object.defineProperty(Ci,"__esModule",{value:!0});Ci.bindCallback=void 0;var D1=gn;function I1(e,t,r){return D1.bindCallbackInternals(!1,e,t,r)}Ci.bindCallback=I1;var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.bindNodeCallback=void 0;var N1=gn;function F1(e,t,r){return N1.bindCallbackInternals(!0,e,t,r)}Pi.bindNodeCallback=F1;var Tt={},yn={};Object.defineProperty(yn,"__esModule",{value:!0});yn.argsArgArrayOrObject=void 0;var M1=Array.isArray,q1=Object.getPrototypeOf,z1=Object.prototype,L1=Object.keys;function $1(e){if(e.length===1){var t=e[0];if(M1(t))return{args:t,keys:null};if(U1(t)){var r=L1(t);return{args:r.map(function(n){return t[n]}),keys:r}}}return{args:e,keys:null}}yn.argsArgArrayOrObject=$1;function U1(e){return e&&typeof e=="object"&&q1(e)===z1}var wn={};Object.defineProperty(wn,"__esModule",{value:!0});wn.createObject=void 0;function x1(e,t){return e.reduce(function(r,n,i){return r[n]=t[i],r},{})}wn.createObject=x1;Object.defineProperty(Tt,"__esModule",{value:!0});Tt.combineLatestInit=Tt.combineLatest=void 0;var V1=ie,G1=yn,yf=ke,wf=ve,B1=tt,el=fe,k1=wn,J1=V,H1=Je;function W1(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=el.popScheduler(e),n=el.popResultSelector(e),i=G1.argsArgArrayOrObject(e),a=i.args,o=i.keys;if(a.length===0)return yf.from([],r);var u=new V1.Observable(bf(a,r,o?function(l){return k1.createObject(o,l)}:wf.identity));return n?u.pipe(B1.mapOneOrManyArgs(n)):u}Tt.combineLatest=W1;function bf(e,t,r){return r===void 0&&(r=wf.identity),function(n){tl(t,function(){for(var i=e.length,a=new Array(i),o=i,u=i,l=function(d){tl(t,function(){var f=yf.from(e[d],t),m=!1;f.subscribe(J1.createOperatorSubscriber(n,function(v){a[d]=v,m||(m=!0,u--),u||n.next(r(a.slice()))},function(){--o||n.complete()}))},n)},c=0;c<i;c++)l(c)},n)}}Tt.combineLatestInit=bf;function tl(e,t,r){e?H1.executeSchedule(r,e,t):t()}var tr={},Dr={},rr={},He={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.mergeInternals=void 0;var Q1=k,K1=Je,rl=V;function Y1(e,t,r,n,i,a,o,u){var l=[],c=0,d=0,f=!1,m=function(){f&&!l.length&&!c&&t.complete()},v=function(y){return c<n?h(y):l.push(y)},h=function(y){a&&t.next(y),c++;var _=!1;Q1.innerFrom(r(y,d++)).subscribe(rl.createOperatorSubscriber(t,function(O){i==null||i(O),a?v(O):t.next(O)},function(){_=!0},void 0,function(){if(_)try{c--;for(var O=function(){var P=l.shift();o?K1.executeSchedule(t,o,function(){return h(P)}):h(P)};l.length&&c<n;)O();m()}catch(P){t.error(P)}}))};return e.subscribe(rl.createOperatorSubscriber(t,v,function(){f=!0,m()})),function(){u==null||u()}}Ir.mergeInternals=Y1;Object.defineProperty(He,"__esModule",{value:!0});He.mergeMap=void 0;var X1=rt,Z1=k,j1=q,eI=Ir,tI=re;function Sf(e,t,r){return r===void 0&&(r=1/0),tI.isFunction(t)?Sf(function(n,i){return X1.map(function(a,o){return t(n,a,i,o)})(Z1.innerFrom(e(n,i)))},r):(typeof t=="number"&&(r=t),j1.operate(function(n,i){return eI.mergeInternals(n,i,e,r)}))}He.mergeMap=Sf;Object.defineProperty(rr,"__esModule",{value:!0});rr.mergeAll=void 0;var rI=He,nI=ve;function iI(e){return e===void 0&&(e=1/0),rI.mergeMap(nI.identity,e)}rr.mergeAll=iI;Object.defineProperty(Dr,"__esModule",{value:!0});Dr.concatAll=void 0;var aI=rr;function oI(){return aI.mergeAll(1)}Dr.concatAll=oI;Object.defineProperty(tr,"__esModule",{value:!0});tr.concat=void 0;var sI=Dr,uI=fe,cI=ke;function lI(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sI.concatAll()(cI.from(e,uI.popScheduler(e)))}tr.concat=lI;var Ai={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.defer=void 0;var dI=ie,fI=k;function pI(e){return new dI.Observable(function(t){fI.innerFrom(e()).subscribe(t)})}nr.defer=pI;Object.defineProperty(Ai,"__esModule",{value:!0});Ai.connectable=void 0;var mI=de,vI=ie,hI=nr,gI={connector:function(){return new mI.Subject},resetOnDisconnect:!0};function yI(e,t){t===void 0&&(t=gI);var r=null,n=t.connector,i=t.resetOnDisconnect,a=i===void 0?!0:i,o=n(),u=new vI.Observable(function(l){return o.subscribe(l)});return u.connect=function(){return(!r||r.closed)&&(r=hI.defer(function(){return e}).subscribe(o),a&&r.add(function(){return o=n()})),r},u}Ai.connectable=yI;var Di={};Object.defineProperty(Di,"__esModule",{value:!0});Di.forkJoin=void 0;var wI=ie,bI=yn,SI=k,RI=fe,_I=V,OI=tt,EI=wn;function TI(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=RI.popResultSelector(e),n=bI.argsArgArrayOrObject(e),i=n.args,a=n.keys,o=new wI.Observable(function(u){var l=i.length;if(!l){u.complete();return}for(var c=new Array(l),d=l,f=l,m=function(h){var y=!1;SI.innerFrom(i[h]).subscribe(_I.createOperatorSubscriber(u,function(_){y||(y=!0,f--),c[h]=_},function(){return d--},void 0,function(){(!d||!y)&&(f||u.next(a?EI.createObject(a,c):c),u.complete())}))},v=0;v<l;v++)m(v)});return r?o.pipe(OI.mapOneOrManyArgs(r)):o}Di.forkJoin=TI;var Ii={},CI=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.fromEvent=void 0;var PI=k,AI=ie,DI=He,II=Cr,kt=re,NI=tt,FI=["addListener","removeListener"],MI=["addEventListener","removeEventListener"],qI=["on","off"];function ms(e,t,r,n){if(kt.isFunction(r)&&(n=r,r=void 0),n)return ms(e,t,r).pipe(NI.mapOneOrManyArgs(n));var i=CI($I(e)?MI.map(function(u){return function(l){return e[u](t,l,r)}}):zI(e)?FI.map(nl(e,t)):LI(e)?qI.map(nl(e,t)):[],2),a=i[0],o=i[1];if(!a&&II.isArrayLike(e))return DI.mergeMap(function(u){return ms(u,t,r)})(PI.innerFrom(e));if(!a)throw new TypeError("Invalid event target");return new AI.Observable(function(u){var l=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return u.next(1<c.length?c:c[0])};return a(l),function(){return o(l)}})}Ii.fromEvent=ms;function nl(e,t){return function(r){return function(n){return e[r](t,n)}}}function zI(e){return kt.isFunction(e.addListener)&&kt.isFunction(e.removeListener)}function LI(e){return kt.isFunction(e.on)&&kt.isFunction(e.off)}function $I(e){return kt.isFunction(e.addEventListener)&&kt.isFunction(e.removeEventListener)}var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.fromEventPattern=void 0;var UI=ie,xI=re,VI=tt;function Rf(e,t,r){return r?Rf(e,t).pipe(VI.mapOneOrManyArgs(r)):new UI.Observable(function(n){var i=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return n.next(o.length===1?o[0]:o)},a=e(i);return xI.isFunction(t)?function(){return t(i,a)}:void 0})}Ni.fromEventPattern=Rf;var Fi={},GI=g&&g.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.generate=void 0;var il=ve,BI=Zt,kI=nr,JI=dn;function HI(e,t,r,n,i){var a,o,u,l;arguments.length===1?(a=e,l=a.initialState,t=a.condition,r=a.iterate,o=a.resultSelector,u=o===void 0?il.identity:o,i=a.scheduler):(l=e,!n||BI.isScheduler(n)?(u=il.identity,i=n):u=n);function c(){var d;return GI(this,function(f){switch(f.label){case 0:d=l,f.label=1;case 1:return!t||t(d)?[4,u(d)]:[3,4];case 2:f.sent(),f.label=3;case 3:return d=r(d),[3,1];case 4:return[2]}})}return kI.defer(i?function(){return JI.scheduleIterable(c(),i)}:c)}Fi.generate=HI;var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.iif=void 0;var WI=nr;function QI(e,t,r){return WI.defer(function(){return e()?t:r})}Mi.iif=QI;var bn={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.timer=void 0;var KI=ie,YI=Ie,XI=Zt,ZI=Ar;function jI(e,t,r){e===void 0&&(e=0),r===void 0&&(r=YI.async);var n=-1;return t!=null&&(XI.isScheduler(t)?r=t:n=t),new KI.Observable(function(i){var a=ZI.isValidDate(e)?+e-r.now():e;a<0&&(a=0);var o=0;return r.schedule(function(){i.closed||(i.next(o++),0<=n?this.schedule(void 0,n):i.complete())},a)})}nt.timer=jI;Object.defineProperty(bn,"__esModule",{value:!0});bn.interval=void 0;var eN=Ie,tN=nt;function rN(e,t){return e===void 0&&(e=0),t===void 0&&(t=eN.asyncScheduler),e<0&&(e=0),tN.timer(e,e,t)}bn.interval=rN;var qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.merge=void 0;var nN=rr,iN=k,aN=Ge,al=fe,oN=ke;function sN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=al.popScheduler(e),n=al.popNumber(e,1/0),i=e;return i.length?i.length===1?iN.innerFrom(i[0]):nN.mergeAll(n)(oN.from(i,r)):aN.EMPTY}qi.merge=sN;var vs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var t=ie,r=me;e.NEVER=new t.Observable(r.noop);function n(){return e.NEVER}e.never=n})(vs);var Sn={},ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.argsOrArgArray=void 0;var uN=Array.isArray;function cN(e){return e.length===1&&uN(e[0])?e[0]:e}ft.argsOrArgArray=cN;Object.defineProperty(Sn,"__esModule",{value:!0});Sn.onErrorResumeNext=void 0;var lN=ie,dN=ft,fN=V,ol=me,pN=k;function mN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=dN.argsOrArgArray(e);return new lN.Observable(function(n){var i=0,a=function(){if(i<r.length){var o=void 0;try{o=pN.innerFrom(r[i++])}catch{a();return}var u=new fN.OperatorSubscriber(n,void 0,ol.noop,ol.noop);o.subscribe(u),u.add(a)}else n.complete()};a()})}Sn.onErrorResumeNext=mN;var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.pairs=void 0;var vN=ke;function hN(e,t){return vN.from(Object.entries(e),t)}zi.pairs=hN;var Li={},$i={};Object.defineProperty($i,"__esModule",{value:!0});$i.not=void 0;function gN(e,t){return function(r,n){return!e.call(t,r,n)}}$i.not=gN;var pt={};Object.defineProperty(pt,"__esModule",{value:!0});pt.filter=void 0;var yN=q,wN=V;function bN(e,t){return yN.operate(function(r,n){var i=0;r.subscribe(wN.createOperatorSubscriber(n,function(a){return e.call(t,a,i++)&&n.next(a)}))})}pt.filter=bN;Object.defineProperty(Li,"__esModule",{value:!0});Li.partition=void 0;var SN=$i,sl=pt,ul=k;function RN(e,t,r){return[sl.filter(t,r)(ul.innerFrom(e)),sl.filter(SN.not(t,r))(ul.innerFrom(e))]}Li.partition=RN;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.raceInit=Jt.race=void 0;var _N=ie,_f=k,ON=ft,EN=V;function TN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=ON.argsOrArgArray(e),e.length===1?_f.innerFrom(e[0]):new _N.Observable(Of(e))}Jt.race=TN;function Of(e){return function(t){for(var r=[],n=function(a){r.push(_f.innerFrom(e[a]).subscribe(EN.createOperatorSubscriber(t,function(o){if(r){for(var u=0;u<r.length;u++)u!==a&&r[u].unsubscribe();r=null}t.next(o)})))},i=0;r&&!t.closed&&i<e.length;i++)n(i)}}Jt.raceInit=Of;var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.range=void 0;var CN=ie,PN=Ge;function AN(e,t,r){if(t==null&&(t=e,e=0),t<=0)return PN.EMPTY;var n=t+e;return new CN.Observable(r?function(i){var a=e;return r.schedule(function(){a<n?(i.next(a++),this.schedule()):i.complete()})}:function(i){for(var a=e;a<n&&!i.closed;)i.next(a++);i.complete()})}Ui.range=AN;var xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.using=void 0;var DN=ie,IN=k,NN=Ge;function FN(e,t){return new DN.Observable(function(r){var n=e(),i=t(n),a=i?IN.innerFrom(i):NN.EMPTY;return a.subscribe(r),function(){n&&n.unsubscribe()}})}xi.using=FN;var Nr={},MN=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},qN=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.zip=void 0;var zN=ie,LN=k,$N=ft,UN=Ge,xN=V,VN=fe;function GN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=VN.popResultSelector(e),n=$N.argsOrArgArray(e);return n.length?new zN.Observable(function(i){var a=n.map(function(){return[]}),o=n.map(function(){return!1});i.add(function(){a=o=null});for(var u=function(c){LN.innerFrom(n[c]).subscribe(xN.createOperatorSubscriber(i,function(d){if(a[c].push(d),a.every(function(m){return m.length})){var f=a.map(function(m){return m.shift()});i.next(r?r.apply(void 0,qN([],MN(f))):f),a.some(function(m,v){return!m.length&&o[v]})&&i.complete()}},function(){o[c]=!0,!a[c].length&&i.complete()}))},l=0;!i.closed&&l<n.length;l++)u(l);return function(){a=o=null}}):UN.EMPTY}Nr.zip=GN;var Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.audit=void 0;var BN=q,kN=k,cl=V;function JN(e){return BN.operate(function(t,r){var n=!1,i=null,a=null,o=!1,u=function(){if(a==null||a.unsubscribe(),a=null,n){n=!1;var c=i;i=null,r.next(c)}o&&r.complete()},l=function(){a=null,o&&r.complete()};t.subscribe(cl.createOperatorSubscriber(r,function(c){n=!0,i=c,a||kN.innerFrom(e(c)).subscribe(a=cl.createOperatorSubscriber(r,u,l))},function(){o=!0,(!n||!a||a.closed)&&r.complete()}))})}Rn.audit=JN;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.auditTime=void 0;var HN=Ie,WN=Rn,QN=nt;function KN(e,t){return t===void 0&&(t=HN.asyncScheduler),WN.audit(function(){return QN.timer(e,t)})}Vi.auditTime=KN;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.buffer=void 0;var YN=q,XN=me,ll=V,ZN=k;function jN(e){return YN.operate(function(t,r){var n=[];return t.subscribe(ll.createOperatorSubscriber(r,function(i){return n.push(i)},function(){r.next(n),r.complete()})),ZN.innerFrom(e).subscribe(ll.createOperatorSubscriber(r,function(){var i=n;n=[],r.next(i)},XN.noop)),function(){n=null}})}Gi.buffer=jN;var Bi={},Jo=g&&g.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.bufferCount=void 0;var eF=q,tF=V,rF=Be;function nF(e,t){return t===void 0&&(t=null),t=t??e,eF.operate(function(r,n){var i=[],a=0;r.subscribe(tF.createOperatorSubscriber(n,function(o){var u,l,c,d,f=null;a++%t===0&&i.push([]);try{for(var m=Jo(i),v=m.next();!v.done;v=m.next()){var h=v.value;h.push(o),e<=h.length&&(f=f??[],f.push(h))}}catch(O){u={error:O}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}if(f)try{for(var y=Jo(f),_=y.next();!_.done;_=y.next()){var h=_.value;rF.arrRemove(i,h),n.next(h)}}catch(O){c={error:O}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(c)throw c.error}}},function(){var o,u;try{for(var l=Jo(i),c=l.next();!c.done;c=l.next()){var d=c.value;n.next(d)}}catch(f){o={error:f}}finally{try{c&&!c.done&&(u=l.return)&&u.call(l)}finally{if(o)throw o.error}}n.complete()},void 0,function(){i=null}))})}Bi.bufferCount=nF;var ki={},iF=g&&g.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ki,"__esModule",{value:!0});ki.bufferTime=void 0;var aF=pe,oF=q,sF=V,uF=Be,cF=Ie,lF=fe,dl=Je;function dF(e){for(var t,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=(t=lF.popScheduler(n))!==null&&t!==void 0?t:cF.asyncScheduler,o=(r=n[0])!==null&&r!==void 0?r:null,u=n[1]||1/0;return oF.operate(function(l,c){var d=[],f=!1,m=function(y){var _=y.buffer,O=y.subs;O.unsubscribe(),uF.arrRemove(d,y),c.next(_),f&&v()},v=function(){if(d){var y=new aF.Subscription;c.add(y);var _=[],O={buffer:_,subs:y};d.push(O),dl.executeSchedule(y,a,function(){return m(O)},e)}};o!==null&&o>=0?dl.executeSchedule(c,a,v,o,!0):f=!0,v();var h=sF.createOperatorSubscriber(c,function(y){var _,O,P=d.slice();try{for(var C=iF(P),b=C.next();!b.done;b=C.next()){var T=b.value,S=T.buffer;S.push(y),u<=S.length&&m(T)}}catch(A){_={error:A}}finally{try{b&&!b.done&&(O=C.return)&&O.call(C)}finally{if(_)throw _.error}}},function(){for(;d!=null&&d.length;)c.next(d.shift().buffer);h==null||h.unsubscribe(),c.complete(),c.unsubscribe()},void 0,function(){return d=null});l.subscribe(h)})}ki.bufferTime=dF;var Ji={},fF=g&&g.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.bufferToggle=void 0;var pF=pe,mF=q,fl=k,Ho=V,pl=me,vF=Be;function hF(e,t){return mF.operate(function(r,n){var i=[];fl.innerFrom(e).subscribe(Ho.createOperatorSubscriber(n,function(a){var o=[];i.push(o);var u=new pF.Subscription,l=function(){vF.arrRemove(i,o),n.next(o),u.unsubscribe()};u.add(fl.innerFrom(t(a)).subscribe(Ho.createOperatorSubscriber(n,l,pl.noop)))},pl.noop)),r.subscribe(Ho.createOperatorSubscriber(n,function(a){var o,u;try{for(var l=fF(i),c=l.next();!c.done;c=l.next()){var d=c.value;d.push(a)}}catch(f){o={error:f}}finally{try{c&&!c.done&&(u=l.return)&&u.call(l)}finally{if(o)throw o.error}}},function(){for(;i.length>0;)n.next(i.shift());n.complete()}))})}Ji.bufferToggle=hF;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.bufferWhen=void 0;var gF=q,yF=me,ml=V,wF=k;function bF(e){return gF.operate(function(t,r){var n=null,i=null,a=function(){i==null||i.unsubscribe();var o=n;n=[],o&&r.next(o),wF.innerFrom(e()).subscribe(i=ml.createOperatorSubscriber(r,a,yF.noop))};a(),t.subscribe(ml.createOperatorSubscriber(r,function(o){return n==null?void 0:n.push(o)},function(){n&&r.next(n),r.complete()},void 0,function(){return n=i=null}))})}Hi.bufferWhen=bF;var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.catchError=void 0;var SF=k,RF=V,_F=q;function Tf(e){return _F.operate(function(t,r){var n=null,i=!1,a;n=t.subscribe(RF.createOperatorSubscriber(r,void 0,void 0,function(o){a=SF.innerFrom(e(o,Tf(e)(t))),n?(n.unsubscribe(),n=null,a.subscribe(r)):i=!0})),i&&(n.unsubscribe(),n=null,a.subscribe(r))})}Wi.catchError=Tf;var Qi={},_n={},On={},En={},It={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.scanInternals=void 0;var OF=V;function EF(e,t,r,n,i){return function(a,o){var u=r,l=t,c=0;a.subscribe(OF.createOperatorSubscriber(o,function(d){var f=c++;l=u?e(l,d,f):(u=!0,d),n&&o.next(l)},i&&function(){u&&o.next(l),o.complete()}))}}Tn.scanInternals=EF;Object.defineProperty(It,"__esModule",{value:!0});It.reduce=void 0;var TF=Tn,CF=q;function PF(e,t){return CF.operate(TF.scanInternals(e,t,arguments.length>=2,!1,!0))}It.reduce=PF;Object.defineProperty(En,"__esModule",{value:!0});En.toArray=void 0;var AF=It,DF=q,IF=function(e,t){return e.push(t),e};function NF(){return DF.operate(function(e,t){AF.reduce(IF,[])(e).subscribe(t)})}En.toArray=NF;Object.defineProperty(On,"__esModule",{value:!0});On.joinAllInternals=void 0;var FF=ve,MF=tt,qF=lt,zF=He,LF=En;function $F(e,t){return qF.pipe(LF.toArray(),zF.mergeMap(function(r){return e(r)}),t?MF.mapOneOrManyArgs(t):FF.identity)}On.joinAllInternals=$F;Object.defineProperty(_n,"__esModule",{value:!0});_n.combineLatestAll=void 0;var UF=Tt,xF=On;function VF(e){return xF.joinAllInternals(UF.combineLatest,e)}_n.combineLatestAll=VF;Object.defineProperty(Qi,"__esModule",{value:!0});Qi.combineAll=void 0;var GF=_n;Qi.combineAll=GF.combineLatestAll;var Ki={},Yi={},vl=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},hl=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.combineLatest=void 0;var BF=Tt,kF=q,JF=ft,HF=tt,WF=lt,QF=fe;function Cf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=QF.popResultSelector(e);return r?WF.pipe(Cf.apply(void 0,hl([],vl(e))),HF.mapOneOrManyArgs(r)):kF.operate(function(n,i){BF.combineLatestInit(hl([n],vl(JF.argsOrArgArray(e))))(i)})}Yi.combineLatest=Cf;var KF=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},YF=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.combineLatestWith=void 0;var XF=Yi;function ZF(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return XF.combineLatest.apply(void 0,YF([],KF(e)))}Ki.combineLatestWith=ZF;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.concatMap=void 0;var gl=He,jF=re;function eM(e,t){return jF.isFunction(t)?gl.mergeMap(e,t,1):gl.mergeMap(e,1)}Cn.concatMap=eM;var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.concatMapTo=void 0;var yl=Cn,tM=re;function rM(e,t){return tM.isFunction(t)?yl.concatMap(function(){return e},t):yl.concatMap(function(){return e})}Xi.concatMapTo=rM;var Zi={},ji={},nM=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},iM=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(ji,"__esModule",{value:!0});ji.concat=void 0;var aM=q,oM=Dr,sM=fe,uM=ke;function cM(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=sM.popScheduler(e);return aM.operate(function(n,i){oM.concatAll()(uM.from(iM([n],nM(e)),r)).subscribe(i)})}ji.concat=cM;var lM=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},dM=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.concatWith=void 0;var fM=ji;function pM(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fM.concat.apply(void 0,dM([],lM(e)))}Zi.concatWith=pM;var Fr={},ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.fromSubscribable=void 0;var mM=ie;function vM(e){return new mM.Observable(function(t){return e.subscribe(t)})}ea.fromSubscribable=vM;Object.defineProperty(Fr,"__esModule",{value:!0});Fr.connect=void 0;var hM=de,gM=k,yM=q,wM=ea,bM={connector:function(){return new hM.Subject}};function SM(e,t){t===void 0&&(t=bM);var r=t.connector;return yM.operate(function(n,i){var a=r();gM.innerFrom(e(wM.fromSubscribable(a))).subscribe(i),i.add(n.subscribe(a))})}Fr.connect=SM;var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.count=void 0;var RM=It;function _M(e){return RM.reduce(function(t,r,n){return!e||e(r,n)?t+1:t},0)}ta.count=_M;var ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.debounce=void 0;var OM=q,EM=me,wl=V,TM=k;function CM(e){return OM.operate(function(t,r){var n=!1,i=null,a=null,o=function(){if(a==null||a.unsubscribe(),a=null,n){n=!1;var u=i;i=null,r.next(u)}};t.subscribe(wl.createOperatorSubscriber(r,function(u){a==null||a.unsubscribe(),n=!0,i=u,a=wl.createOperatorSubscriber(r,o,EM.noop),TM.innerFrom(e(u)).subscribe(a)},function(){o(),r.complete()},void 0,function(){i=a=null}))})}ra.debounce=CM;var na={};Object.defineProperty(na,"__esModule",{value:!0});na.debounceTime=void 0;var PM=Ie,AM=q,DM=V;function IM(e,t){return t===void 0&&(t=PM.asyncScheduler),AM.operate(function(r,n){var i=null,a=null,o=null,u=function(){if(i){i.unsubscribe(),i=null;var c=a;a=null,n.next(c)}};function l(){var c=o+e,d=t.now();if(d<c){i=this.schedule(void 0,c-d),n.add(i);return}u()}r.subscribe(DM.createOperatorSubscriber(n,function(c){a=c,o=t.now(),i||(i=t.schedule(l,e),n.add(i))},function(){u(),n.complete()},void 0,function(){a=i=null}))})}na.debounceTime=IM;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.defaultIfEmpty=void 0;var NM=q,FM=V;function MM(e){return NM.operate(function(t,r){var n=!1;t.subscribe(FM.createOperatorSubscriber(r,function(i){n=!0,r.next(i)},function(){n||r.next(e),r.complete()}))})}ir.defaultIfEmpty=MM;var ia={},Pn={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.take=void 0;var qM=Ge,zM=q,LM=V;function $M(e){return e<=0?function(){return qM.EMPTY}:zM.operate(function(t,r){var n=0;t.subscribe(LM.createOperatorSubscriber(r,function(i){++n<=e&&(r.next(i),e<=n&&r.complete())}))})}ar.take=$M;var An={};Object.defineProperty(An,"__esModule",{value:!0});An.ignoreElements=void 0;var UM=q,xM=V,VM=me;function GM(){return UM.operate(function(e,t){e.subscribe(xM.createOperatorSubscriber(t,VM.noop))})}An.ignoreElements=GM;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.mapTo=void 0;var BM=rt;function kM(e){return BM.map(function(){return e})}Dn.mapTo=kM;Object.defineProperty(Pn,"__esModule",{value:!0});Pn.delayWhen=void 0;var JM=tr,bl=ar,HM=An,WM=Dn,QM=He,KM=k;function Pf(e,t){return t?function(r){return JM.concat(t.pipe(bl.take(1),HM.ignoreElements()),r.pipe(Pf(e)))}:QM.mergeMap(function(r,n){return KM.innerFrom(e(r,n)).pipe(bl.take(1),WM.mapTo(r))})}Pn.delayWhen=Pf;Object.defineProperty(ia,"__esModule",{value:!0});ia.delay=void 0;var YM=Ie,XM=Pn,ZM=nt;function jM(e,t){t===void 0&&(t=YM.asyncScheduler);var r=ZM.timer(e,t);return XM.delayWhen(function(){return r})}ia.delay=jM;var aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.dematerialize=void 0;var eq=wi,tq=q,rq=V;function nq(){return tq.operate(function(e,t){e.subscribe(rq.createOperatorSubscriber(t,function(r){return eq.observeNotification(r,t)}))})}aa.dematerialize=nq;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.distinct=void 0;var iq=q,Sl=V,aq=me,oq=k;function sq(e,t){return iq.operate(function(r,n){var i=new Set;r.subscribe(Sl.createOperatorSubscriber(n,function(a){var o=e?e(a):a;i.has(o)||(i.add(o),n.next(a))})),t&&oq.innerFrom(t).subscribe(Sl.createOperatorSubscriber(n,function(){return i.clear()},aq.noop))})}oa.distinct=sq;var In={};Object.defineProperty(In,"__esModule",{value:!0});In.distinctUntilChanged=void 0;var uq=ve,cq=q,lq=V;function dq(e,t){return t===void 0&&(t=uq.identity),e=e??fq,cq.operate(function(r,n){var i,a=!0;r.subscribe(lq.createOperatorSubscriber(n,function(o){var u=t(o);(a||!e(i,u))&&(a=!1,i=u,n.next(o))}))})}In.distinctUntilChanged=dq;function fq(e,t){return e===t}var sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.distinctUntilKeyChanged=void 0;var pq=In;function mq(e,t){return pq.distinctUntilChanged(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}sa.distinctUntilKeyChanged=mq;var ua={},or={};Object.defineProperty(or,"__esModule",{value:!0});or.throwIfEmpty=void 0;var vq=et,hq=q,gq=V;function yq(e){return e===void 0&&(e=wq),hq.operate(function(t,r){var n=!1;t.subscribe(gq.createOperatorSubscriber(r,function(i){n=!0,r.next(i)},function(){return n?r.complete():r.error(e())}))})}or.throwIfEmpty=yq;function wq(){return new vq.EmptyError}Object.defineProperty(ua,"__esModule",{value:!0});ua.elementAt=void 0;var Rl=mn,bq=pt,Sq=or,Rq=ir,_q=ar;function Oq(e,t){if(e<0)throw new Rl.ArgumentOutOfRangeError;var r=arguments.length>=2;return function(n){return n.pipe(bq.filter(function(i,a){return a===e}),_q.take(1),r?Rq.defaultIfEmpty(t):Sq.throwIfEmpty(function(){return new Rl.ArgumentOutOfRangeError}))}}ua.elementAt=Oq;var ca={},Eq=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Tq=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(ca,"__esModule",{value:!0});ca.endWith=void 0;var Cq=tr,Pq=Tr;function Aq(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return Cq.concat(r,Pq.of.apply(void 0,Tq([],Eq(e))))}}ca.endWith=Aq;var la={};Object.defineProperty(la,"__esModule",{value:!0});la.every=void 0;var Dq=q,Iq=V;function Nq(e,t){return Dq.operate(function(r,n){var i=0;r.subscribe(Iq.createOperatorSubscriber(n,function(a){e.call(t,a,i++,r)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}la.every=Nq;var da={},Nn={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.exhaustMap=void 0;var Fq=rt,_l=k,Mq=q,Ol=V;function Af(e,t){return t?function(r){return r.pipe(Af(function(n,i){return _l.innerFrom(e(n,i)).pipe(Fq.map(function(a,o){return t(n,a,i,o)}))}))}:Mq.operate(function(r,n){var i=0,a=null,o=!1;r.subscribe(Ol.createOperatorSubscriber(n,function(u){a||(a=Ol.createOperatorSubscriber(n,void 0,function(){a=null,o&&n.complete()}),_l.innerFrom(e(u,i++)).subscribe(a))},function(){o=!0,!a&&n.complete()}))})}Fn.exhaustMap=Af;Object.defineProperty(Nn,"__esModule",{value:!0});Nn.exhaustAll=void 0;var qq=Fn,zq=ve;function Lq(){return qq.exhaustMap(zq.identity)}Nn.exhaustAll=Lq;Object.defineProperty(da,"__esModule",{value:!0});da.exhaust=void 0;var $q=Nn;da.exhaust=$q.exhaustAll;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.expand=void 0;var Uq=q,xq=Ir;function Vq(e,t,r){return t===void 0&&(t=1/0),t=(t||0)<1?1/0:t,Uq.operate(function(n,i){return xq.mergeInternals(n,i,e,t,void 0,!0,r)})}fa.expand=Vq;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.finalize=void 0;var Gq=q;function Bq(e){return Gq.operate(function(t,r){try{t.subscribe(r)}finally{r.add(e)}})}pa.finalize=Bq;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.createFind=Ht.find=void 0;var kq=q,Jq=V;function Hq(e,t){return kq.operate(Df(e,t,"value"))}Ht.find=Hq;function Df(e,t,r){var n=r==="index";return function(i,a){var o=0;i.subscribe(Jq.createOperatorSubscriber(a,function(u){var l=o++;e.call(t,u,l,i)&&(a.next(n?l:u),a.complete())},function(){a.next(n?-1:void 0),a.complete()}))}}Ht.createFind=Df;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.findIndex=void 0;var Wq=q,Qq=Ht;function Kq(e,t){return Wq.operate(Qq.createFind(e,t,"index"))}ma.findIndex=Kq;var va={};Object.defineProperty(va,"__esModule",{value:!0});va.first=void 0;var Yq=et,Xq=pt,Zq=ar,jq=ir,ez=or,tz=ve;function rz(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?Xq.filter(function(i,a){return e(i,a,n)}):tz.identity,Zq.take(1),r?jq.defaultIfEmpty(t):ez.throwIfEmpty(function(){return new Yq.EmptyError}))}}va.first=rz;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.groupBy=void 0;var nz=ie,iz=k,az=de,oz=q,El=V;function sz(e,t,r,n){return oz.operate(function(i,a){var o;!t||typeof t=="function"?o=t:(r=t.duration,o=t.element,n=t.connector);var u=new Map,l=function(h){u.forEach(h),h(a)},c=function(h){return l(function(y){return y.error(h)})},d=0,f=!1,m=new El.OperatorSubscriber(a,function(h){try{var y=e(h),_=u.get(y);if(!_){u.set(y,_=n?n():new az.Subject);var O=v(y,_);if(a.next(O),r){var P=El.createOperatorSubscriber(_,function(){_.complete(),P==null||P.unsubscribe()},void 0,void 0,function(){return u.delete(y)});m.add(iz.innerFrom(r(O)).subscribe(P))}}_.next(o?o(h):h)}catch(C){c(C)}},function(){return l(function(h){return h.complete()})},c,function(){return u.clear()},function(){return f=!0,d===0});i.subscribe(m);function v(h,y){var _=new nz.Observable(function(O){d++;var P=y.subscribe(O);return function(){P.unsubscribe(),--d===0&&f&&m.unsubscribe()}});return _.key=h,_}})}ha.groupBy=sz;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.isEmpty=void 0;var uz=q,cz=V;function lz(){return uz.operate(function(e,t){e.subscribe(cz.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}ga.isEmpty=lz;var ya={},Mn={},dz=g&&g.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.takeLast=void 0;var fz=Ge,pz=q,mz=V;function vz(e){return e<=0?function(){return fz.EMPTY}:pz.operate(function(t,r){var n=[];t.subscribe(mz.createOperatorSubscriber(r,function(i){n.push(i),e<n.length&&n.shift()},function(){var i,a;try{for(var o=dz(n),u=o.next();!u.done;u=o.next()){var l=u.value;r.next(l)}}catch(c){i={error:c}}finally{try{u&&!u.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}r.complete()},void 0,function(){n=null}))})}Mn.takeLast=vz;Object.defineProperty(ya,"__esModule",{value:!0});ya.last=void 0;var hz=et,gz=pt,yz=Mn,wz=or,bz=ir,Sz=ve;function Rz(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?gz.filter(function(i,a){return e(i,a,n)}):Sz.identity,yz.takeLast(1),r?bz.defaultIfEmpty(t):wz.throwIfEmpty(function(){return new hz.EmptyError}))}}ya.last=Rz;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});wa.materialize=void 0;var Wo=wi,_z=q,Oz=V;function Ez(){return _z.operate(function(e,t){e.subscribe(Oz.createOperatorSubscriber(t,function(r){t.next(Wo.Notification.createNext(r))},function(){t.next(Wo.Notification.createComplete()),t.complete()},function(r){t.next(Wo.Notification.createError(r)),t.complete()}))})}wa.materialize=Ez;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.max=void 0;var Tz=It,Cz=re;function Pz(e){return Tz.reduce(Cz.isFunction(e)?function(t,r){return e(t,r)>0?t:r}:function(t,r){return t>r?t:r})}ba.max=Pz;var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.flatMap=void 0;var Az=He;Sa.flatMap=Az.mergeMap;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.mergeMapTo=void 0;var Tl=He,Dz=re;function Iz(e,t,r){return r===void 0&&(r=1/0),Dz.isFunction(t)?Tl.mergeMap(function(){return e},t,r):(typeof t=="number"&&(r=t),Tl.mergeMap(function(){return e},r))}Ra.mergeMapTo=Iz;var _a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.mergeScan=void 0;var Nz=q,Fz=Ir;function Mz(e,t,r){return r===void 0&&(r=1/0),Nz.operate(function(n,i){var a=t;return Fz.mergeInternals(n,i,function(o,u){return e(a,o,u)},r,function(o){a=o},!1,void 0,function(){return a=null})})}_a.mergeScan=Mz;var Oa={},Ea={},qz=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},zz=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.merge=void 0;var Lz=q,$z=ft,Uz=rr,Cl=fe,xz=ke;function Vz(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Cl.popScheduler(e),n=Cl.popNumber(e,1/0);return e=$z.argsOrArgArray(e),Lz.operate(function(i,a){Uz.mergeAll(n)(xz.from(zz([i],qz(e)),r)).subscribe(a)})}Ea.merge=Vz;var Gz=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Bz=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.mergeWith=void 0;var kz=Ea;function Jz(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return kz.merge.apply(void 0,Bz([],Gz(e)))}Oa.mergeWith=Jz;var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.min=void 0;var Hz=It,Wz=re;function Qz(e){return Hz.reduce(Wz.isFunction(e)?function(t,r){return e(t,r)<0?t:r}:function(t,r){return t<r?t:r})}Ta.min=Qz;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.multicast=void 0;var Kz=Xt,Pl=re,Yz=Fr;function Xz(e,t){var r=Pl.isFunction(e)?e:function(){return e};return Pl.isFunction(t)?Yz.connect(t,{connector:r}):function(n){return new Kz.ConnectableObservable(n,r)}}Mr.multicast=Xz;var br={},Zz=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},jz=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(br,"__esModule",{value:!0});br.onErrorResumeNext=br.onErrorResumeNextWith=void 0;var eL=ft,tL=Sn;function If(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eL.argsOrArgArray(e);return function(n){return tL.onErrorResumeNext.apply(void 0,jz([n],Zz(r)))}}br.onErrorResumeNextWith=If;br.onErrorResumeNext=If;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.pairwise=void 0;var rL=q,nL=V;function iL(){return rL.operate(function(e,t){var r,n=!1;e.subscribe(nL.createOperatorSubscriber(t,function(i){var a=r;r=i,n&&t.next([a,i]),n=!0}))})}Ca.pairwise=iL;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.pluck=void 0;var aL=rt;function oL(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(r===0)throw new Error("list of properties cannot be empty.");return aL.map(function(n){for(var i=n,a=0;a<r;a++){var o=i==null?void 0:i[e[a]];if(typeof o<"u")i=o;else return}return i})}Pa.pluck=oL;var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.publish=void 0;var sL=de,uL=Mr,cL=Fr;function lL(e){return e?function(t){return cL.connect(e)(t)}:function(t){return uL.multicast(new sL.Subject)(t)}}Aa.publish=lL;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.publishBehavior=void 0;var dL=rn,fL=Xt;function pL(e){return function(t){var r=new dL.BehaviorSubject(e);return new fL.ConnectableObservable(t,function(){return r})}}Da.publishBehavior=pL;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.publishLast=void 0;var mL=Er,vL=Xt;function hL(){return function(e){var t=new mL.AsyncSubject;return new vL.ConnectableObservable(e,function(){return t})}}Ia.publishLast=hL;var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.publishReplay=void 0;var gL=Or,yL=Mr,Al=re;function wL(e,t,r,n){r&&!Al.isFunction(r)&&(n=r);var i=Al.isFunction(r)?r:void 0;return function(a){return yL.multicast(new gL.ReplaySubject(e,t,n),i)(a)}}Na.publishReplay=wL;var Fa={},bL=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},SL=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.raceWith=void 0;var RL=Jt,_L=q,OL=ve;function EL(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?_L.operate(function(r,n){RL.raceInit(SL([r],bL(e)))(n)}):OL.identity}Fa.raceWith=EL;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.repeat=void 0;var TL=Ge,CL=q,Dl=V,PL=k,AL=nt;function DL(e){var t,r=1/0,n;return e!=null&&(typeof e=="object"?(t=e.count,r=t===void 0?1/0:t,n=e.delay):r=e),r<=0?function(){return TL.EMPTY}:CL.operate(function(i,a){var o=0,u,l=function(){if(u==null||u.unsubscribe(),u=null,n!=null){var d=typeof n=="number"?AL.timer(n):PL.innerFrom(n(o)),f=Dl.createOperatorSubscriber(a,function(){f.unsubscribe(),c()});d.subscribe(f)}else c()},c=function(){var d=!1;u=i.subscribe(Dl.createOperatorSubscriber(a,void 0,function(){++o<r?u?l():d=!0:a.complete()})),d&&l()};c()})}Ma.repeat=DL;var qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.repeatWhen=void 0;var IL=k,NL=de,FL=q,Il=V;function ML(e){return FL.operate(function(t,r){var n,i=!1,a,o=!1,u=!1,l=function(){return u&&o&&(r.complete(),!0)},c=function(){return a||(a=new NL.Subject,IL.innerFrom(e(a)).subscribe(Il.createOperatorSubscriber(r,function(){n?d():i=!0},function(){o=!0,l()}))),a},d=function(){u=!1,n=t.subscribe(Il.createOperatorSubscriber(r,void 0,function(){u=!0,!l()&&c().next()})),i&&(n.unsubscribe(),n=null,i=!1,d())};d()})}qa.repeatWhen=ML;var za={};Object.defineProperty(za,"__esModule",{value:!0});za.retry=void 0;var qL=q,Nl=V,zL=ve,LL=nt,$L=k;function UL(e){e===void 0&&(e=1/0);var t;e&&typeof e=="object"?t=e:t={count:e};var r=t.count,n=r===void 0?1/0:r,i=t.delay,a=t.resetOnSuccess,o=a===void 0?!1:a;return n<=0?zL.identity:qL.operate(function(u,l){var c=0,d,f=function(){var m=!1;d=u.subscribe(Nl.createOperatorSubscriber(l,function(v){o&&(c=0),l.next(v)},void 0,function(v){if(c++<n){var h=function(){d?(d.unsubscribe(),d=null,f()):m=!0};if(i!=null){var y=typeof i=="number"?LL.timer(i):$L.innerFrom(i(v,c)),_=Nl.createOperatorSubscriber(l,function(){_.unsubscribe(),h()},function(){l.complete()});y.subscribe(_)}else h()}else l.error(v)})),m&&(d.unsubscribe(),d=null,f())};f()})}za.retry=UL;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.retryWhen=void 0;var xL=k,VL=de,GL=q,Fl=V;function BL(e){return GL.operate(function(t,r){var n,i=!1,a,o=function(){n=t.subscribe(Fl.createOperatorSubscriber(r,void 0,void 0,function(u){a||(a=new VL.Subject,xL.innerFrom(e(a)).subscribe(Fl.createOperatorSubscriber(r,function(){return n?o():i=!0}))),a&&a.next(u)})),i&&(n.unsubscribe(),n=null,i=!1,o())};o()})}La.retryWhen=BL;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.sample=void 0;var kL=k,JL=q,HL=me,Ml=V;function WL(e){return JL.operate(function(t,r){var n=!1,i=null;t.subscribe(Ml.createOperatorSubscriber(r,function(a){n=!0,i=a})),kL.innerFrom(e).subscribe(Ml.createOperatorSubscriber(r,function(){if(n){n=!1;var a=i;i=null,r.next(a)}},HL.noop))})}qn.sample=WL;var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.sampleTime=void 0;var QL=Ie,KL=qn,YL=bn;function XL(e,t){return t===void 0&&(t=QL.asyncScheduler),KL.sample(YL.interval(e,t))}$a.sampleTime=XL;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.scan=void 0;var ZL=q,jL=Tn;function e$(e,t){return ZL.operate(jL.scanInternals(e,t,arguments.length>=2,!0))}Ua.scan=e$;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.sequenceEqual=void 0;var t$=q,r$=V,n$=k;function i$(e,t){return t===void 0&&(t=function(r,n){return r===n}),t$.operate(function(r,n){var i=ql(),a=ql(),o=function(l){n.next(l),n.complete()},u=function(l,c){var d=r$.createOperatorSubscriber(n,function(f){var m=c.buffer,v=c.complete;m.length===0?v?o(!1):l.buffer.push(f):!t(f,m.shift())&&o(!1)},function(){l.complete=!0;var f=c.complete,m=c.buffer;f&&o(m.length===0),d==null||d.unsubscribe()});return d};r.subscribe(u(i,a)),n$.innerFrom(e).subscribe(u(a,i))})}xa.sequenceEqual=i$;function ql(){return{buffer:[],complete:!1}}var zn={},a$=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},o$=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(zn,"__esModule",{value:!0});zn.share=void 0;var Nf=k,s$=de,Ff=_r,u$=q;function c$(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new s$.Subject}:t,n=e.resetOnError,i=n===void 0?!0:n,a=e.resetOnComplete,o=a===void 0?!0:a,u=e.resetOnRefCountZero,l=u===void 0?!0:u;return function(c){var d,f,m,v=0,h=!1,y=!1,_=function(){f==null||f.unsubscribe(),f=void 0},O=function(){_(),d=m=void 0,h=y=!1},P=function(){var C=d;O(),C==null||C.unsubscribe()};return u$.operate(function(C,b){v++,!y&&!h&&_();var T=m=m??r();b.add(function(){v--,v===0&&!y&&!h&&(f=Qo(P,l))}),T.subscribe(b),!d&&v>0&&(d=new Ff.SafeSubscriber({next:function(S){return T.next(S)},error:function(S){y=!0,_(),f=Qo(O,i,S),T.error(S)},complete:function(){h=!0,_(),f=Qo(O,o),T.complete()}}),Nf.innerFrom(C).subscribe(d))})(c)}}zn.share=c$;function Qo(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var i=new Ff.SafeSubscriber({next:function(){i.unsubscribe(),e()}});return Nf.innerFrom(t.apply(void 0,o$([],a$(r)))).subscribe(i)}}var Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.shareReplay=void 0;var l$=Or,d$=zn;function f$(e,t,r){var n,i,a,o,u=!1;return e&&typeof e=="object"?(n=e.bufferSize,o=n===void 0?1/0:n,i=e.windowTime,t=i===void 0?1/0:i,a=e.refCount,u=a===void 0?!1:a,r=e.scheduler):o=e??1/0,d$.share({connector:function(){return new l$.ReplaySubject(o,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}Va.shareReplay=f$;var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.single=void 0;var p$=et,m$=hn,v$=vn,h$=q,g$=V;function y$(e){return h$.operate(function(t,r){var n=!1,i,a=!1,o=0;t.subscribe(g$.createOperatorSubscriber(r,function(u){a=!0,(!e||e(u,o++,t))&&(n&&r.error(new m$.SequenceError("Too many matching values")),n=!0,i=u)},function(){n?(r.next(i),r.complete()):r.error(a?new v$.NotFoundError("No matching values"):new p$.EmptyError)}))})}Ga.single=y$;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.skip=void 0;var w$=pt;function b$(e){return w$.filter(function(t,r){return e<=r})}Ba.skip=b$;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.skipLast=void 0;var S$=ve,R$=q,_$=V;function O$(e){return e<=0?S$.identity:R$.operate(function(t,r){var n=new Array(e),i=0;return t.subscribe(_$.createOperatorSubscriber(r,function(a){var o=i++;if(o<e)n[o]=a;else{var u=o%e,l=n[u];n[u]=a,r.next(l)}})),function(){n=null}})}ka.skipLast=O$;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.skipUntil=void 0;var E$=q,zl=V,T$=k,C$=me;function P$(e){return E$.operate(function(t,r){var n=!1,i=zl.createOperatorSubscriber(r,function(){i==null||i.unsubscribe(),n=!0},C$.noop);T$.innerFrom(e).subscribe(i),t.subscribe(zl.createOperatorSubscriber(r,function(a){return n&&r.next(a)}))})}Ja.skipUntil=P$;var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.skipWhile=void 0;var A$=q,D$=V;function I$(e){return A$.operate(function(t,r){var n=!1,i=0;t.subscribe(D$.createOperatorSubscriber(r,function(a){return(n||(n=!e(a,i++)))&&r.next(a)}))})}Ha.skipWhile=I$;var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.startWith=void 0;var Ll=tr,N$=fe,F$=q;function M$(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=N$.popScheduler(e);return F$.operate(function(n,i){(r?Ll.concat(e,n,r):Ll.concat(e,n)).subscribe(i)})}Wa.startWith=M$;var Qa={},sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.switchMap=void 0;var q$=k,z$=q,$l=V;function L$(e,t){return z$.operate(function(r,n){var i=null,a=0,o=!1,u=function(){return o&&!i&&n.complete()};r.subscribe($l.createOperatorSubscriber(n,function(l){i==null||i.unsubscribe();var c=0,d=a++;q$.innerFrom(e(l,d)).subscribe(i=$l.createOperatorSubscriber(n,function(f){return n.next(t?t(l,f,d,c++):f)},function(){i=null,u()}))},function(){o=!0,u()}))})}sr.switchMap=L$;Object.defineProperty(Qa,"__esModule",{value:!0});Qa.switchAll=void 0;var $$=sr,U$=ve;function x$(){return $$.switchMap(U$.identity)}Qa.switchAll=x$;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.switchMapTo=void 0;var Ul=sr,V$=re;function G$(e,t){return V$.isFunction(t)?Ul.switchMap(function(){return e},t):Ul.switchMap(function(){return e})}Ka.switchMapTo=G$;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.switchScan=void 0;var B$=sr,k$=q;function J$(e,t){return k$.operate(function(r,n){var i=t;return B$.switchMap(function(a,o){return e(i,a,o)},function(a,o){return i=o,o})(r).subscribe(n),function(){i=null}})}Ya.switchScan=J$;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.takeUntil=void 0;var H$=q,W$=V,Q$=k,K$=me;function Y$(e){return H$.operate(function(t,r){Q$.innerFrom(e).subscribe(W$.createOperatorSubscriber(r,function(){return r.complete()},K$.noop)),!r.closed&&t.subscribe(r)})}Xa.takeUntil=Y$;var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.takeWhile=void 0;var X$=q,Z$=V;function j$(e,t){return t===void 0&&(t=!1),X$.operate(function(r,n){var i=0;r.subscribe(Z$.createOperatorSubscriber(n,function(a){var o=e(a,i++);(o||t)&&n.next(a),!o&&n.complete()}))})}Za.takeWhile=j$;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.tap=void 0;var eU=re,tU=q,rU=V,nU=ve;function iU(e,t,r){var n=eU.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return n?tU.operate(function(i,a){var o;(o=n.subscribe)===null||o===void 0||o.call(n);var u=!0;i.subscribe(rU.createOperatorSubscriber(a,function(l){var c;(c=n.next)===null||c===void 0||c.call(n,l),a.next(l)},function(){var l;u=!1,(l=n.complete)===null||l===void 0||l.call(n),a.complete()},function(l){var c;u=!1,(c=n.error)===null||c===void 0||c.call(n,l),a.error(l)},function(){var l,c;u&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(c=n.finalize)===null||c===void 0||c.call(n)}))}):nU.identity}ja.tap=iU;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.throttle=void 0;var aU=q,xl=V,oU=k;function sU(e,t){return aU.operate(function(r,n){var i=t??{},a=i.leading,o=a===void 0?!0:a,u=i.trailing,l=u===void 0?!1:u,c=!1,d=null,f=null,m=!1,v=function(){f==null||f.unsubscribe(),f=null,l&&(_(),m&&n.complete())},h=function(){f=null,m&&n.complete()},y=function(O){return f=oU.innerFrom(e(O)).subscribe(xl.createOperatorSubscriber(n,v,h))},_=function(){if(c){c=!1;var O=d;d=null,n.next(O),!m&&y(O)}};r.subscribe(xl.createOperatorSubscriber(n,function(O){c=!0,d=O,!(f&&!f.closed)&&(o?_():y(O))},function(){m=!0,!(l&&c&&f&&!f.closed)&&n.complete()}))})}Ln.throttle=sU;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.throttleTime=void 0;var uU=Ie,cU=Ln,lU=nt;function dU(e,t,r){t===void 0&&(t=uU.asyncScheduler);var n=lU.timer(e,t);return cU.throttle(function(){return n},r)}eo.throttleTime=dU;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.TimeInterval=Sr.timeInterval=void 0;var fU=Ie,pU=q,mU=V;function vU(e){return e===void 0&&(e=fU.asyncScheduler),pU.operate(function(t,r){var n=e.now();t.subscribe(mU.createOperatorSubscriber(r,function(i){var a=e.now(),o=a-n;n=a,r.next(new Mf(i,o))}))})}Sr.timeInterval=vU;var Mf=function(){function e(t,r){this.value=t,this.interval=r}return e}();Sr.TimeInterval=Mf;var to={};Object.defineProperty(to,"__esModule",{value:!0});to.timeoutWith=void 0;var hU=Ie,gU=Ar,yU=ei;function wU(e,t,r){var n,i,a;if(r=r??hU.async,gU.isValidDate(e)?n=e:typeof e=="number"&&(i=e),t)a=function(){return t};else throw new TypeError("No observable provided to switch to");if(n==null&&i==null)throw new TypeError("No timeout provided.");return yU.timeout({first:n,each:i,scheduler:r,with:a})}to.timeoutWith=wU;var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.timestamp=void 0;var bU=di,SU=rt;function RU(e){return e===void 0&&(e=bU.dateTimestampProvider),SU.map(function(t){return{value:t,timestamp:e.now()}})}ro.timestamp=RU;var no={};Object.defineProperty(no,"__esModule",{value:!0});no.window=void 0;var Vl=de,_U=q,Gl=V,OU=me,EU=k;function TU(e){return _U.operate(function(t,r){var n=new Vl.Subject;r.next(n.asObservable());var i=function(a){n.error(a),r.error(a)};return t.subscribe(Gl.createOperatorSubscriber(r,function(a){return n==null?void 0:n.next(a)},function(){n.complete(),r.complete()},i)),EU.innerFrom(e).subscribe(Gl.createOperatorSubscriber(r,function(){n.complete(),r.next(n=new Vl.Subject)},OU.noop,i)),function(){n==null||n.unsubscribe(),n=null}})}no.window=TU;var io={},CU=g&&g.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(io,"__esModule",{value:!0});io.windowCount=void 0;var Bl=de,PU=q,AU=V;function DU(e,t){t===void 0&&(t=0);var r=t>0?t:e;return PU.operate(function(n,i){var a=[new Bl.Subject],o=0;i.next(a[0].asObservable()),n.subscribe(AU.createOperatorSubscriber(i,function(u){var l,c;try{for(var d=CU(a),f=d.next();!f.done;f=d.next()){var m=f.value;m.next(u)}}catch(y){l={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}var v=o-e+1;if(v>=0&&v%r===0&&a.shift().complete(),++o%r===0){var h=new Bl.Subject;a.push(h),i.next(h.asObservable())}},function(){for(;a.length>0;)a.shift().complete();i.complete()},function(u){for(;a.length>0;)a.shift().error(u);i.error(u)},function(){a=null}))})}io.windowCount=DU;var ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.windowTime=void 0;var IU=de,NU=Ie,FU=pe,MU=q,qU=V,zU=Be,LU=fe,kl=Je;function $U(e){for(var t,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=(t=LU.popScheduler(n))!==null&&t!==void 0?t:NU.asyncScheduler,o=(r=n[0])!==null&&r!==void 0?r:null,u=n[1]||1/0;return MU.operate(function(l,c){var d=[],f=!1,m=function(_){var O=_.window,P=_.subs;O.complete(),P.unsubscribe(),zU.arrRemove(d,_),f&&v()},v=function(){if(d){var _=new FU.Subscription;c.add(_);var O=new IU.Subject,P={window:O,subs:_,seen:0};d.push(P),c.next(O.asObservable()),kl.executeSchedule(_,a,function(){return m(P)},e)}};o!==null&&o>=0?kl.executeSchedule(c,a,v,o,!0):f=!0,v();var h=function(_){return d.slice().forEach(_)},y=function(_){h(function(O){var P=O.window;return _(P)}),_(c),c.unsubscribe()};return l.subscribe(qU.createOperatorSubscriber(c,function(_){h(function(O){O.window.next(_),u<=++O.seen&&m(O)})},function(){return y(function(_){return _.complete()})},function(_){return y(function(O){return O.error(_)})})),function(){d=null}})}ao.windowTime=$U;var oo={},UU=g&&g.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(oo,"__esModule",{value:!0});oo.windowToggle=void 0;var xU=de,VU=pe,GU=q,Jl=k,Ko=V,Hl=me,BU=Be;function kU(e,t){return GU.operate(function(r,n){var i=[],a=function(o){for(;0<i.length;)i.shift().error(o);n.error(o)};Jl.innerFrom(e).subscribe(Ko.createOperatorSubscriber(n,function(o){var u=new xU.Subject;i.push(u);var l=new VU.Subscription,c=function(){BU.arrRemove(i,u),u.complete(),l.unsubscribe()},d;try{d=Jl.innerFrom(t(o))}catch(f){a(f);return}n.next(u.asObservable()),l.add(d.subscribe(Ko.createOperatorSubscriber(n,c,Hl.noop,a)))},Hl.noop)),r.subscribe(Ko.createOperatorSubscriber(n,function(o){var u,l,c=i.slice();try{for(var d=UU(c),f=d.next();!f.done;f=d.next()){var m=f.value;m.next(o)}}catch(v){u={error:v}}finally{try{f&&!f.done&&(l=d.return)&&l.call(d)}finally{if(u)throw u.error}}},function(){for(;0<i.length;)i.shift().complete();n.complete()},a,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}oo.windowToggle=kU;var so={};Object.defineProperty(so,"__esModule",{value:!0});so.windowWhen=void 0;var JU=de,HU=q,Wl=V,WU=k;function QU(e){return HU.operate(function(t,r){var n,i,a=function(u){n.error(u),r.error(u)},o=function(){i==null||i.unsubscribe(),n==null||n.complete(),n=new JU.Subject,r.next(n.asObservable());var u;try{u=WU.innerFrom(e())}catch(l){a(l);return}u.subscribe(i=Wl.createOperatorSubscriber(r,o,o,a))};o(),t.subscribe(Wl.createOperatorSubscriber(r,function(u){return n.next(u)},function(){n.complete(),r.complete()},a,function(){i==null||i.unsubscribe(),n=null}))})}so.windowWhen=QU;var uo={},Ql=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Kl=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(uo,"__esModule",{value:!0});uo.withLatestFrom=void 0;var KU=q,Yl=V,YU=k,XU=ve,ZU=me,jU=fe;function ex(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=jU.popResultSelector(e);return KU.operate(function(n,i){for(var a=e.length,o=new Array(a),u=e.map(function(){return!1}),l=!1,c=function(f){YU.innerFrom(e[f]).subscribe(Yl.createOperatorSubscriber(i,function(m){o[f]=m,!l&&!u[f]&&(u[f]=!0,(l=u.every(XU.identity))&&(u=null))},ZU.noop))},d=0;d<a;d++)c(d);n.subscribe(Yl.createOperatorSubscriber(i,function(f){if(l){var m=Kl([f],Ql(o));i.next(r?r.apply(void 0,Kl([],Ql(m))):m)}}))})}uo.withLatestFrom=ex;var co={};Object.defineProperty(co,"__esModule",{value:!0});co.zipAll=void 0;var tx=Nr,rx=On;function nx(e){return rx.joinAllInternals(tx.zip,e)}co.zipAll=nx;var lo={},fo={},ix=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},ax=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(fo,"__esModule",{value:!0});fo.zip=void 0;var ox=Nr,sx=q;function ux(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sx.operate(function(r,n){ox.zip.apply(void 0,ax([r],ix(e))).subscribe(n)})}fo.zip=ux;var cx=g&&g.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},lx=g&&g.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(lo,"__esModule",{value:!0});lo.zipWith=void 0;var dx=fo;function fx(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return dx.zip.apply(void 0,lx([],cx(e)))}lo.zipWith=fx;(function(e){var t=g&&g.__createBinding||(Object.create?function(ur,cr,it,Mt){Mt===void 0&&(Mt=it),Object.defineProperty(ur,Mt,{enumerable:!0,get:function(){return cr[it]}})}:function(ur,cr,it,Mt){Mt===void 0&&(Mt=it),ur[Mt]=cr[it]}),r=g&&g.__exportStar||function(ur,cr){for(var it in ur)it!=="default"&&!Object.prototype.hasOwnProperty.call(cr,it)&&t(cr,ur,it)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=ie;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var i=Xt;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return i.ConnectableObservable}});var a=Yt;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return a.observable}});var o=li;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return o.animationFrames}});var u=de;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return u.Subject}});var l=rn;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return l.BehaviorSubject}});var c=Or;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return c.ReplaySubject}});var d=Er;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return d.AsyncSubject}});var f=nf;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return f.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return f.asapScheduler}});var m=Ie;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return m.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return m.asyncScheduler}});var v=sf;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return v.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return v.queueScheduler}});var h=uf;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return h.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return h.animationFrameScheduler}});var y=wr;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}});var _=nn;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return _.Scheduler}});var O=pe;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return O.Subscription}});var P=_r;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return P.Subscriber}});var C=wi;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return C.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return C.NotificationKind}});var b=lt;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return b.pipe}});var T=me;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return T.noop}});var S=ve;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return S.identity}});var A=Oi;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return A.isObservable}});var F=Ei;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return F.lastValueFrom}});var I=Ti;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return I.firstValueFrom}});var z=mn;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return z.ArgumentOutOfRangeError}});var U=et;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return U.EmptyError}});var $=vn;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return $.NotFoundError}});var L=tn;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return L.ObjectUnsubscribedError}});var G=hn;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return G.SequenceError}});var R=ei;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return R.TimeoutError}});var E=Zr;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return E.UnsubscriptionError}});var N=Ci;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return N.bindCallback}});var M=Pi;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return M.bindNodeCallback}});var W=Tt;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return W.combineLatest}});var H=tr;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return H.concat}});var Q=Ai;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return Q.connectable}});var he=nr;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return he.defer}});var Te=Ge;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return Te.empty}});var ye=Di;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return ye.forkJoin}});var ge=ke;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return ge.from}});var ze=Ii;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return ze.fromEvent}});var $r=Ni;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return $r.fromEventPattern}});var Ft=Fi;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return Ft.generate}});var Ur=Mi;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return Ur.iif}});var by=bn;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return by.interval}});var Sy=qi;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Sy.merge}});var Ry=vs;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return Ry.never}});var _y=Tr;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return _y.of}});var Oy=Sn;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Oy.onErrorResumeNext}});var Ey=zi;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return Ey.pairs}});var Ty=Li;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Ty.partition}});var Cy=Jt;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return Cy.race}});var Py=Ui;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return Py.range}});var Ay=pn;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Ay.throwError}});var Dy=nt;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Dy.timer}});var Iy=xi;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return Iy.using}});var Ny=Nr;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Ny.zip}});var Fy=an;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Fy.scheduled}});var My=Ge;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return My.EMPTY}});var qy=vs;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return qy.NEVER}}),r(Ef,e);var zy=Pt;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return zy.config}});var Ly=Rn;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return Ly.audit}});var $y=Vi;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return $y.auditTime}});var Uy=Gi;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Uy.buffer}});var xy=Bi;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return xy.bufferCount}});var Vy=ki;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return Vy.bufferTime}});var Gy=Ji;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return Gy.bufferToggle}});var By=Hi;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return By.bufferWhen}});var ky=Wi;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return ky.catchError}});var Jy=Qi;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Jy.combineAll}});var Hy=_n;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return Hy.combineLatestAll}});var Wy=Ki;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return Wy.combineLatestWith}});var Qy=Dr;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return Qy.concatAll}});var Ky=Cn;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return Ky.concatMap}});var Yy=Xi;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return Yy.concatMapTo}});var Xy=Zi;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return Xy.concatWith}});var Zy=Fr;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return Zy.connect}});var jy=ta;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return jy.count}});var ew=ra;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return ew.debounce}});var tw=na;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return tw.debounceTime}});var rw=ir;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return rw.defaultIfEmpty}});var nw=ia;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return nw.delay}});var iw=Pn;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return iw.delayWhen}});var aw=aa;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return aw.dematerialize}});var ow=oa;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return ow.distinct}});var sw=In;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return sw.distinctUntilChanged}});var uw=sa;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return uw.distinctUntilKeyChanged}});var cw=ua;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return cw.elementAt}});var lw=ca;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return lw.endWith}});var dw=la;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return dw.every}});var fw=da;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return fw.exhaust}});var pw=Nn;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return pw.exhaustAll}});var mw=Fn;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return mw.exhaustMap}});var vw=fa;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return vw.expand}});var hw=pt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return hw.filter}});var gw=pa;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return gw.finalize}});var yw=Ht;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return yw.find}});var ww=ma;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return ww.findIndex}});var bw=va;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return bw.first}});var Sw=ha;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Sw.groupBy}});var Rw=An;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Rw.ignoreElements}});var _w=ga;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return _w.isEmpty}});var Ow=ya;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Ow.last}});var Ew=rt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Ew.map}});var Tw=Dn;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Tw.mapTo}});var Cw=wa;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Cw.materialize}});var Pw=ba;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Pw.max}});var Aw=rr;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Aw.mergeAll}});var Dw=Sa;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Dw.flatMap}});var Iw=He;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Iw.mergeMap}});var Nw=Ra;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Nw.mergeMapTo}});var Fw=_a;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Fw.mergeScan}});var Mw=Oa;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Mw.mergeWith}});var qw=Ta;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return qw.min}});var zw=Mr;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return zw.multicast}});var Lw=jt;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Lw.observeOn}});var $w=br;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return $w.onErrorResumeNextWith}});var Uw=Ca;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Uw.pairwise}});var xw=Pa;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return xw.pluck}});var Vw=Aa;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Vw.publish}});var Gw=Da;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Gw.publishBehavior}});var Bw=Ia;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Bw.publishLast}});var kw=Na;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return kw.publishReplay}});var Jw=Fa;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return Jw.raceWith}});var Hw=It;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Hw.reduce}});var Ww=Ma;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return Ww.repeat}});var Qw=qa;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Qw.repeatWhen}});var Kw=za;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Kw.retry}});var Yw=La;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Yw.retryWhen}});var Xw=en;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Xw.refCount}});var Zw=qn;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Zw.sample}});var jw=$a;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return jw.sampleTime}});var eb=Ua;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return eb.scan}});var tb=xa;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return tb.sequenceEqual}});var rb=zn;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return rb.share}});var nb=Va;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return nb.shareReplay}});var ib=Ga;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return ib.single}});var ab=Ba;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return ab.skip}});var ob=ka;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return ob.skipLast}});var sb=Ja;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return sb.skipUntil}});var ub=Ha;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return ub.skipWhile}});var cb=Wa;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return cb.startWith}});var lb=er;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return lb.subscribeOn}});var db=Qa;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return db.switchAll}});var fb=sr;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return fb.switchMap}});var pb=Ka;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return pb.switchMapTo}});var mb=Ya;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return mb.switchScan}});var vb=ar;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return vb.take}});var hb=Mn;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return hb.takeLast}});var gb=Xa;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return gb.takeUntil}});var yb=Za;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return yb.takeWhile}});var wb=ja;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return wb.tap}});var bb=Ln;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return bb.throttle}});var Sb=eo;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Sb.throttleTime}});var Rb=or;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Rb.throwIfEmpty}});var _b=Sr;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return _b.timeInterval}});var Ob=ei;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Ob.timeout}});var Eb=to;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Eb.timeoutWith}});var Tb=ro;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Tb.timestamp}});var Cb=En;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Cb.toArray}});var Pb=no;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Pb.window}});var Ab=io;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Ab.windowCount}});var Db=ao;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Db.windowTime}});var Ib=oo;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Ib.windowToggle}});var Nb=so;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Nb.windowWhen}});var Fb=uo;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Fb.withLatestFrom}});var Mb=co;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Mb.zipAll}});var qb=lo;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return qb.zipWith}})})(le);class px extends le.Subject{constructor(t,r){super(),this.channel=t,this.browserWindow=r,_e.ipcMain.on(t,this.mainHandler.bind(this))}mainHandler(t,r){super.next(r)}next(t){this.browserWindow.webContents.send(this.channel,t)}error(t){super.error(t)}complete(){super.complete()}}function mx(e){async function t({id:r}){e.next({type:w.COM_PORT_LIST_RESPONSE,id:r,ports:await vr.SerialPort.list()})}return{serialPortListHandler:t}}const Xl=9600,Yo=new Map,Zl=e=>e instanceof Error&&"stderr"in e&&e.stderr instanceof Buffer?e.stderr.toString():e instanceof Error?e.message:"Unknown error in comPortMonitorHandler";function vx(e){async function t(r){switch(r.type){case w.START_COM_MONITOR_REQUEST:{const n={baudRate:Xl,...r.config},i=new vr.SerialPort({path:r.port,baudRate:Xl,...n});Yo.set(r.port,i),i.on("error",a=>{e.next({type:w.ERROR_RESPONSE,id:r.id,reason:Zl(a)}),console.error(a)}),i.on("open",()=>{console.log(`Port ${r.port} opened with baudRate ${n.baudRate}`),e.next({type:w.COM_MONITOR_INFO_RESPONSE,id:r.id,port:r.port,info:`Opened port ${r.port}`})}),i.on("data",a=>{console.log(`Received message from ${r.port}: ${a.toString()}`),e.next({type:w.COM_MONITOR_DATA_RESPONSE,id:r.id,port:r.port,data:a.toString()})});break}case w.STOP_COM_MONITOR_REQUEST:{const n=Yo.get(r.port);n!==void 0?n.close(i=>{i instanceof Error?e.next({type:w.ERROR_RESPONSE,id:r.id,reason:Zl(i)}):(console.log(`Port ${r.port} closed`),e.next({type:w.COM_MONITOR_INFO_RESPONSE,id:r.id,port:r.port,info:`Closed port ${r.port}`}))}):(console.error(`Can't close port ${r.port}. Port not open`),e.next({type:w.ERROR_RESPONSE,id:r.id,reason:`Can't close port ${r.port}. Port not open`}));break}case w.COM_MONITOR_SEND_DATA:{const n=Yo.get(r.port);n!==void 0?(n.write(r.data,void 0,i=>{i instanceof Error?(console.error(`Error writing to port ${r.port}: ${i.message}`),e.next({type:w.ERROR_RESPONSE,id:r.id,reason:`Error writing to port ${r.port}: ${i.message}`})):(console.log(`Sent data to port ${r.port}: ${r.data.toString()}`),e.next({type:w.COM_MONITOR_INFO_RESPONSE,id:r.id,port:r.port,info:`Sent data to port ${r.port}: ${r.data.toString()}`}))}),n.drain(i=>{i instanceof Error?(console.error(`Error draining port ${r.port}: ${i.message}`),e.next({type:w.ERROR_RESPONSE,id:r.id,reason:`Error draining port ${r.port}: ${i.message}`})):(console.log(`Drained port ${r.port}`),e.next({type:w.COM_MONITOR_INFO_RESPONSE,id:r.id,port:r.port,info:`Drained port ${r.port}`}))})):(console.error(`Can't send data to port ${r.port}. Port not open`),e.next({type:w.ERROR_RESPONSE,id:r.id,reason:`Can't send data to port ${r.port}. Port not open`}));break}default:console.error("Unknown message type",r.type)}}return{comPortMonitorHandler:t}}const po=e=>e===""||e===" "||e===".",qf=e=>parseInt(e,16),zf=(e,t=2)=>e.toString(16).padStart(t,"0").toUpperCase(),hx=(e,t)=>e.toString().padStart(t,"0");async function xe(e){await new Promise(t=>setTimeout(t,e))}function Lf(e){const t=[];for(let r=0;r<e.length;r+=2)t.push(parseInt(e.slice(r,r+2),16));return t}function $f(e){if(e.length===0)throw new Error("No QR Code provided");if(e=gx(e),e.length===47)return{identifierType:"ProductSerial",identifierValues:[e.slice(0,14)]};if(e.length===14)return{identifierType:"ProductSerial",identifierValues:[e]};if(e.startsWith("SN"))return{identifierType:"ProductSerial",identifierValues:[e.substring(2)]};if(e.startsWith("WIFI")){const r=/S:(.+?);/g.exec(e);if(r!=null)return{identifierType:"ProductSerial",identifierValues:[r[1].substring(2)]}}return{identifierType:"DataMatrixCode",identifierValues:[e]}}function gx(e){return["","","/",">"].some(r=>e.includes(r))&&(e=yx(e)),e.trim()}function xs({productSerial:e,additionalAttributes:t,deviceHash:r},n=pr.WIFI){switch(n){case pr.WIFI:{const i="SN"+e,a=t==null?void 0:t.wifiPassword;return`WIFI:T:WPA;S:${i};P:${a};;`}case pr.STANDARD:return`${e}-${r??"00000000000000000000000000000000"}`;default:throw new Error("Unknown QR code type")}}function yx(e){const t={Z:"Y",Y:"Z",:":",:";",:"-","/":"-",">":":","<":";"};let r="";for(let n=0;n<e.length;n++){const i=e[n];r+=t[i]??i}return r}function wx(e){return e===Pe.UNKNOWN?ct.flash.esp32c3:ct.flash[e]}function Fe(e,t){const r=wx(e).stages.find(n=>n.stage===t);if(r==null)throw new Error(`Unknown stage: ${t}`);return r}function ti(e){switch(e){case Pe.ESP32_C3:return ct.flash.esp32c3;case Pe.ESP32_S3:return ct.flash.esp32s3;default:throw new Error("Device type is not an ESP32")}}function bx(e){return`${e==null?void 0:e.product.model}-${e==null?void 0:e.product.variant.version}`}async function ae(e){var a;const r=e instanceof _d?await e.response.json():null,n=((a=r==null?void 0:r.meta)==null?void 0:a.code)??-1;return{msg:r!==null?r.data.message:e instanceof Error?e.message:typeof e=="string"?e:"Unknown error",code:n}}function vt(e,t="Unknown error"){return e instanceof Error?e.message:typeof e=="string"?e:t}const ri="0123456789ABCDEFGHJKLMNPQRSTUVWXYZ",jl=e=>{const t=ri.length;let r=0;for(let n=0;n<e.length;++n){const i=e[n],a=ri.indexOf(i);if(a===-1)throw new Error("Invalid character in input");r=r*t+a}return r},ed=(e,t)=>{const r=ri.length;let n="";for(;e>0;){const i=e%r;e=Math.floor(e/r),n=ri[i]+n}return n.padStart(t,"0")};function Ze(e){return{pc:jl(e.slice(0,6)),sn:jl(e.slice(6,14))}}function Vs(e,t){return ed(e,6)+ed(t,8)}function hs(e){if(e.length%2!==0)throw new Error("Hex string must have an even length");const t=e.length/2,r=new Uint8Array(t);for(let n=0;n<t;n++){const i=parseInt(e.substr(n*2,2),16);if(Number.isNaN(i))throw new Error("Hex string contains invalid characters");r[n]=i}return r}function Qr(e){const n=e.replaceAll(" ","").replaceAll("0x","").replaceAll(",","");return hs(n)}function kr(e,t=2){const r=Buffer.alloc(t);switch(t){case 1:return r.writeUInt8(e),r;case 2:return r.writeUInt16BE(e),r;case 4:return r.writeUInt32BE(e),r}}function Sx(e){if(e==null||e.length===0)throw new Error("No com port specified");return e}function Rx(e){if(e.length===0)throw new Error("Empty command")}function _x(e,t){const r=Object.entries(e);for(const[n,i]of r)if(i===t)return n}function Ox(e){const t="BL-APP-TH",r=new RegExp(`${t}\\[(.*)\\]`),n=e.match(r);return n!==null?n[1]:null}function Ex(e){async function t({id:r,comPort:n,baudRate:i,intervalInMs:a,durationInMs:o}){try{await Tx(n,i,a,o),e.next({type:w.COM_PORT_TEST_RESPONSE,id:r,message:"success"})}catch(u){const{msg:l}=await ae(u);e.next({type:w.ERROR_RESPONSE,id:r,reason:l})}}return{serialPortTestHandler:t}}const Tx=async(e,t=9600,r=500,n=6e3)=>{await new Promise((i,a)=>{const o=new vr.SerialPort({path:e,baudRate:t});o.on("error",u=>{a(u)}),o.on("open",()=>{console.log(`Port ${e} opened with baudRate ${t}`);const u=setInterval(()=>{o.write("Hello",l=>{l instanceof Error&&a(l)})},r);setTimeout(()=>{clearInterval(u),o.close(l=>{l instanceof Error?a(l):(console.log(`Port ${e} closed`),i())})},n)})})};var mo={},$n={},Oe={},Uf=De,td=Uf.spawn,Cx=Uf.exec,Px=function(e,t,r){if(typeof t=="function"&&r===void 0&&(r=t,t=void 0),e=parseInt(e),Number.isNaN(e)){if(r)return r(new Error("pid must be a number"));throw new Error("pid must be a number")}var n={},i={};switch(n[e]=[],i[e]=1,process.platform){case"win32":Cx("taskkill /pid "+e+" /T /F",r);break;case"darwin":gs(e,n,i,function(a){return td("pgrep",["-P",a])},function(){rd(n,t,r)});break;default:gs(e,n,i,function(a){return td("ps",["-o","pid","--no-headers","--ppid",a])},function(){rd(n,t,r)});break}};function rd(e,t,r){var n={};try{Object.keys(e).forEach(function(i){e[i].forEach(function(a){n[a]||(nd(a,t),n[a]=1)}),n[i]||(nd(i,t),n[i]=1)})}catch(i){if(r)return r(i);throw i}if(r)return r()}function nd(e,t){try{process.kill(parseInt(e,10),t)}catch(r){if(r.code!=="ESRCH")throw r}}function gs(e,t,r,n,i){var a=n(e),o="";a.stdout.on("data",function(c){var c=c.toString("ascii");o+=c});var u=function(l){if(delete r[e],l!=0){Object.keys(r).length==0&&i();return}o.match(/\d+/g).forEach(function(c){c=parseInt(c,10),t[e].push(c),t[c]=[],r[c]=1,gs(c,t,r,n,i)})};a.on("close",u)}var Ax=g&&g.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.listenTerminating=Oe.ShellError=Oe.spawnEnd=Oe.killProc=void 0;const Dx=le,Ix=Ax(Px);function Nx(e){if(e.stdout&&e.stdout.removeAllListeners(),e.stderr&&e.stderr.removeAllListeners(),e.removeAllListeners(),typeof e.pid=="number"){(0,Ix.default)(e.pid,"SIGKILL");return}e.kill("SIGKILL")}Oe.killProc=Nx;function Fx(e){const t=new Dx.Subject,r=[],n=[];return e.subscribe(i=>{i.type==="stdout"?r.push(i.chunk):n.push(i.chunk)},i=>t.error(i),()=>t.next({stdout:Buffer.concat(r),stderr:Buffer.concat(n)})),t}Oe.spawnEnd=Fx;class Mx extends Error{constructor(t,r,n,i){super(t),this.message=t,this.originError=r,this.stdout=n,this.stderr=i}toAnnotatedString(){let t=`
-----* MESSAGE *-----
${this.message}
---------------------`;return this.originError&&(t+=`
-----* ERROR *-------
${JSON.stringify(this.originError,void 0,2)}
---------------------`),this.stdout&&(t+=`
-----* STDOUT *------
${this.stdout.toString("utf8")}
---------------------`),this.stderr&&(t+=`
-----* STDERR *------
${this.stderr.toString("utf8")}
---------------------`),t}}Oe.ShellError=Mx;function qx(e,t=["SIGINT","SIGBREAK"]){return t.forEach(r=>process.on(r,e)),process.on("exit",e),()=>{t.forEach(r=>process.off(r,e)),process.off("exit",e)}}Oe.listenTerminating=qx;Object.defineProperty($n,"__esModule",{value:!0});$n.exec=void 0;const zx=De,Lx=le,Xo=Oe;function $x(e,t,r){return new Lx.Observable(n=>{const i=(0,zx.exec)(e,t,(o,u,l)=>{if(o){n.error(new Xo.ShellError("process exited with an error",o,u,l));return}n.next({stdout:u,stderr:l}),n.complete()}),a=(0,Xo.listenTerminating)(()=>n.complete());return r&&r(i),()=>{(0,Xo.killProc)(i),a()}})}$n.exec=$x;var vo={};Object.defineProperty(vo,"__esModule",{value:!0});vo.execFile=void 0;const Ux=De,xx=le,Zo=Oe;function Vx(e,t,r){return new xx.Observable(n=>{const i=(0,Ux.execFile)(e,t&&t.map(String),r,(o,u,l)=>{if(o){n.error(new Zo.ShellError("process exited with an error",o,u,l));return}n.next({stdout:u,stderr:l}),n.complete()}),a=(0,Zo.listenTerminating)(()=>n.complete());return()=>{(0,Zo.killProc)(i),a()}})}vo.execFile=Vx;var ho={};Object.defineProperty(ho,"__esModule",{value:!0});ho.fork=void 0;const Gx=De,id=le,Jn=Oe;function Bx(e,t,r){return new id.Observable(n=>{const i=(0,Gx.fork)(e,t&&t.map(String),r),a=[];r&&r.send instanceof id.Subject&&a.push(r.send.subscribe(u=>i.send(u))),i.on("message",u=>n.next(u)),i.on("error",u=>{process.exitCode=1,n.error(new Jn.ShellError("process exited with an error",u))}),i.on("close",(u,l)=>{if(a.forEach(c=>c.unsubscribe()),u!==0){process.exitCode=typeof u=="number"?u:void 0,n.error(new Jn.ShellError(`process exited with code: ${u}`,{code:u,signal:l}));return}n.complete()});const o=(0,Jn.listenTerminating)(()=>n.complete());return()=>{a.forEach(u=>u.unsubscribe()),(0,Jn.killProc)(i),o()}})}ho.fork=Bx;var go={};Object.defineProperty(go,"__esModule",{value:!0});go.spawn=void 0;const kx=De,Jx=le,Hn=Oe;function Hx(e,t,r,n){return new Jx.Observable(i=>{const a=(0,kx.spawn)(e,t?t.map(String):[],r),o=[],u=[];a.stdout&&a.stdout.on("data",c=>{o.push(c),i.next({type:"stdout",chunk:c})}),a.stderr&&a.stderr.on("data",c=>{u.push(c),i.next({type:"stderr",chunk:c})}),a.on("error",c=>{process.exitCode=1,i.error(new Hn.ShellError("process exited with an error",c,Buffer.concat(o),Buffer.concat(u)))}),a.on("close",(c,d)=>{if(c>0){process.exitCode=c,i.error(new Hn.ShellError(`process exited with code ${c}`,{code:c,signal:d},Buffer.concat(o),Buffer.concat(u)));return}i.complete()});const l=(0,Hn.listenTerminating)(()=>i.complete());return n&&n(a),()=>{(0,Hn.killProc)(a),l()}})}go.spawn=Hx;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.isExecOutput=Wt.isSpawnChunk=void 0;function Wx(e){return!!e&&typeof e.type=="string"&&Buffer.isBuffer(e.chunk)}Wt.isSpawnChunk=Wx;function Qx(e){return!!e&&(Buffer.isBuffer(e.stdout)||typeof e.stdout=="string")&&(Buffer.isBuffer(e.stderr)||typeof e.stderr=="string")}Wt.isExecOutput=Qx;var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.execWithStdin=qe.throwIfStderr=qe.throwIfStdout=qe.throwIf=qe.trim=void 0;const Un=le,Kx=$n,ni=Wt,Wn=Oe;function Yx(e="utf8"){return function(r){return Un.Observable.create(n=>r.subscribe(a=>{(0,ni.isSpawnChunk)(a)?n.next({type:a.type,chunk:Buffer.from(String(a.chunk).trim(),e)}):(0,ni.isExecOutput)(a)?n.next({stdout:Buffer.isBuffer(a.stdout)?Buffer.from(a.stdout.toString(e).trim()):a.stdout.trim(),stderr:Buffer.isBuffer(a.stderr)?Buffer.from(a.stderr.toString(e).trim()):a.stderr.trim()}):n.next(a)},a=>n.error(a),()=>n.complete()))}}qe.trim=Yx;var Ye;(function(e){e[e.STDOUT=1]="STDOUT",e[e.STDERR=2]="STDERR"})(Ye||(Ye={}));function Gs(e,t,r,n){if((0,ni.isSpawnChunk)(t)){if(n&Ye.STDOUT&&t.type==="stdout"&&r.test(t.chunk.toString())){e.error(new Wn.ShellError(`throwIf: stdout is matching ${r}`,void 0,t.chunk));return}if(n&Ye.STDERR&&t.type==="stderr"&&r.test(t.chunk.toString())){e.error(new Wn.ShellError(`throwIf: stderr is matching ${r}`,void 0,void 0,t.chunk));return}e.next(t);return}else if((0,ni.isExecOutput)(t)){if(n&Ye.STDOUT&&r.test(t.stdout.toString())){e.error(new Wn.ShellError(`throwIf: stdout is matching ${r}`,void 0,t.stdout));return}if(n&Ye.STDERR&&r.test(t.stderr.toString())){e.error(new Wn.ShellError(`throwIf: stderr is matching ${r}`,void 0,void 0,t.stderr));return}e.next(t);return}e.next(t)}function Xx(e){const t=typeof e=="string"?new RegExp(e):e;return function(n){return Un.Observable.create(i=>n.subscribe(o=>Gs(i,o,t,Ye.STDOUT|Ye.STDERR),o=>i.error(o),()=>i.complete()))}}qe.throwIf=Xx;function Zx(e){const t=typeof e=="string"?new RegExp(e):e;return function(n){return Un.Observable.create(i=>n.subscribe(o=>Gs(i,o,t,Ye.STDOUT),o=>i.error(o),()=>i.complete()))}}qe.throwIfStdout=Zx;function jx(e){const t=typeof e=="string"?new RegExp(e):e;return function(n){return Un.Observable.create(i=>n.subscribe(o=>Gs(i,o,t,Ye.STDERR),o=>i.error(o),()=>i.complete()))}}qe.throwIfStderr=jx;function eV(e,t){return function(n){return n.pipe((0,Un.mergeMap)(i=>(0,Kx.exec)(e,t,a=>{var o,u;(o=a.stdin)===null||o===void 0||o.write(i),(u=a.stdin)===null||u===void 0||u.end()})))}}qe.execWithStdin=eV;(function(e){var t=g&&g.__createBinding||(Object.create?function(a,o,u,l){l===void 0&&(l=u),Object.defineProperty(a,l,{enumerable:!0,get:function(){return o[u]}})}:function(a,o,u,l){l===void 0&&(l=u),a[l]=o[u]}),r=g&&g.__exportStar||function(a,o){for(var u in a)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&t(o,a,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.listenTerminating=e.ShellError=e.spawnEnd=e.execWithStdin=e.throwIfStderr=e.throwIfStdout=e.throwIf=e.trim=void 0,r($n,e),r(vo,e),r(ho,e),r(go,e),r(Wt,e);var n=qe;Object.defineProperty(e,"trim",{enumerable:!0,get:function(){return n.trim}}),Object.defineProperty(e,"throwIf",{enumerable:!0,get:function(){return n.throwIf}}),Object.defineProperty(e,"throwIfStdout",{enumerable:!0,get:function(){return n.throwIfStdout}}),Object.defineProperty(e,"throwIfStderr",{enumerable:!0,get:function(){return n.throwIfStderr}}),Object.defineProperty(e,"execWithStdin",{enumerable:!0,get:function(){return n.execWithStdin}});var i=Oe;Object.defineProperty(e,"spawnEnd",{enumerable:!0,get:function(){return i.spawnEnd}}),Object.defineProperty(e,"ShellError",{enumerable:!0,get:function(){return i.ShellError}}),Object.defineProperty(e,"listenTerminating",{enumerable:!0,get:function(){return i.listenTerminating}})})(mo);const xf=process.env.NODE_ENV==="development";function dt(e){const t=xf?"":"resources/app";return Qe.join(t,e)}function ii(e){const t=xf?process.cwd():_e.app.getPath("userData");return Qe.join(t,e)}function ai(e){return mo.spawn("powershell.exe",["-Command",dt(e)]).pipe(le.share())}function tV(e){return mo.spawn("powershell.exe",["-Command",e]).pipe(le.share())}function xn(e,t){return mo.spawn("powershell.exe",["-Command",`& '${e}'`,...t]).pipe(le.share())}function rV(e){async function t(r){const{id:n,comPortOrDeviceId:i,deviceType:a}=r,{bin:o,baud:u}=ti(a);e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.INFO,message:`Starting to erase flash for ${a} on ${i}`});const l=`${o} -p ${i} -b ${u} --chip ${a} erase_flash`;e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.INFO,message:`Command: ${l}`});const c=ai(l);c.subscribe({next:({chunk:d})=>{const f=d.toString().split(/\r?\n|\r|\n/g);for(const m of f)po(m)||e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.INFO,message:m})},error:d=>{e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.ERROR,message:d instanceof Error?d.message:"command failed"})},complete:()=>{e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.INFO,message:`Erased completed successfully for ${a} on ${i}`})}}),await le.lastValueFrom(c).catch()}return{esp32EraseHandler:t}}function nV(e){async function t(r){const{id:n,comPortOrDeviceId:i,deviceType:a}=r,{bin:o,voltage:u,speed:l}=ct.flash.microchip;e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.INFO,message:`Starting to erase flash for ${a} on ${i}`});const c=[`-TS${i}`,`-P${yt}`,`-OAS${l}`,`-W${u}`,"-E"];e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.INFO,message:`Command: ${o} ${c.join(" ")}`});const d=xn(o,c);d.subscribe({next:({chunk:f})=>{const m=f.toString().split(/\r?\n|\r|\n/g);for(const v of m)po(v)||e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.INFO,message:v})},error:f=>{e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.ERROR,message:f instanceof Error?f.message:"command failed"})},complete:()=>{e.next({type:w.FLASH_LOG_UPDATE,id:n,level:B.INFO,message:`Erased completed successfully for ${a} on ${i}`})}}),await le.lastValueFrom(d).catch()}return{microchipEraseHandler:t}}function iV(e){if(e<0||e>31)throw new Error("Input must be between 0 and 31.");return e>=0&&e<=9?String.fromCharCode(e+48):String.fromCharCode(e-10+65)}async function aV(e){const t=Ts.createReadStream(e),r=Jb.createInterface({input:t});let n=0,i=0,a="";for await(const _ of r)n===i+1&&(a=_),_.includes(":020000040100F9")&&(i=n),n++;const o=a.slice(11,13),u=a.slice(9,11),l=a.slice(19,21),c=a.slice(17,19),d=parseInt(`${o}${u}${l}${c}`,16),f=a.slice(25,27),m=a.slice(23,25),v=a.slice(35,37),h=a.slice(33,35),y=parseInt(`${f}${m}${v}${h}`,16);return{serialNumber:d,productCode:y}}function Vf(e,t,r,n){return{next:({chunk:i})=>{const a=i.toString().split(/\r?\n|\r|\n/g);for(const o of a)po(o)||n.next({type:w.FLASH_LOG_UPDATE,id:e,level:B.INFO,message:o})},error:i=>{n.next({type:w.FLASH_LOG_UPDATE,id:e,level:B.ERROR,message:i instanceof Error?i.message:"command failed"}),n.next({type:w.FLASH_STATUS_UPDATE,id:e,status:{group:t,stage:r,status:we.ERROR}})},complete:()=>{n.next({type:w.FLASH_STATUS_UPDATE,id:e,status:{group:t,stage:r,status:we.SUCCESS}})}}}function Gf(e,t,r,n,i){i.next({type:w.FLASH_LOG_UPDATE,id:t,level:B.ERROR,message:e instanceof Error?e.message:"Unknown error type"}),i.next({type:w.FLASH_STATUS_UPDATE,id:t,status:{group:r,stage:n,status:we.ERROR}})}function Bf(e,t,{id:r,productSerial:n},i,a){const o=a?Kr.join(Gt,"production",e):Kr.join(Gt,e),u=t===te.STORAGE||t===te.KEY?ii(`${Gt}/${n}/${e}`):ii(o);return i.next({type:w.FLASH_LOG_UPDATE,id:r,level:B.INFO,message:`Using binary file: ${u}`}),u}async function kf(e,t,r){const i=ii("dump.hex"),a=[`-TS${e}`,`-P${yt}`,`-W${r}`,"-OSO",`-GF"${i}"`],o=xn(t,a);return await le.lastValueFrom(o),await aV(i)}function Rr(e){const t=Kr.join(Gt,e);return ii(t)}async function Bs(e){const t=Rr(e);return await Ae.mkdir(t,{recursive:!0}),t}function Jf(e,t){async function r({id:u,productSerial:l,productionMode:c,deviceType:d}){try{const{binOutputFilePath:f,firmwareVersion:m,firmwareHash:v}=await n(l,u,c,d);e.next({type:w.GENERATE_NVS_CSV_RESPONSE,id:u,data:`Created output file:" ${f} and flashed with firmware: ${m} (${v})`})}catch(f){await o(f,u)}}async function n(u,l,c,d){var E,N,M;const{data:f}=await t.deviceList({deviceListRequest:{identifierType:"ProductSerial",identifierValues:[u]}}),m=f.devices[0];if(m===void 0)throw new Error("Could not find device with product serial "+u);if(((E=m.additionalAttributes)==null?void 0:E.wifiPassword)===void 0)throw new Error("Could not find wifi password for device with product serial "+u);const v=(N=m.additionalAttributes)==null?void 0:N.certificates;if(v===void 0)throw new Error("Could not find certificates for device with product serial "+u);const h=Fe(d,te.STORAGE),y=Rr(u),_=dt(EC),O=Qe.join(y,"output.csv"),P=Qe.join(y,h.filename??"storage.bin"),C=Qe.join(y,"cert.pem"),b=Qe.join(y,"key.pem"),T=Qe.join(y,"ca.pem"),S=globalThis.cachedFirmwareFiles.find(({productCode:W,fileType:H})=>W===Ze(u).pc&&H===Fe(d,te.APP).fileTypeId);if(S===void 0)throw new Error("Firmware App file not found in cache");const A=globalThis.cachedFirmwareFiles.find(({productCode:W,fileType:H})=>W===Ze(u).pc&&H===Fe(d,te.BOOTLOADER).fileTypeId);if(A===void 0)throw new Error("Firmware App file not found in cache");const F={manufacturerName:"Solarnative GmbH",manufacturingCode:new Date().toISOString(),serialNumber:m.serialNumber.toString(),productCode:m.product.productCode.toString(),hardwareVersion:m.product.variant.remarks??"",firmwareVersion:S.version,firmwareHash:qf(S.hash).toString(),bootloaderVersion:A.version,productName:`${m.product.name}`,wifiSsid:`SN${m.productSerial}`,wifiPassword:`${(M=m.additionalAttributes)==null?void 0:M.wifiPassword}`,wifiHostname:`SN-${m.product.model}-${m.productSerial}`,urlSendDataServer1:NC,urlSendDataServer2:FC,urlOtaServer1:MC,urlOtaServer2:qC,urlFallbackServer1:zC,urlFallbackServer2:LC,cert:C,key:b,ca:T};await i([{path:C,base64:v.cert},{path:b,base64:v.key},{path:T,base64:v.ca}]),await a(_,O,F);const I=dt("tools/nvs/nvs.exe"),z=Fe(d,te.KEY),U=Qe.join(y,z.filename??"key.bin"),$=c?`${I} encrypt ${O} ${P} 16384 --keygen --keyfile ${U}`:`${I} generate ${O} ${P} 16384`;e.next({type:w.FLASH_LOG_UPDATE,id:l,level:B.INFO,message:`Using command to generate config: ${$}`});const L=tV($);L.subscribe({next:({chunk:W})=>{const H=W.toString().split(/\r?\n|\r|\n/g);for(const Q of H)po(Q)||e.next({type:w.FLASH_LOG_UPDATE,id:l,level:B.INFO,message:Q})},error:W=>{o(W,l)},complete:()=>{e.next({type:w.FLASH_LOG_UPDATE,id:l,level:B.INFO,message:"NVS command complete"})}}),await le.lastValueFrom(L);const{firmwareVersion:G,firmwareHash:R}=F;return{binOutputFilePath:P,firmwareVersion:G,firmwareHash:R}}async function i(u){const l=u.map(async({path:c,base64:d})=>{const f=Buffer.from(d,"base64").toString("utf-8");await Ae.writeFile(c,f,{flag:"w+"})});return await Promise.all(l)}async function a(u,l,c){try{let f=await Ae.readFile(u,"utf-8");for(const[m,v]of Object.entries(c)){const h=new RegExp("\\$\\{"+m+"\\}","g");f=f.replace(h,v)}await Ae.writeFile(l,f,{flag:"w+"})}catch(d){console.error("An error occurred:",d)}}async function o(u,l){e.next({type:w.ERROR_RESPONSE,id:l,reason:(await ae(u)).msg})}return{generateNvsHandler:r,generateNvsCsv:n,generateCsv:a,nvsErrorHandler:o}}function Hf(e){const t=new Map;async function r({id:o,comPort:u}){if(u.length===0)throw new Error("No com port specified");try{const l=await i(u,o);console.log(`Closing port: ${u}`),await new Promise((c,d)=>{l.close(f=>{f instanceof Error?d(f):c()})}),e.next({type:w.SERIAL_PORT_CLOSE_RESPONSE,id:o,message:"CLOSED"}),l.removeAllListeners(),l.destroy(),t.delete(u)}catch(l){const{msg:c}=await ae(l);e.next({type:w.ERROR_RESPONSE,id:o,reason:c}),console.log(`Failed to close port ${u}. Reason: ${c}`)}}async function n({id:o,comPort:u,command:l,isResponseExpected:c,isListener:d}){try{const f=await i(u,o);if(f.removeAllListeners(),d){if(u.length===0)throw new Error("No com port specified");console.log(`Listening on ${u}`),f.on("data",v=>{e.next({type:w.SERIAL_PORT_RESPONSE,id:o,response:v})});return}if(u.length===0)throw new Error("No com port specified");if(l.length===0)throw new Error("Empty command");const m=await a(l,f,c);e.next({type:w.SERIAL_PORT_RESPONSE,id:o,response:m})}catch(f){const{msg:m}=await ae(f);e.next({type:w.ERROR_RESPONSE,id:o,reason:m}),console.log(`Failed to send command on ${u}. Reason: ${m}`)}}async function i(o,u){const l=t.get(o);if(l instanceof vr.SerialPort&&!l.destroyed){if(l.isOpen)return console.log(`Port is open. Reusing port: ${o}`),l;if(l.closed){console.log(`Port is closed. Opening port: ${o}`);try{return await new Promise((d,f)=>{l.open(m=>{m instanceof Error?f(m):d()})}),console.log(`Port opened: ${o}`),l}catch(d){const{msg:f}=await ae(d);e.next({type:w.ERROR_RESPONSE,id:u,reason:f}),l.removeAllListeners(),l.destroy(),t.delete(o)}}}console.log(`Opening new port: ${o}`);const c=await new Promise((d,f)=>{const m=new vr.SerialPort({path:o,baudRate:115200,autoOpen:!0},v=>{v instanceof Error?f(v):d(m)})});return console.log(`Port opened: ${o}`),t.set(o,c),c}async function a(o,u,l=!1,c=5e3,d="\r"){return await new Promise((f,m)=>{if(u===null){m(new Error("Port is null"));return}if(u.on("error",h=>{m(h)}),l){const h=setTimeout(()=>{m(new Error(`Timeout after ${c} ms`))},c),y=Buffer.from([2,0,0,1,0,51,49]);u.on("data",_=>{if(_.equals(y)){console.log("Received ack",_);return}clearTimeout(h),f(_)})}const v=o instanceof Uint8Array?o:o+d;u.write(v,h=>{h instanceof Error&&m(h),l||f(Buffer.alloc(0))})})}return{serialPortCloseHandler:r,serialPortHandler:n}}const{newMsgId:Qn}=ME();function oV(e,t){const{generateNvsCsv:r}=Jf(e,t),{serialPortHandler:n,serialPortCloseHandler:i}=Hf(e);async function a(l){const{id:c,deviceType:d,comPortOrDeviceId:f,comPortFlashModeController:m,flashModeController:v,stage:h,productionMode:y,productSerial:_,slotId:O,dryRun:P}=l,{stages:C}=ti(d),b=iV(O),T=await Bs(_);if(e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Created ${Gt} directory: ${T}`}),v&&m.length===0){e.next({type:w.ERROR_RESPONSE,id:c,reason:"Production mode is enabled with an empty Flash Controller COM port"});return}v&&(e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Initializing flash controller on ${m}`}),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Setting IO9 to GND in slot ${O+1} using command 'relay off ${b}'`}),await n({type:w.SERIAL_PORT_REQUEST,id:Qn(),command:`relay off ${b}`,comPort:m,isResponseExpected:!1,isListener:!1})),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Starting to flash ${d} on ${f}`}),e.next({type:w.FLASH_STATE_UPDATE,id:c,state:Ne.STARTED});try{if(!P&&f==="")throw new Error(`COM port is required to flash ${d}`);for(const S of C){const A=h!=null&&h!==S.stage,F=!y&&S.stage===te.KEY;if(A||F){e.next({type:w.FLASH_STATUS_UPDATE,id:c,status:{group:se.FLASH,stage:S.stage,status:we.SKIPPED}}),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Skipping flash stage: ${S.stage} `});continue}e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Flash stage: ${S.stage} `}),await o(l,f,S,se.FLASH)}for(const S of C){const A=h!=null&&h!==S.stage,F=!S.verify,I=!y&&S.stage===te.KEY;if(A||F||I){e.next({type:w.FLASH_STATUS_UPDATE,id:c,status:{group:se.VERIFY,stage:S.stage,status:we.SKIPPED}}),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Skipping verify stage: ${S.stage} `});continue}e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Verify stage: ${S.stage} `}),await o(l,f,S,se.VERIFY),v&&S.stage===te.APP&&(e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Setting IO9 to OPEN in slot ${O+1} using command 'relay on ${b}'`}),await n({type:w.SERIAL_PORT_REQUEST,id:Qn(),command:`relay on ${b}`,comPort:m,isResponseExpected:!1,isListener:!1}),await xe(100),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:"Sending run command "}),await o(l,f,S,se.VERIFY,!0),await xe(2e4),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Setting IO9 to GND in slot ${O+1} using command 'relay off ${b}'`}),await n({type:w.SERIAL_PORT_REQUEST,id:Qn(),command:`relay off ${b}`,comPort:m,isResponseExpected:!1,isListener:!1}))}}catch(S){e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.ERROR,message:S instanceof Error?S.message:"flash failed"}),e.next({type:w.FLASH_STATE_UPDATE,id:c,state:Ne.FAILED});return}e.next({type:w.FLASH_STATE_UPDATE,id:c,state:Ne.SUCCEEDED}),v&&(e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Closing flash controller on ${m}`}),await i({type:w.SERIAL_PORT_CLOSE_REQUEST,id:Qn(),comPort:m}));try{const S=ut.FLASHED,A=await u(_,y,d),F=y?"Production":"Development",I=globalThis.cachedFirmwareFiles.find(({productCode:z,fileType:U})=>z===Ze(_).pc&&U===Fe(d,te.APP).fileTypeId);if(I===void 0)throw new Error("Firmware file not found in cache");await t.modifyDevice({modifyDeviceRequest:{productSerial:_,deviceStatusId:S,deviceFirmwareKey:A,firmwareReleaseId:I.releaseId,remarks:`${F} firmware ${I.version} with hash ${I.hash} flashed successfully at ${new Date().toISOString()}`}}),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Updated database for ${_} `})}catch(S){const{msg:A}=await ae(S);e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.ERROR,message:`Device Modify Failed: ${A}`}),e.next({type:w.FLASH_STATE_UPDATE,id:c,state:Ne.FAILED})}}async function o(l,c,{stage:d,address:f,filename:m},v,h=!1){const{id:y,productSerial:_,deviceType:O,productionMode:P,dryRun:C}=l,{bin:b,baud:T}=ti(O);e.next({type:w.FLASH_STATUS_UPDATE,id:y,status:{group:v,stage:d,status:we.RUNNING}});let S=null;try{if(d===te.KEY||d===te.STORAGE){if(m===void 0)throw new Error(`Filename for ${d} stage is required`);S=Bf(m,d,l,e,P)}else{const z=globalThis.cachedFirmwareFiles.find(({productCode:L,fileType:G})=>L===Ze(_).pc&&G===Fe(O,d).fileTypeId);if(z===void 0)throw new Error("Firmware file not found in cache");const U=Rr(_),$=fr.join(U,"firmware");S=fr.join($,z.fileName),v===se.FLASH&&(await Ae.mkdir($,{recursive:!0}),await Ae.writeFile(S,z.content,{encoding:z.encoding}))}if(v===se.FLASH&&d===te.STORAGE){const{binOutputFilePath:z,firmwareVersion:U,firmwareHash:$}=await r(_,y,P,O);e.next({type:w.FLASH_LOG_UPDATE,id:y,level:B.INFO,message:`Generated NVS:" ${z} and flashed with firmware: ${U} (${$})`})}let A;switch(v){case se.FLASH:{const z=[`-p ${c}`,`-b ${T}`,`--chip ${O}`,"--before default_reset","--after hard_reset","write_flash","--flash_mode dio","--flash_size keep","--flash_freq 80m",`--force ${f}`,S];A=`${b} ${z.join(" ")}`;break}case se.VERIFY:h?A=`${b} -p ${c} -b ${T} run`:A=`${b} -p ${c} -b ${T} --chip ${O} verify_flash ${f} ${S}`;break;default:throw new Error("Unknown flash group")}if(e.next({type:w.FLASH_LOG_UPDATE,id:y,level:B.INFO,message:`Command: ${A}`}),C){e.next({type:w.FLASH_LOG_UPDATE,id:y,level:B.INFO,message:"Dry run enabled, skipping command execution"}),e.next({type:w.FLASH_STATUS_UPDATE,id:y,status:{group:v,stage:d,status:we.SUCCESS}});return}const F=ai(A),I=Vf(y,v,d,e);F.subscribe(I),await le.lastValueFrom(F)}catch(A){throw Gf(A,y,v,d,e),A}finally{v===se.VERIFY&&S!==null&&!C&&await Ae.rm(S,{force:!0,recursive:!0})}}async function u(l,c,d){if(c){const{filename:f}=Fe(d,te.KEY);if(f===void 0)throw new Error("Filename required for device firmware key");const m=Rr(l),v=fr.join(m,f);return(await Ae.readFile(v)).toString("hex")}}return{esp32FlashHandler:a}}let ys=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];typeof Int32Array<"u"&&(ys=new Int32Array(ys));const sV=(e,t=0)=>{let r=~~t;for(let n=0;n<e.length;n++)r=ys[(r^e[n])&255]&255;return r},uV=(e,t)=>Es.Buffer.from(e,t),ad=uV;function Wf(e,t){const r=(n,i)=>t(ad(n),i)>>>0;return r.signed=(n,i)=>t(ad(n),i),r.unsigned=r,r.model=e,r}const Qf=Wf("crc-8",sV),cV=e=>256-(e.reduce((r,n)=>r+n,0)&255)&255,od=(e,t)=>{const r=zf(e,8),n=Lf(r),i=Qf(Buffer.from(n));return[n[1],n[0],t,0,n[3],n[2],i,0]},lV=e=>{const t=Lf(e),r=Qf(Buffer.from(t));return[t[1],t[0],t[2],0,t[4],t[3],t[5],0,t[7],t[6],t[8],0,t[10],t[9],t[11],0,t[13],t[12],t[14],0,t[16],t[15],t[17],0,t[19],t[18],t[20],0,t[22],t[21],t[23],0,t[25],t[24],t[26],0,t[28],t[27],t[29],0,t[31],t[30],r,0]},dV=(e,t,r)=>{const n=od(e,1),i=od(t,2),a=lV(r),o=n.length+i.length+a.length,u=11776,l=0,c=u>>8&255,d=u&255,f=[o,c,d,l,...n,...i,...a],m=cV(f),v=[...f,m],h=":020000040100F9",y=`:${v.map(O=>zf(O)).join("")}`;return`${h}
${y}
:00000001FF`};async function fV(e,{serialNumber:t,productCode:r,encryptionKey:n}){const i=dV(t,r,n);await Ae.writeFile(e,i)}function Kf(e,t){async function r(o){const{id:u}=o;try{const l=await i(o);e.next({type:w.GENERATE_OTP_RESPONSE,id:u,data:`Created output file:" ${l}`})}catch(l){await a(l,u)}}async function n(o){const{data:u}=await t.deviceList({deviceListRequest:{identifierType:"ProductSerial",identifierValues:[o]}}),l=u.devices[0];if(l===void 0)throw new Error(`Could not find device with product serial ${o}`);return l}async function i({productSerial:o}){const{serialNumber:u,product:l,encryptionKey:c}=await n(o);if(c===void 0)throw new Error("Encryption key is undefined");const{productCode:d}=l,{filename:f}=Fe(Pe.MICROCHIP,te.STORAGE),m=Rr(o),v=Kr.join(m,f??"");return await fV(v,{serialNumber:u,productCode:d,encryptionKey:c}),v}async function a(o,u){e.next({type:w.ERROR_RESPONSE,id:u,reason:(await ae(o)).msg})}return{generateOtpHandler:r,generateOtp:i,otpErrorHandler:a}}function pV(e,t){const{stages:r,bin:n,voltage:i}=ct.flash.microchip,{generateOtp:a}=Kf(e,t);async function o(l){const{id:c,deviceType:d,comPortOrDeviceId:f,stage:m,eraseBeforeFlash:v,productSerial:h,productionMode:y,retryWithoutOtp:_,dryRun:O}=l,P=await Bs(h);e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Created ${Gt} directory: ${P}`});try{if(!O&&f==="")throw new Error(`PicKit is required to flash ${d}`);e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Starting to flash ${f}`}),e.next({type:w.FLASH_STATE_UPDATE,id:c,state:Ne.STARTED});for(const C of r){if(m!=null&&m!==C.stage){e.next({type:w.FLASH_STATUS_UPDATE,id:c,status:{group:se.FLASH,stage:C.stage,status:we.SKIPPED}}),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Skipping flash stage: ${C.stage} `});continue}e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Flash stage: ${C.stage} `}),v&&await u(l,f,C,se.FLASH,{erase:!0});const b=await u(l,f,C,se.FLASH);if(b&&_){e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:"Now attempting retry without OTP "}),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:"Checking if OTP and loaded product serial match "});const{productCode:T,serialNumber:S}=await kf(f,n,i),A=Vs(T,S),{pc:F,sn:I}=Ze(h);if(A!==h)throw new Error(`Product serial mismatch: The loaded product serial ${h} number does not match the device ${A}. The device has been flashed with the wrong serial number, discard it  PCB PC:${T} SN:${S} != Slot PC:${F} SN:${I} `);e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:"Product serials match "}),await u(l,f,C,se.FLASH,{retry:!0})}if(b&&!_)throw new Error("Device has already been flashed. To re-flash the device enable 'Retry without OTP' in the settings.")}for(const C of r){const b=m!=null&&m!==C.stage,T=!C.verify;if(b||T){e.next({type:w.FLASH_STATUS_UPDATE,id:c,status:{group:se.VERIFY,stage:C.stage,status:we.SKIPPED}}),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Skipping verify stage: ${C.stage} `});continue}e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Verify stage: ${C.stage} `}),await u(l,f,C,se.VERIFY,{release:!0}),await u(l,f,C,se.VERIFY,{release:!1})}}catch(C){const{msg:b}=await ae(C);e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.ERROR,message:`Error: ${b}`}),e.next({type:w.FLASH_STATE_UPDATE,id:c,state:Ne.FAILED}),await t.modifyDevice({modifyDeviceRequest:{productSerial:h,deviceStatusId:ut.DEFECT,remarks:b}});return}e.next({type:w.FLASH_STATE_UPDATE,id:c,state:Ne.SUCCEEDED});try{const C=ut.FLASHED,b=y?"Production":"Development";if(m===void 0)throw new Error("Stage is undefined");const T=globalThis.cachedFirmwareFiles.find(({productCode:S,fileType:A})=>S===Ze(h).pc&&A===Fe(d,te.APP).fileTypeId);if(T===void 0)throw new Error("Firmware file not found in cache");await t.modifyDevice({modifyDeviceRequest:{productSerial:h,deviceStatusId:C,firmwareReleaseId:T.releaseId,remarks:`${b} firmware ${T.version} with hash ${T.hash} flashed successfully at ${new Date().toISOString()}`}}),e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.INFO,message:`Updated database for ${h} `})}catch(C){const{msg:b}=await ae(C);e.next({type:w.FLASH_LOG_UPDATE,id:c,level:B.ERROR,message:`Device Modify Failed: ${b}`}),e.next({type:w.FLASH_STATE_UPDATE,id:c,state:Ne.FAILED})}}async function u(l,c,{stage:d},f,m={}){const v={retry:!1,erase:!1,release:!1},{retry:h,erase:y,release:_}={...v,...m},{id:O,productSerial:P,deviceType:C,productionMode:b,flashSpeed:T,dryRun:S}=l;e.next({type:w.FLASH_STATUS_UPDATE,id:O,status:{group:f,stage:d,status:we.RUNNING}});let A=null;try{if(f===se.FLASH&&d===te.STORAGE){const E=await a({type:w.GENERATE_OTP_REQUEST,id:O,productSerial:P});return await xe(600),e.next({type:w.FLASH_LOG_UPDATE,id:O,level:B.INFO,message:`Generated Config: ${E}`}),e.next({type:w.FLASH_STATUS_UPDATE,id:O,status:{group:f,stage:d,status:we.SUCCESS}}),!1}if(d!==te.APP)throw new Error(`Unsupported flash stage: ${d}`);const F=globalThis.cachedFirmwareFiles.find(({productCode:E,fileType:N})=>E===Ze(P).pc&&N===Fe(C,d).fileTypeId);if(F===void 0)throw new Error("Firmware file not found in cache");const I=Rr(P),z=fr.join(I,"firmware");A=fr.join(z,F.fileName),f===se.FLASH&&(await Ae.mkdir(z,{recursive:!0}),await Ae.writeFile(A,F.content,{encoding:F.encoding}));const{filename:U}=Fe(C,te.STORAGE);if(U===void 0)throw new Error(`Filename is required for device type ${C}`);const $=Bf(U,te.STORAGE,l,e,b);let L=[];if(y)L=L.concat(`-TS${c}`,`-P${yt}`,`-OAS${T}`,`-W${i}`,"-E");else switch(f){case se.FLASH:h?L=L.concat(`-TS${c}`,`-P${yt}`,`-F"${A}"`,`-OAS${T}`,`-W${i}`,"-M"):L=L.concat(`-TS${c}`,`-P${yt}`,`-F"${A}"`,`-S"${$}"`,`-OAS${T}`,`-W${i}`,"-OSO","-M");break;case se.VERIFY:_?L=L.concat(`-TS${c}`,`-P${yt}`,`-OAS${T}`,`-W${i}`,"-OK","-OL"):L=L.concat(`-TS${c}`,`-P${yt}`,`-OAS${T}`,`-W${i}`,"-OK");break;default:throw new Error("Unknown flash group")}if(e.next({type:w.FLASH_LOG_UPDATE,id:O,level:B.INFO,message:`Command: ${n} ${L.join(" ")}`}),S)return e.next({type:w.FLASH_LOG_UPDATE,id:O,level:B.INFO,message:"Dry run enabled, skipping command execution"}),e.next({type:w.FLASH_STATUS_UPDATE,id:O,status:{group:f,stage:d,status:we.SUCCESS}}),!1;const G=xn(n,L),R=Vf(O,f,d,e);return G.subscribe(R),await le.lastValueFrom(G),!1}catch(F){const I=F.stdout,z=I instanceof Buffer?I.toString():"",U=z.includes("Programming/Verify complete"),$=z.includes("expected 0x00ffffff");if(U||$){const L=$?"OTP has already been flashed once ":"Flashing successful ";return e.next({type:w.FLASH_LOG_UPDATE,id:O,level:U?B.INFO:B.WARN,message:L}),e.next({type:w.FLASH_STATUS_UPDATE,id:O,status:{group:f,stage:d,status:U?we.SUCCESS:we.WARNING}}),$}throw Gf(F,O,f,d,e),F}finally{f===se.VERIFY&&A!==null&&!S&&await Ae.rm(A,{force:!0,recursive:!0})}}return{microchipFlashHandler:o}}function Yf(e){let t=0;for(const r of e){let n=r;for(let i=0;i<8;i++)(n^t)&1?t=t>>>1^3988292384:t=t>>>1,n=n>>1}return t>>>0}Uint8Array.from([126,0,8,1,0,2,1,171,205]);const sd={debug:!1,simulator:!1,comPortSerial:"",comPort:"",retries:3,baudRate:19200,parity:"even",stopBits:2,dataBits:8,pollIntervalMs:1e3,blocksize:128,interFrameDelayMs:0};ns.AtMostOnce,ns.AtMostOnce;let ws=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];typeof Int32Array<"u"&&(ws=new Int32Array(ws));const mV=(e,t)=>{let r=typeof t<"u"?~~t:0;for(let n=0;n<e.length;n++)r=(ws[(r^e[n])&255]^r>>8)&65535;return r},Xf=Wf("kermit",mV),vV={productCode:0,serialNumber:0,payload:Buffer.alloc(0)};function Le(e,t){const{payload:r,productCode:n,serialNumber:i}={...vV,...t},a=Qr(e),o=n>0&&i>0,u=o?kr(n,4):Buffer.alloc(0),l=o?kr(i,4):Buffer.alloc(0),c=o?Buffer.concat([u,l,r]):r,f=kr(a.length+c.length+2),m=Buffer.concat([f,a,c]),v=Xf(m),h=kr(v),y=Buffer.from([2]),_=Buffer.from([3]);return Buffer.concat([y,f,a,c,h,_])}function hV(e){const t=e.subarray(-3,-1),r=e.subarray(1,e.length-3),n=Xf(r),i=kr(n),a=t.equals(i);if(!a)throw console.log("! CRC Message",t),console.log("! CRC Payload",i),new Error(" Invalid response: CRC16 check failed");return a}const Zf={retries:3,timeoutInMs:6e3,debug:!1,hasResponse:!0,hasAtLeastOneResponse:!1};async function gV(e,t,r){const n={...Zf,...r},{retries:i,hasResponse:a,hasAtLeastOneResponse:o}=n;for(let u=0;u<i;u++)for(const l of e){const c=await yV(l,t,{...n,hasResponse:o?!1:a});if(!a)return[];if(c.length>0)return c}throw new Error(`No response received after ${i} retries`)}async function yV(e,t,r){const{hasAtLeastOneResponse:n,hasResponse:i,timeoutInMs:a,debug:o}={...Zf,...r},u=[];return await new Promise((l,c)=>{const d=typeof e=="string"?Qr(e):e;let f=Buffer.alloc(0),m=!1,v=!1;const h=setTimeout(()=>{if(n){t.off("data",y),clearTimeout(h),l(u);return}c(new Error(`Timeout after ${a} ms`))},a),y=_=>{if(o&&console.log("+  ",_),f=Buffer.concat([f,_]),f.readUInt8(0)!==2){c(new Error("Invalid response"));return}if(!v&&f.length===d.length){if(v=!0,o&&console.log("ECH",f,`
`),i){m=!0,f=Buffer.alloc(0);return}t.off("data",y),clearTimeout(h),l([]);return}if(!v&&f.length>d.length&&(v=!0,m=!0,f=f.subarray(d.length)),v&&m){const O="03",P=_.length-2,C=_.includes(O,P,"hex"),b=f.length-4,S=b>=3?f.readUInt16BE(1):1/0;if(C&&b===S){o&&console.log("RES",f),o&&console.log(""),hV(f),t.off("data",y),clearTimeout(h),l([f]);return}if(b>S)throw new Error("Invalid response: packet size > required size")}};t.on("data",y),t.write(d,_=>{_ instanceof Error&&c(_),o&&console.log("REQ",d)})})}function wV(e){return{f_setQ:(e[1]&1)!==0,f_setCosPhi:(e[1]&2)!==0,f_QversusU:(e[1]&4)!==0,f_PFversusU:(e[1]&8)!==0,f_OCD:(e[1]&16)!==0,f_CNSflag:(e[1]&32)!==0,f_Sync:(e[1]&64)!==0,f_VdcOK:(e[1]&128)!==0,f_TrampOK:(e[0]&1)!==0,f_notNS:(e[0]&2)!==0,f_VmovavgOK:(e[0]&4)!==0,f_OffsetOK:(e[0]&8)!==0,f_VbiasOK:(e[0]&16)!==0,f_PhaseOK:(e[0]&32)!==0,f_facOK:(e[0]&64)!==0,f_VacOK:(e[0]&128)!==0}}function ud(e){return{statusBitFlags:wV(e.subarray(0,2)),onTimeSeconds:Math.round(e.readUInt32LE(2)/1e3),kWh:e.readUInt32LE(6)/65536,dcInputVoltage:e.readUInt16LE(10)/32768*75,biasVoltage:e.readUInt16LE(12)/16384*150,referenceVoltage:e.readUInt16LE(14)/32768*3,asicTemperature:e.readUInt16LE(16)/32768*300-273.15,gridVoltage:e.readUInt16LE(18)/32768*115,feedInPower:e.readUInt16LE(20)/32768*350,reactivePower:e.readUInt16LE(22)/32768*230*1.5,gridFrequency:e.readUInt16LE(24)/32768*50,lineCurrent:e.readUInt16LE(26)/32768*20,timeUntilReclosure:e.readUInt16LE(28)/32768*600,rampUpTime:e.readUInt16LE(30)/32768*600,spareVar1:e.readUInt16LE(32)/32768,spareVar2:e.readUInt16LE(34)/32768}}function ht(e){const r=/\d+/.exec(e);return parseFloat(r===null?"":r[0])}function cd(e){const[t,r,n,i,a,o,u,l,c,d,f]=e.split("|");return{bootloaderVersion:t,appVersion:r,firmwareHash:n,kWhCounter:ht(i),powerAc:ht(a),voltageAc:ht(o),currentAc:ht(l),frequency:ht(u),voltageDc:ht(c),rampUpSeconds:ht(d),timeUntilReclosureMs:ht(f)}}function jf(e=sd){const{comPort:t,debug:r,simulator:n,retries:i,baudRate:a,parity:o,stopBits:u,dataBits:l,blocksize:c,interFrameDelayMs:d}={...sd,...e},f=new vr.SerialPort({path:t,baudRate:a,parity:o,stopBits:u,dataBits:l,autoOpen:!1});async function m(){return r&&console.log("!","Opening port"),n?f:await new Promise((I,z)=>{f.open(U=>{U instanceof Error?z(U):I(f)})})}async function v(I,z){const U={debug:r,...z},$=!f.isOpen;$&&await m();const L=Array.isArray(I)?I:[I],G=await gV(L,f,U);return $&&await h(),G}async function h(){return r&&console.log("!","Closing port"),n?f:f.isOpen?await new Promise((I,z)=>{f.close(U=>{U instanceof Error?z(U):I(f)})}):(r&&console.log("!","Port already closed"),f)}async function y(I){if(n)return;const z=Le(Se.RESET,I);await v(z,{hasResponse:!1})}async function _(){if(n)return[];const I=[Le(Se.CLEAR_Z_BIT),Le(Se.SET_RANDOMIZE),Le(Se.GET_RANDOMIZE_0),Le(Se.GET_RANDOMIZE_1)];return(await v(I,{hasAtLeastOneResponse:!0})).map(U=>{const $=U.readInt8(3),L=U.readUInt32BE(4),G=U.readUInt32BE(8),R=U.subarray(12,-3).toString("hex"),E=Vs(L,G);return r&&(console.log("#","Scan response",U),console.log("#","Product Code",L),console.log("#","Serial Number",G),console.log("#","Identifier",$),console.log("#","Payload",R)),{identifier:$,productCode:L,serialNumber:G,payload:R,productSerial:E}})}async function O(I){if(n)return cd("");const z=Le(Se.ACTIVATE_FIRMWARE,{...I,payload:Buffer.from([0])}),[U]=await v(z),$=U.subarray(13,U.length-3).toString();return console.log("!",$),cd($)}async function P(I,z){if(n)return 0;const U=44,$=z*65535/100>>8&255,L=z*65535/100>>0&255,G=Le(Se.SET_POWER,{...I,payload:Buffer.from([U,$,L])}),[R]=await v(G);return R.readInt8(12)}async function C(I){if(n)return ud(Buffer.alloc(42));const z=Le(Se.GET_DATA,I),[U]=await v(z),$=U.readUInt32BE(4),L=U.readUInt32BE(8),G=U.subarray(12,U.length-3),R=ud(G);return r&&(console.log("# Product Code:",$),console.log("# Serial Number:",L),console.log("# Data:",R)),R}async function b(I,z){const $=Math.ceil(z.length/c)*c;await T(I,Id.APP,$);const L=await S(I,z),G=Yf(z);return await A(I,z.length,G),{errors:L,crc32:G}}async function T(I,z,U){const $=Qr(Se.INIT),L=Buffer.alloc(1);L.writeInt8(z);const G=Buffer.alloc(4);G.writeUint32BE(U);const R=Le(Se.FIRMWARE,{...I,payload:Buffer.concat([$,L,G])}),N=await(async()=>{if(r&&(console.log("-----------"),console.log("Initialize:",R),console.log("-----------")),n)return 0;const[M]=await v(R);return M.readInt8(12)})();if(N!==0)throw new Error(`Failed to initialize firmware (${N})`)}async function S(I,z){const U=Math.ceil(z.length/c),$=[];let L=!0,G=0,R=0;const E=N=>{const M=N*c,W=(N+1)*c,H=z.subarray(M,W);if(H.length<c){const Q=Buffer.alloc(c-H.length);return Buffer.concat([H,Q])}return H};for(;L;){const N=Qr(Se.BLOCK),M=E(R),W=Buffer.alloc(4);W.writeUint32BE(R*c);const H=Le(Se.FIRMWARE,{...I,payload:Buffer.concat([N,W,M])});if(await(async()=>{if(r){const ge=(R+1).toString(10).padStart(2,"0"),ze=32,$r=c/ze;console.log(""),console.log("Block ",ge,H.subarray(0,17),17,"/",H.length);for(let Ft=0;Ft<$r;Ft++){const Ur=M.subarray(Ft*ze,(Ft+1)*ze);Ur.length>0&&console.log("Block",String.fromCharCode(65+Ft)+" ",ge,Ur,Ur.length,"/",H.length)}console.log("Block ",ge,H.subarray(-3),3,"/",H.length,`
`)}if(n)return 0;const[ye]=await v(H);return ye.readInt8(12)})()===0){R++,R>=U&&(L=!1),G=0,await xe(d);continue}const Te=new Error(`Error in block ${R+1}`);if(r&&console.log(`-----> ${Te.message}`),$.push(Te),G>=i)throw new Error(`Failed to upload firmware after ${i} sequential retries`);G++,r&&console.log(`-----> Retrying block ${R+1}`)}return $}async function A(I,z,U){const $=Qr(Se.ACTIVATE_FIRMWARE),L=Buffer.alloc(4);L.writeUint32BE(z);const G=Buffer.alloc(4);G.writeUInt32BE(U);const R=Le(Se.FIRMWARE,{...I,payload:Buffer.concat([$,L,G])}),N=await(async()=>{if(r&&(console.log("---------"),console.log("Activate:  ",R),console.log("---------")),n)return 0;const[M]=await v(R);return M.readInt8(12)})();if(N!==0)throw new Error(`Failed to activate firmware (${N})`)}function F(I){const z=Math.ceil(I.length*3/4),U=Buffer.alloc(z);let $=0;for(let G=0;G<I.length;G++)(G+1)%4!==0&&(U[$++]=I[G]);let L=$;for(;L>0&&U[L-1]===0;)L--;return U.subarray(0,L)}return{open:m,reset:y,close:h,send:v,scanDevices:_,getDeviceInfo:O,setPower:P,getData:C,prepareFirmware:F,uploadFirmware:b}}function bV(e,t){const{stages:r}=ct.flash.microchip;async function n(i){const{id:a,deviceType:o,comPortOrDeviceId:u,stage:l,productSerial:c,productionMode:d,dryRun:f}=i,{pc:m,sn:v}=Ze(c),h={productCode:m,serialNumber:v},y=(O,P=B.INFO)=>{e.next({type:w.FLASH_LOG_UPDATE,id:a,level:P,message:O})},_=await Bs(c);y(`Created ${Gt} directory: ${_}`);try{if(!f&&u==="")throw new Error(`COM Port is required to flash ${o}`);y(`Initializing PLC client with ${u}`);const O=jf({comPort:u,debug:!0});y(`Starting to flash ${u}`),e.next({type:w.FLASH_STATE_UPDATE,id:a,state:Ne.STARTED});const P=globalThis.cachedFirmwareFiles.find(({productCode:S,fileType:A})=>S===Ze(c).pc&&A===Fe(o,te.APP).fileTypeId);if(P===void 0)throw new Error("Firmware file not found in cache");const C=qf(P.hash),b=Ox(P.remarks),T=b!=null;for(const S of r){if(l!=null&&l!==S.stage){e.next({type:w.FLASH_STATUS_UPDATE,id:a,status:{group:se.FLASH,stage:S.stage,status:we.SKIPPED}}),y(`Skipping flash stage: ${S.stage} `);continue}y(`Flash stage: ${S.stage} `);const A=Buffer.from(P.content),{crc32:F,errors:I}=await O.uploadFirmware(h,A);y(`Encountered ${I.length} errors`);for(const z of I)y(`Error: ${z.message}`);if(F!==C)throw new Error(`CRC32 does not match cloud CRC32 (${C} vs ${F})`)}for(const S of r){const A=l!=null&&l!==S.stage,F=!S.verify;if(A||F){e.next({type:w.FLASH_STATUS_UPDATE,id:a,status:{group:se.VERIFY,stage:S.stage,status:we.SKIPPED}}),y(`Skipping verify stage: ${S.stage} `);continue}y(`Verify stage: ${S.stage} `);const I=T?6e3:600;T&&y(`App firmware is trojan horse containing Bootloader ${b}`),y(`Resetting device and waiting for ${I} ms...`),await O.reset(h),await xe(I);const{bootloaderVersion:z,appVersion:U}=await O.getDeviceInfo(h);if(y(`Device has Bootloader ${z} and App ${U}`),T){if(z!==b)throw new Error(`Bootloader ${z} does not match target ${b} `);y(`Bootloader ${z} matches target ${b} `)}else if(U!==P.version)throw new Error(`App version ${U} does not match ${P.version}`)}}catch(O){const{msg:P}=await ae(O);y(`Error: ${P}`,B.ERROR),e.next({type:w.FLASH_STATE_UPDATE,id:a,state:Ne.FAILED}),await t.modifyDevice({modifyDeviceRequest:{productSerial:c,deviceStatusId:ut.DEFECT,remarks:P}});return}e.next({type:w.FLASH_STATE_UPDATE,id:a,state:Ne.SUCCEEDED});try{const O=ut.FLASHED,P=d?"Production":"Development";if(l===void 0)throw new Error("Stage is undefined");const C=globalThis.cachedFirmwareFiles.find(({productCode:b,fileType:T})=>b===Ze(c).pc&&T===Fe(o,te.APP).fileTypeId);if(C===void 0)throw new Error("Firmware file not found in cache");await t.modifyDevice({modifyDeviceRequest:{productSerial:c,deviceStatusId:O,firmwareReleaseId:C.releaseId,remarks:`${P} firmware ${C.version} with hash ${C.hash} flashed successfully at ${new Date().toISOString()}`}}),y(`Updated database for ${c} `)}catch(O){const{msg:P}=await ae(O);y(`Device Modify Failed: ${P}`,B.ERROR),e.next({type:w.FLASH_STATE_UPDATE,id:a,state:Ne.FAILED})}}return{microchipPlcFlashHandler:n}}function SV(e,t){return e.connectGateway===1&&e.idc===1&&e.testMode===1&&e.connectWifi===1&&e.checkWifi===1&&e.cloudData===1&&e.cloudOta===1&&e.plc===t&&e.reboot===1}var qr=Object.assign(process.env,{LANG:"en_US.UTF-8",LC_ALL:"en_US.UTF-8",LC_MESSAGES:"en_US.UTF-8"}),yo={};const zr={};let Ee=2412;for(let e=1;e<15;e++)zr[e]=Ee.toString(),Ee=Ee+5;Ee=5180;for(let e=36;e<=64;e+=2)zr[e]=Ee.toString(),Ee+=10;Ee=5500;for(let e=100;e<=144;e+=2)zr[e]=Ee.toString(),Ee+=10;Ee=5745;for(let e=149;e<=161;e+=2)zr[e]=Ee.toString(),Ee+=10;Ee=5825;for(let e=165;e<=173;e+=4)zr[e]=Ee.toString(),Ee+=20;function RV(e){return zr[parseInt(e)]}function _V(e){return parseFloat(e)/2-100}function OV(e){return 2*(parseFloat(e)+100)}yo.frequencyFromChannel=RV;yo.dBFromQuality=_V;yo.qualityFromDB=OV;const EV=De.execFile,ld=yo,TV=qr;function dd(e,t){try{EV("netsh",["wlan","show","networks","mode=Bssid"],{env:TV},(r,n)=>{if(r){t&&t(r);return}n=n.toString("utf8").split("\r").join("").split(`
`).slice(4,n.length);let i=-1,a=0,o;const u=[];let l;const c=[];let d;for(d=0;d<n.length;d++)n[d]===""&&(i++,o=n.slice(a,d),u.push(o),a=d+1);for(d=0;d<i;d++)u[d]&&u[d].length>0&&(l=CV(u[d]),c.push(l));t&&t(null,c)})}catch(r){t&&t(r)}}function CV(e){const t={};return t.mac=e[4]?e[4].match(/.*?:\s(.*)/)[1]:"",t.bssid=t.mac,t.ssid=e[0]?e[0].match(/.*?:\s(.*)/)[1]:"",t.channel=e[7]?parseInt(e[7].match(/.*?:\s(.*)/)[1]):-1,t.frequency=t.channel?parseInt(ld.frequencyFromChannel(t.channel)):0,t.signal_level=e[5]?ld.dBFromQuality(e[5].match(/.*?:\s(.*)/)[1]):Number.MIN_VALUE,t.quality=e[5]?parseFloat(e[5].match(/.*?:\s(.*)/)[1]):0,t.security=e[2]?e[2].match(/.*?:\s(.*)/)[1]:"",t.security_flags=e[3]?e[3].match(/.*?:\s(.*)/)[1]:"",t.mode="Unknown",t}var PV=e=>t=>{if(t)dd(e,t);else return new Promise((r,n)=>{dd(e,(i,a)=>{i?n(i):r(a)})})};const AV=Ts,ep=De.execFile,tp=qr,DV=PV,IV=fr,NV=Vb,jo=IV.join(NV.tmpdir(),"nodeWifiConnect.xml");function es(e,t){return new Promise((r,n)=>{ep(e,t,{env:tp,shell:!0},(i,a,o)=>{i?(i.stdout=a,i.stderr=o,n(i)):r(a)})})}function fd(e,t,r){DV(e)().then(n=>{const i=n.find(a=>a.ssid===t.ssid);if(i===void 0)throw"SSID not found";AV.writeFileSync(jo,MV(i,t.password))}).then(()=>es("netsh",["wlan","add","profile",`filename=${jo}`])).then(()=>{const n="netsh",i=["wlan","connect",`ssid="${t.ssid}"`,`name="${t.ssid}"`];return e.iface&&i.push(`interface="${e.iface}"`),es(n,i)}).then(()=>es(`del ${jo}`)).then(()=>{r&&r()}).catch(n=>{ep("netsh",["wlan","delete",`profile "${t.ssid}"`],{env:tp},()=>{r&&r(n)})})}function FV(e){let t,r,n,i;for(i="",t=r=0,n=e.length-1;n>=0?r<=n:r>=n;t=n>=0?++r:--r)i+=e.charCodeAt(t).toString(16);return i}function MV(e,t){let r=`<?xml version="1.0"?> <WLANProfile xmlns="http://www.microsoft.com/networking/WLAN/profile/v1"> <name>${e.ssid}</name> <SSIDConfig> <SSID> <hex>${FV(e.ssid)}</hex> <name>${e.ssid}</name> </SSID> </SSIDConfig>`;return e.security.includes("WPA2")?r+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>WPA2PSK</authentication> <encryption>AES</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>passPhrase</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:e.security.includes("WPA")?r+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>WPAPSK</authentication> <encryption>TKIP</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>passPhrase</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:e.security_flags.includes("WEP")?r+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>open</authentication> <encryption>WEP</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>networkKey</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:r+="<connectionType>ESS</connectionType> <connectionMode>manual</connectionMode> <MSM> <security> <authEncryption> <authentication>open</authentication> <encryption>none</encryption> <useOneX>false</useOneX> </authEncryption> </security> </MSM>",r+="</WLANProfile>",r}var qV=e=>(t,r)=>{if(r)fd(e,t,r);else return new Promise((n,i)=>{fd(e,t,a=>{a?i(a):n()})})};const zV=De.execFile,LV=qr;function pd(e,t){const r="netsh",n=["wlan","disconnect"];e.iface&&n.push(`interface="${e.iface}"`),zV(r,n,{env:LV},i=>{t&&t(i)})}var $V=e=>t=>{if(t)pd(e,t);else return new Promise((r,n)=>{pd(e,i=>{i?n(i):r()})})};De.execFile;const UV=De.execFile,xV=qr;function md(e,t,r){const n=[];n.push("-w"),n.push("10"),n.push("device"),n.push("wifi"),n.push("connect"),n.push(t.ssid),n.push("password"),n.push(t.password),e.iface&&(n.push("ifname"),n.push(e.iface)),UV("nmcli",n,{env:xV},(i,a)=>{a.includes("Error: ")&&(i=new Error(a.replace("Error: ",""))),r&&r(i)})}var VV=e=>(t,r)=>{if(r)md(e,t,r);else return new Promise((n,i)=>{md(e,t,a=>{a?i(a):n()})})};const GV=De.execFile,BV=qr;function vd(e,t){const r=[];r.push("device"),r.push("disconnect"),e.iface&&r.push(e.iface),GV("nmcli",r,{env:BV},n=>{t&&t(n)})}var kV=e=>t=>{if(t)vd(e,t);else return new Promise((r,n)=>{vd(e,i=>{i?n(i):r()})})};De.execFile;De.execFile;const{execFile:JV}=De,HV=qr;var WV=({cmd:e,args:t})=>new Promise((r,n)=>{JV(e,t,{env:HV},(i,a)=>{i?n(i):r(a)})});const QV=e=>{const t=e.length-1;return t>=0&&typeof e[t]=="function"?{callback:e[t],args:e.slice(0,t)}:{callback:null,args:e}};var KV=e=>t=>(...r)=>{const{args:n,callback:i}=QV(r);if(typeof i=="function")e(t,...n).then(a=>{i(null,a)}).catch(a=>{i(a)});else return e(t,...n)};const YV=(e,t)=>{const r=["-setairportnetwork"];return r.push(e.iface||"en0"),r.push(t.ssid),r.push(t.password),{cmd:"/usr/sbin/networksetup",args:r}};var XV=YV;const ZV=WV,jV=KV,eG=XV,tG=(e,t)=>ZV(eG(e,t));var rG=jV(tG);const nG=qV,iG=$V,aG=VV,oG=kV,sG=rG,zt={debug:!1,iface:null};function uG(e){e&&e.debug&&(zt.debug=e.debug),e&&e.iface&&(zt.iface=e.iface);let t=()=>{throw new Error("ERROR : not available for this OS")},r=()=>{throw new Error("ERROR : not available for this OS")};switch(process.platform){case"linux":t=aG(zt),r=oG(zt);break;case"darwin":t=sG(zt);break;case"win32":t=nG(zt),r=iG(zt);break;default:throw new Error("ERROR : UNRECOGNIZED OS")}rp=t,bs=r}var cG=uG,rp=()=>{throw new Error("ERROR : use init before")},bs=()=>{throw new Error("ERROR : use init before")};const lG={address:"192.168.4.1",port:6677},dG={address:"192.168.4.2",port:6678},fG=[17,0,0,10,0,32,1,35,86,148],pG=[17,0,0,10,0,32,2,35,86,148],mG=[17,0,0,10,0,32,4,35,86,148],vG=[17,0,0,10,0,32,5,35,86,148],hG=[17,0,0,10,0,32,6,35,86,148],gG=[17,0,0,10,0,32,8,35,86,148],yG=[17,0,0,10,0,32,10,35,86,148],wG=[17,0,0,10,0,32,11,35,86,148];function bG(e,t){async function r(b){const{id:T,productSerial:S,gatewaySsid:A,gatewayPassword:F,factorySsid:I,factoryPassword:z,expectedInverters:U,skipOTA:$}=b,L={connectGateway:-1,idc:-1,testMode:-1,connectWifi:-1,checkWifi:-1,cloudData:-1,cloudOta:$?1:-1,plc:-1,reboot:-1,submitted:-1};if(S.length===0)throw new Error("Missing product serial");if(A.length===0)throw new Error("Missing gateway SSID");if(F.length===0)throw new Error("Missing gateway password");let G=null;try{console.log("Connecting to gateway"),await y(A,F,b,L);const E=6e3;console.log(`Waiting for ${E} ms ...`),await xe(E),console.log("Running tests"),await P(n,b,L),await P(i,b,L),await P(a,b,L),await P(o,b,L),await P(u,b,L),$||await P(l,b,L),await P(c,b,L),await P(d,b,L)}catch(E){const{msg:N}=await ae(E);G=N}await h(I,z,T);const R=SV(L,U);L.submitted=await C(S,R),R?f(L,T):m(G??"Unknown error",T)}async function n({id:b,timeoutInMs:T},S){try{if(console.log("Starting IDC test"),S.idc=await gt(fG,"0x01",T),S.idc!==1)throw new Error(`Result is ${S.idc}`);v(S,b)}catch(A){const{msg:F}=await ae(A);throw S.idc=-2,v(S,b),new Error(`IDC failed: ${F}`)}}async function i({id:b,timeoutInMs:T},S){try{if(console.log("Enabling test mode"),S.testMode=await gt(pG,"0x02",T),S.testMode!==1)throw new Error(`Result is ${S.testMode}`);v(S,b)}catch(A){const{msg:F}=await ae(A);throw S.testMode=-2,v(S,b),new Error(`Test mode failed: ${F}`)}}async function a({id:b,timeoutInMs:T},S){try{if(console.log("Starting connect Wi-Fi test"),S.connectWifi=await gt(mG,"0x04",T),S.connectWifi!==1)throw new Error(`Result is ${S.connectWifi}`);v(S,b)}catch(A){const{msg:F}=await ae(A);throw S.connectWifi=-2,v(S,b),new Error(`Connect Wi-Fi failed: ${F}`)}}async function o({id:b,timeoutInMs:T},S){try{if(console.log("Starting check Wi-Fi test"),S.checkWifi=await gt(vG,"0x05",T),S.checkWifi!==1)throw new Error(`Result is ${S.checkWifi}`);v(S,b)}catch(A){const{msg:F}=await ae(A);throw S.checkWifi=-2,v(S,b),new Error(`Check Wi-Fi failed: ${F}`)}}async function u({id:b,timeoutInMs:T},S){try{if(console.log("Starting cloud data test"),S.cloudData=await gt(hG,"0x06",T),S.cloudData!==1)throw new Error(`Result is ${S.cloudData}`);v(S,b)}catch(A){const{msg:F}=await ae(A);throw S.cloudData=-2,v(S,b),new Error(`Cloud data failed: ${F}`)}}async function l({id:b,timeoutInMs:T},S){try{if(console.log("Starting cloud OTA test"),S.cloudOta=await gt(gG,"0x08",T),S.cloudOta!==1)throw new Error(`Result is ${S.cloudOta}`);v(S,b)}catch(A){const{msg:F}=await ae(A);throw S.cloudOta=-2,v(S,b),new Error(`Cloud OTA failed: ${F}`)}}async function c({id:b,timeoutInMs:T,expectedInverters:S},A){try{if(console.log("Starting cloud data Test"),A.plc=await gt(yG,"0x0a",T),A.plc!==S)throw new Error(`Expected ${S}: Result is ${A.plc}`);v(A,b)}catch(F){const{msg:I}=await ae(F);throw A.plc=-2,v(A,b),new Error(`PLC failed: ${I}`)}}async function d({id:b,timeoutInMs:T},S){try{if(console.log("Sending reboot command"),S.reboot=await gt(wG,"0x0b",T),S.idc!==1)throw new Error(`Result is ${S.reboot}`);v(S,b)}catch(A){const{msg:F}=await ae(A);throw S.reboot=-2,v(S,b),new Error(`Reboot failed: ${F}`)}}function f(b,T){e.next({type:w.IGB_TEST_RESPONSE,id:T,result:b})}function m(b,T){e.next({type:w.ERROR_RESPONSE,id:T,reason:b})}function v(b,T){e.next({type:w.IGB_TEST_UPDATE,id:T,result:b})}async function h(b,T,S){console.log("Disconnecting Wi-Fi");try{await bs(),b.length>0&&T.length>0&&await _(b,T),await O(6)}catch(A){const{msg:F}=await ae(A);e.next({type:w.ERROR_RESPONSE,id:S,reason:`Failed to reconnect Wi-Fi: ${F}`})}}async function y(b,T,{id:S},A){console.log(`Connect gateway with SSID ${b}`),cG({iface:null}),await _(b,T),A.connectGateway=1,v(A,S)}async function _(b,T,S=3,A=2e3){console.log(`Attempting to connect to SSID ${b}`);const F=S;for(;S>=0;){try{return await bs(),await rp({ssid:b,password:T}),console.log(`Connected to ${b}`),!0}catch(I){console.log(`Failed to connect to ${b}:`,I)}S--,S>=0&&(await xe(A),console.log(`Retrying in ${A} ms ...`))}throw new Error(`Failed to connect to ${b} after ${F} attempts`)}async function O(b,T=6e3,S=2e3){for(console.log(`Waiting ${T} ms for internet connection ...`),await xe(T);b>=0;){try{return await t.getDeviceStatusList({getDeviceStatusListRequest:{deviceStatusId:1}}),console.log("Internet restored"),!0}catch(A){console.log("No internet connection:",A)}b--,b>=0&&(console.log(`Retrying in ${S} ms ...`),await xe(S))}throw new Error("Failed to connect to internet")}async function P(b,T,S,A=2e3,F=3e3,I=3){let z="";const U=I;for(console.log(`Waiting for ${A} ms ...`),await xe(A);I>=0;){try{const $=await b(T,S);return console.log("Test succeeded"),$}catch($){const{msg:L}=await ae($);z=L,console.log(`Failed test: ${L}`)}I--,I>=0&&(console.log(`Retrying function in ${F} ms ...`),await xe(F))}throw new Error(`Failed test after ${U} attempts: ${z}`)}async function C(b,T){console.log(`Updating cloud status as ${T?"OPERABLE":"DEFECT"}`);try{return T?(await t.modifyDevice({modifyDeviceRequest:{productSerial:b,deviceStatusId:ut.OPERABLE}}),1):(await t.modifyDevice({modifyDeviceRequest:{productSerial:b,deviceStatusId:ut.DEFECT}}),1)}catch(A){const{msg:F}=await ae(A);return console.log("Failed to set cloud status:",F),-2}}return{igbTestHandler:r}}async function SG(e,t=1e4){const r=xb.createSocket("udp4");let n=!1;const i=()=>{n||(r.close(),n=!0)};try{const{port:a,address:o}=lG;return await new Promise((u,l)=>{r.bind(dG.port,u),r.on("error",l)}),await new Promise((u,l)=>{const c=Buffer.from(e);r.send(c,a,o,d=>{if(d!==null)l(d);else{const f=c.length,m=c.toString("hex");console.log(`Sent ${f} bytes to ${o}:${a} ${m}`),u()}})}),await new Promise((u,l)=>{const c=Date.now(),d=setTimeout(()=>{i(),l(new Error(`Timeout after ${t} ms`))},t);r.on("message",f=>{const m=((Date.now()-c)/1e3).toFixed(2);console.log(`Received response in ${m} seconds`),clearTimeout(d),i();const v=f.toString("hex"),h=f.length;console.log(`Received ${h} bytes from ${o}:${a} ${v}`),u(v)}),r.on("error",f=>{clearTimeout(d),i(),l(f)})})}catch(a){throw i(),a}}async function gt(e,t,r=9e3){const n=await SG(e,r);return RG(n,t)}function RG(e,t){const r=e.match(/.{2}/g);if(r===null)throw new Error("Invalid response");const n=r.map(i=>"0x"+i);if(n[16]!=="0x02"||n[19]!=="0x03")throw new Error("Unexpected response");return n[17]===t?parseInt(n[18],16):0}function _G(e){async function t({id:r}){var i;const{bin:n}=ct.flash.microchip;try{const o=xn(n,["-T"]),u=await le.lastValueFrom(o);e.next({type:w.MICROCHIP_LIST_RESPONSE,id:r,devices:hd(u.chunk.toString())})}catch(a){if(((i=a.originError)==null?void 0:i.code)===1){const l=a instanceof Error&&"stdout"in a&&a.stdout instanceof Buffer?a.stdout.toString():"";e.next({type:w.MICROCHIP_LIST_RESPONSE,id:r,devices:hd(l)});return}const u=a instanceof Error&&"stderr"in a&&a.stderr instanceof Buffer?a.stderr.toString():a instanceof Error?a.message:"Unknown error in microchipTestHandler";e.next({type:w.ERROR_RESPONSE,id:r,reason:u})}}return{microchipListHandler:t}}function OG(e){const t=/^(.*?)\sS\.No\s:\s(\w+)$/,r=e.match(t);return r!==null?{name:r[1].trim(),serialNo:r[2].trim()}:null}function hd(e){const t=e.split(/\r?\n|\r|\n/g),r=[];for(const n of t){const i=OG(n);i!==null&&r.push({name:i.name,serialNo:i.serialNo})}return r}async function EG(e,t){const r=new Gb.Socket;await new Promise((n,i)=>{r.connect(e,()=>{r.write(t,()=>{r.destroy(),n()})}),r.on("data",a=>{console.log("Printer: received ",a),r.destroy(),n()}),r.on("close",()=>{console.log(""),i(new Error("Printer: socket closed"))}),r.on("error",a=>{i(a)})})}function TG(e,t,r){const n=[];let i=0;for(let a=0;a<=e.length-t.length;a++){let o=!0;for(let u=0;u<t.length;u++)if(e[a+u]!==t[u]){o=!1;break}o&&(n.push(e.subarray(i,a)),n.push(r),a+=t.length-1,i=a+1)}return n.push(e.subarray(i)),Buffer.concat(n)}async function Kn(e,t){let r=await Ae.readFile(e);for(const[n,i]of Object.entries(t)){const a=Buffer.from(n),o=Buffer.from(i);r=TG(r,a,o)}return r}function CG(e){const t=bx(e);if(t.startsWith("IG"))return{templatePath:dt(`${gr}/${TC}`),replacements:PG(e,t)};if(t.startsWith("PS"))return{templatePath:dt(`${gr}/${CC}`),replacements:AG(e,t)};throw new Error(`Unknown device type in getProductPrintJobDetails: ${t}`)}function PG(e,t){var o;const r="https://solarnative.com/installation/",n=xs(e),i="T:Txt000018;73.11,16.76,180,3,pt4,q95;QR_DOCUMENTATION",a="T:Txt000016;22.48,16.76,180,3,pt4,q95;QR_CODE";return{SN_MODEL:t,WIFI_SSID:`SN${e.productSerial}`,WIFI_PASS:((o=e.additionalAttributes)==null?void 0:o.wifiPassword)??"N/A",[i]:`B 73.11,17.6,180,QRCode,0.5,n;${r}`,[a]:`B 22.48,17.6,180,QRCode,0.5,n;${n}`}}function AG(e,t){const r="https://solarnative.com/installation/",n=xs(e,pr.STANDARD),i="T:Txt000023;55.07,16.76,180,3,pt4,q95;QR_DOCUMENTATION",a="T:Txt000022;22.48,16.76,180,3,pt4,q95;QR_CODE";return{SN_MODEL:t,PRODUCT_SERIAL:e.productSerial,[i]:`B 55.30,17.50,180,QRCode,0.5,n;${r}`,[a]:`B 22.00,17.50,180,QRCode,0.5,n;${n}`}}function DG(e,t,r){if(e.length===1)return{templatePath:dt(`${gr}/${PC}`),replacements:{CONTENTS:t,PRODUCT_SERIAL_1:e[0],"8888888888888":r}};if(e.length===2)return{templatePath:dt(`${gr}/${AC}`),replacements:{CONTENTS:t,PRODUCT_SERIAL_1:e[0],PRODUCT_SERIAL_2:e[1],"8888888888888":r}};throw new Error(`Unsupported number of devices in getProductBoxPrintJobDetails: ${t} (${e.length})`)}function IG(e,t){return{templatePath:dt(`${gr}/${IC}`),replacements:{CONTENTS:e,LOGISTICS_QR:`LB${hx(t,10)}`}}}function NG(e,t){async function r(l){const{id:c,ipAddress:d,port:f}=l;try{const m=await u(l);await EG({host:d,port:f},m),e.next({type:w.PRINT_RESPONSE,id:c,message:"Print commands sent "})}catch(m){const{msg:v}=await ae(m);e.next({type:w.ERROR_RESPONSE,id:c,reason:v})}}async function n(l){const{input:c}=l,d=$f(c),{data:f}=await t.deviceList({deviceListRequest:d});if(f.devices.length===0){const{identifierType:y,identifierValues:_}=d;throw new Error(`No device found with ${y} ${_[0]}`)}const m=f.devices[0];FG(m);const{templatePath:v,replacements:h}=CG(m);return await Kn(v,h)}async function i(l){var h;const{input:c}=l,{data:d}=await t.deviceList({deviceListRequest:{identifierType:"ProductSerial",identifierValues:[c]}});if(d.devices.length===0)throw new Error(`No device found withProductSerial ${c}`);const f=d.devices[0],m=dt(`${gr}/${DC}`),v={WIFI_SSID:`SN${f.productSerial}`,WIFI_PASS:((h=f.additionalAttributes)==null?void 0:h.wifiPassword)??"N/A",PRODUCT_SERIAL:f.productSerial,WIFI_CREDENTIALS:xs(f,pr.WIFI)};return await Kn(m,v)}async function a(l){const{input:c,content:d,gtin:f}=l;if(d===void 0)throw new Error("Missing content in getCommandsProductBoxLabel");if(f===void 0)throw new Error("Missing gtin in getCommandsProductBoxLabel");const{data:m}=await t.productBoxGet({productBoxGetRequest:{productBoxId:parseInt(c)}}),v=m.productBox.device.productSerials??[];if(v.length===0)throw new Error("No product serials found");const{templatePath:h,replacements:y}=DG(v,d,f);return await Kn(h,y)}async function o(l){const{input:c,content:d}=l,f=parseInt(c);if(d===void 0)throw new Error("Missing labelTypeId in getCommandsLogisticsBoxLabel");const{data:m}=await t.logisticsBoxGet({logisticsBoxGetRequest:{logisticsBoxId:f}}),v=m.logisticsBox.productBoxes.length,{templatePath:h,replacements:y}=IG(`${v}x ${d}`,f);return await Kn(h,y)}async function u(l){switch(l.type){case w.PRINT_TEST_REQUEST:return`
          ^XA
          ^FO20,30^A0N,50,50^FDHello, Solarnative!^FS
          ^FO20,100^BQN,2,10^FDQA,https://solarnative.com/^FS
          ^XZ
        `;case w.PRINT_COMMAND_REQUEST:return l.command+`\r
`;case w.PRINT_REQUEST:switch(l.labelType){case Gr.PRODUCT:return await n(l);case Gr.PRODUCT_BOX:return await a(l);case Gr.PRODUCT_BOX_WIFI:return await i(l);case Gr.LOGISTICS_BOX:return await o(l)}}}return{printHandler:r}}function FG(e){if(e.status.id<ut.FLASHED)throw new Error(`Device ${e.productSerial} with status id ${e.status.id} is not flashed`)}function MG(e){async function t({id:r,path:n,encoding:i}){let a=n??"";try{if(n===void 0&&(a=(await _e.dialog.showOpenDialog({title:"Read file",defaultPath:n})).filePaths[0]??""),a==="")throw new Error("No file selected");const o=await Ae.readFile(a,{encoding:i});e.next({type:w.READ_FILE_RESPONSE,id:r,content:o.toString()})}catch(o){const{msg:u}=await ae(o);e.next({type:w.ERROR_RESPONSE,id:r,reason:`Failed to read file! ${u}`})}}return{readFileHandler:t}}function qG(e){async function t({id:r,path:n,content:i,encoding:a}){const{filePath:o}=await _e.dialog.showSaveDialog({title:"Save file",defaultPath:n});try{if(o===void 0)throw new Error("No file selected");Ts.writeFileSync(o,i,{encoding:a}),e.next({type:w.SAVE_FILE_RESPONSE,id:r})}catch(u){const{msg:l}=await ae(u);e.next({type:w.ERROR_RESPONSE,id:r,reason:`Failed to save the file! ${l}`})}}return{saveFileHandler:t}}function zG(e){async function t(r){var u;const{id:n,deviceType:i,comPortOrDeviceId:a}=r,{bin:o}=ti(i);try{const l=`${o} -p ${a} --before default_reset flash_id`,c=ai(l),f=(await le.lastValueFrom(c)).chunk.toString().split(/\r?\n|\r|\n/g);let m="";for(const v of f)v.includes("Chip is")&&(m+=v);e.next({type:w.FLASH_TEST_RESPONSE,id:n,message:m.length>0?m:"no response"})}catch(l){const c=ai("pwd"),{chunk:d}=await le.lastValueFrom(c);console.log(d.toString());const f=l instanceof Error&&"stderr"in l?JSON.stringify((u=l.stderr)==null?void 0:u.toString()):"",m=l instanceof Error?`${a} failed: ${f.length>0?f:l.message}`:`${a} failed`;e.next({type:w.ERROR_RESPONSE,id:n,reason:m})}}return{esp32TestHandler:t}}function LG(e){async function t(r){const{id:n,comPortOrDeviceId:i}=r,{bin:a,voltage:o}=ct.flash.microchip;let u="";try{const l=[`-TS${i}`,`-P${yt}`,`-W${o}`,"-I"],c=xn(a,l);c.subscribe({next:({chunk:v})=>{const h=v.toString().split(/\r?\n|\r|\n/g);for(const y of h){const _=/Target device (\w+) found/;y.match(_)!==null&&(u+=y)}}}),await le.lastValueFrom(c);const{productCode:d,serialNumber:f}=await kf(i,a,o),m=Vs(d,f);f>0&&d>0&&(u+=` Product Code: ${d} Serial Number: ${f} ProductSerial: ${m}`),e.next({type:w.FLASH_TEST_RESPONSE,id:n,productCode:d,serialNumber:f,message:u.length>0?u:"no response"})}catch(l){const c=l instanceof Error&&"stderr"in l&&l.stderr instanceof Buffer?l.stderr.toString():l instanceof Error?l.message:"Unknown error in microchipTestHandler";e.next({type:w.ERROR_RESPONSE,id:n,reason:c})}}return{microchipTestHandler:t}}function ts(e){return Buffer.from(e,"base64").toString()}var $e={},bt={},np={};Object.defineProperty(np,"__esModule",{value:!0});const $G=e=>{const t=[];for(let r=0,n=e.length;r<n;r++){const i=e.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,i&63|128);else if(r+1<e.length&&(i&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){const a=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else t.push(i>>12|224,i>>6&63|128,i&63|128)}return Uint8Array.from(t)},UG=e=>{let t="";for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){const a=e[++r];t+=String.fromCharCode((i&31)<<6|a&63)}else if(240<=i&&i<365){const o="%"+[i,e[++r],e[++r],e[++r]].map(u=>u.toString(16)).join("%");t+=decodeURIComponent(o)}else t+=String.fromCharCode((i&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};function xG(e){return new TextEncoder().encode(e)}function VG(e){return new TextDecoder("utf-8").decode(e)}const GG=e=>typeof TextEncoder=="function"?xG(e):$G(e),ip=e=>typeof TextDecoder=="function"?VG(e):UG(e),BG=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:GG,toUtf8:ip},Symbol.toStringTag,{value:"Module"})),Lr=GC(BG);var Ct={},dr=g&&g.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(u,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.ServiceClientMqtt5Adapter=Ct.ServiceClientMqtt311Adapter=void 0;const Vr=Kt;class kG{constructor(t){this.connection=t}publish(t,r,n){return dr(this,void 0,void 0,function*(){return this.connection.publish(t,r,n)})}subscribe(t,r,n){return dr(this,void 0,void 0,function*(){return this.connection.subscribe(t,r,n)})}}Ct.ServiceClientMqtt311Adapter=kG;class JG{onMessageReceivedHandler(t){var r;let n=t.message,i=n.topicName,a=this.subscriptionHandlers.get(i);a&&a(i,n.payload,!1,n.qos,(r=n.retain)!==null&&r!==void 0?r:!1)}constructor(t){this.client=t,this.subscriptionHandlers=new Map,t.on("messageReceived",this.onMessageReceivedHandler.bind(this))}publish(t,r,n){return dr(this,void 0,void 0,function*(){return new Promise((i,a)=>dr(this,void 0,void 0,function*(){try{let o=yield this.client.publish({topicName:t,payload:r,qos:n});if(o===void 0){n==Vr.mqtt.QoS.AtMostOnce?i({}):a("Publish failed due to internal error");return}let u=o;Vr.mqtt5.isSuccessfulPubackReasonCode(u.reasonCode)?i({}):a(new Vr.CrtError("Publish failed with reason code: "+u.reasonCode))}catch(o){a(o)}}))})}subscribe(t,r,n){return dr(this,void 0,void 0,function*(){return new Promise((i,a)=>dr(this,void 0,void 0,function*(){try{this.subscriptionHandlers.set(t,n);let u=(yield this.client.subscribe({subscriptions:[{topicFilter:t,qos:r}]})).reasonCodes[0];if(Vr.mqtt5.isSuccessfulSubackReasonCode(u))i({topic:t,qos:u});else throw new Vr.CrtError("Subscribe failed with reason code: "+u)}catch(o){this.subscriptionHandlers.delete(t),a(o)}}))})}}Ct.ServiceClientMqtt5Adapter=JG;var HG=g&&g.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),WG=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ap=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&HG(t,e,r);return WG(t,e),t},ot=g&&g.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(u,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(bt,"__esModule",{value:!0});bt.IotIdentityClient=bt.IotIdentityError=bt.model=void 0;const QG=ap(np);bt.model=QG;const lr=Lr,gd=ap(Ct);class Ss extends Error{constructor(t,r){super(t),this.payload=r;const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.prototype=n}}bt.IotIdentityError=Ss;class Ue{static createClientError(t,r){return t instanceof Error?new Ss(t.message,r):new Ss(Ue.INVALID_PAYLOAD_PARSING_ERROR,r)}constructor(t){t!==void 0&&(this.mqttAdapter=new gd.ServiceClientMqtt311Adapter(t))}static newFromMqtt5Client(t){let r=new Ue;return r.mqttAdapter=new gd.ServiceClientMqtt5Adapter(t),r}publishCreateCertificateFromCsr(t,r){return ot(this,void 0,void 0,function*(){return this.mqttAdapter.publish("$aws/certificates/create-from-csr/json",JSON.stringify(t),r)})}publishCreateKeysAndCertificate(t,r){return ot(this,void 0,void 0,function*(){return this.mqttAdapter.publish("$aws/certificates/create/json",JSON.stringify(t),r)})}publishRegisterThing(t,r){return ot(this,void 0,void 0,function*(){let n="$aws/provisioning-templates/{templateName}/provision/json";return n=n.replace("{templateName}",t.templateName),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}subscribeToCreateCertificateFromCsrAccepted(t,r,n){return ot(this,void 0,void 0,function*(){let i="$aws/certificates/create-from-csr/json/accepted";const a=(o,u)=>{let l,c;try{const d=(0,lr.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Ue.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToCreateCertificateFromCsrRejected(t,r,n){return ot(this,void 0,void 0,function*(){let i="$aws/certificates/create-from-csr/json/rejected";const a=(o,u)=>{let l,c;try{const d=(0,lr.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Ue.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToCreateKeysAndCertificateAccepted(t,r,n){return ot(this,void 0,void 0,function*(){let i="$aws/certificates/create/json/accepted";const a=(o,u)=>{let l,c;try{const d=(0,lr.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Ue.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToCreateKeysAndCertificateRejected(t,r,n){return ot(this,void 0,void 0,function*(){let i="$aws/certificates/create/json/rejected";const a=(o,u)=>{let l,c;try{const d=(0,lr.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Ue.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToRegisterThingAccepted(t,r,n){return ot(this,void 0,void 0,function*(){let i="$aws/provisioning-templates/{templateName}/provision/json/accepted";i=i.replace("{templateName}",t.templateName);const a=(o,u)=>{let l,c;try{const d=(0,lr.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Ue.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToRegisterThingRejected(t,r,n){return ot(this,void 0,void 0,function*(){let i="$aws/provisioning-templates/{templateName}/provision/json/rejected";i=i.replace("{templateName}",t.templateName);const a=(o,u)=>{let l,c;try{const d=(0,lr.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Ue.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}}bt.IotIdentityClient=Ue;Ue.INVALID_PAYLOAD_PARSING_ERROR="Invalid/unknown error parsing payload into response";var St={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.DiscoverResponse=Xe.GGGroup=Xe.GGCore=Xe.ConnectivityInfo=void 0;const ks=Bb;class wo{constructor(t,r,n,i){this.id=t,this.host_address=r,this.port=n,this.metadata=i}static from_json(t){return new wo(t.Id,t.HostAddress,t.PortNumber,t.Metadata)}}Xe.ConnectivityInfo=wo;class bo{constructor(t,r){this.thing_arn=t,this.connectivity=r}static from_json(t){const r=[];return t.Connectivity&&(0,ks.isArray)(t.Connectivity)&&t.Connectivity.forEach(n=>{r.push(wo.from_json(n))}),new bo(t.thingArn,r)}}Xe.GGCore=bo;class So{constructor(t,r=[],n=[]){this.gg_group_id=t,this.cores=r,this.certificate_authorities=n}static from_json(t){const r=[];return t.Cores&&(0,ks.isArray)(t.Cores)&&t.Cores.forEach(n=>{r.push(bo.from_json(n))}),new So(t.GGGroupId,r,t.CAs)}}Xe.GGGroup=So;class Js{constructor(t=[]){this.gg_groups=t}static from_json(t){const r=[];return t.GGGroups&&(0,ks.isArray)(t.GGGroups)&&t.GGGroups.forEach(n=>{r.push(So.from_json(n))}),new Js(r)}}Xe.DiscoverResponse=Js;var KG=g&&g.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),YG=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),XG=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&KG(t,e,r);return YG(t,e),t},ZG=g&&g.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(u,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(St,"__esModule",{value:!0});St.DiscoveryClient=St.DiscoveryError=St.model=void 0;const Lt=Kt,jG=Lr,op=XG(Xe);St.model=op;class Rs extends Error{constructor(t,r){super(t),this.response_code=r}}St.DiscoveryError=Rs;class e2{constructor(t,r,n,i,a=""){this.bootstrap=t,this.socket_options=r,this.tls_ctx=n,this.region=i,this.gg_server_name=a,this.gg_server_name!==""?this.endpoint=this.gg_server_name:this.endpoint=`greengrass-ats.iot.${i}.amazonaws.com`,this.connection_manager=new Lt.http.HttpClientConnectionManager(this.bootstrap,this.endpoint,Lt.io.is_alpn_available()?443:8443,4,16*1024,this.socket_options,new Lt.io.TlsConnectionOptions(this.tls_ctx,this.endpoint,Lt.io.is_alpn_available()?["x-amzn-http-ca"]:void 0))}discover(t){return new Promise((r,n)=>ZG(this,void 0,void 0,function*(){this.connection_manager.acquire().then(i=>{const a=new Lt.http.HttpRequest("GET",`/greengrass/discover/thing/${t}`,new Lt.http.HttpHeaders([["host",this.endpoint]])),o=i.request(a);let u="";o.on("response",(l,c)=>{l!=200&&n(new Rs(`Discovery failed (headers: ${c})`,l))}),o.on("data",l=>{u+=(0,jG.toUtf8)(new Uint8Array(l))}),o.on("end",()=>{const l=JSON.parse(u),c=op.DiscoverResponse.from_json(l);r(c)}),o.on("error",l=>{n(new Rs(l.toString()))}),o.activate()}).catch(i=>{n(new Lt.CrtError(i))})}))}}St.DiscoveryClient=e2;var Rt={},sp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.JobStatus=e.RejectedErrorCode=void 0,function(t){t.UNKNOWN_ENUM_VALUE="UNKNOWN_ENUM_VALUE",t.INVALID_TOPIC="InvalidTopic",t.INVALID_STATE_TRANSITION="InvalidStateTransition",t.RESOURCE_NOT_FOUND="ResourceNotFound",t.INVALID_REQUEST="InvalidRequest",t.REQUEST_THROTTLED="RequestThrottled",t.INTERNAL_ERROR="InternalError",t.TERMINAL_STATE_REACHED="TerminalStateReached",t.INVALID_JSON="InvalidJson",t.VERSION_MISMATCH="VersionMismatch"}(e.RejectedErrorCode||(e.RejectedErrorCode={})),function(t){t.UNKNOWN_ENUM_VALUE="UNKNOWN_ENUM_VALUE",t.IN_PROGRESS="IN_PROGRESS",t.FAILED="FAILED",t.QUEUED="QUEUED",t.TIMED_OUT="TIMED_OUT",t.SUCCEEDED="SUCCEEDED",t.CANCELED="CANCELED",t.REJECTED="REJECTED",t.REMOVED="REMOVED"}(e.JobStatus||(e.JobStatus={}))})(sp);var t2=g&&g.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),r2=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),up=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&t2(t,e,r);return r2(t,e),t},Ce=g&&g.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(u,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.IotJobsClient=Rt.IotJobsError=Rt.model=void 0;const n2=up(sp);Rt.model=n2;const We=Lr,yd=up(Ct);class _s extends Error{constructor(t,r){super(t),this.payload=r;const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.prototype=n}}Rt.IotJobsError=_s;class Re{static createClientError(t,r){return t instanceof Error?new _s(t.message,r):new _s(Re.INVALID_PAYLOAD_PARSING_ERROR,r)}constructor(t){t!==void 0&&(this.mqttAdapter=new yd.ServiceClientMqtt311Adapter(t))}static newFromMqtt5Client(t){let r=new Re;return r.mqttAdapter=new yd.ServiceClientMqtt5Adapter(t),r}publishDescribeJobExecution(t,r){return Ce(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/jobs/{jobId}/get";return n=n.replace("{thingName}",t.thingName),n=n.replace("{jobId}",t.jobId),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}publishGetPendingJobExecutions(t,r){return Ce(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/jobs/get";return n=n.replace("{thingName}",t.thingName),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}publishStartNextPendingJobExecution(t,r){return Ce(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/jobs/start-next";return n=n.replace("{thingName}",t.thingName),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}publishUpdateJobExecution(t,r){return Ce(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/jobs/{jobId}/update";return n=n.replace("{thingName}",t.thingName),n=n.replace("{jobId}",t.jobId),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}subscribeToDescribeJobExecutionAccepted(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/{jobId}/get/accepted";i=i.replace("{thingName}",t.thingName),i=i.replace("{jobId}",t.jobId);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToDescribeJobExecutionRejected(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/{jobId}/get/rejected";i=i.replace("{thingName}",t.thingName),i=i.replace("{jobId}",t.jobId);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToGetPendingJobExecutionsAccepted(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/get/accepted";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToGetPendingJobExecutionsRejected(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/get/rejected";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToJobExecutionsChangedEvents(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/notify";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToNextJobExecutionChangedEvents(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/notify-next";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToStartNextPendingJobExecutionAccepted(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/start-next/accepted";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToStartNextPendingJobExecutionRejected(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/start-next/rejected";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToUpdateJobExecutionAccepted(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/{jobId}/update/accepted";i=i.replace("{thingName}",t.thingName),i=i.replace("{jobId}",t.jobId);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToUpdateJobExecutionRejected(t,r,n){return Ce(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/jobs/{jobId}/update/rejected";i=i.replace("{thingName}",t.thingName),i=i.replace("{jobId}",t.jobId);const a=(o,u)=>{let l,c;try{const d=(0,We.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=Re.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}}Rt.IotJobsClient=Re;Re.INVALID_PAYLOAD_PARSING_ERROR="Invalid/unknown error parsing payload into response";var _t={},cp={};Object.defineProperty(cp,"__esModule",{value:!0});var i2=g&&g.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),a2=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lp=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&i2(t,e,r);return a2(t,e),t},ue=g&&g.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(u,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(_t,"__esModule",{value:!0});_t.IotShadowClient=_t.IotShadowError=_t.model=void 0;const o2=lp(cp);_t.model=o2;const be=Lr,wd=lp(Ct);class Os extends Error{constructor(t,r){super(t),this.payload=r;const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.prototype=n}}_t.IotShadowError=Os;class ce{static createClientError(t,r){return t instanceof Error?new Os(t.message,r):new Os(ce.INVALID_PAYLOAD_PARSING_ERROR,r)}constructor(t){t!==void 0&&(this.mqttAdapter=new wd.ServiceClientMqtt311Adapter(t))}static newFromMqtt5Client(t){let r=new ce;return r.mqttAdapter=new wd.ServiceClientMqtt5Adapter(t),r}publishDeleteNamedShadow(t,r){return ue(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/shadow/name/{shadowName}/delete";return n=n.replace("{thingName}",t.thingName),n=n.replace("{shadowName}",t.shadowName),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}publishDeleteShadow(t,r){return ue(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/shadow/delete";return n=n.replace("{thingName}",t.thingName),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}publishGetNamedShadow(t,r){return ue(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/shadow/name/{shadowName}/get";return n=n.replace("{thingName}",t.thingName),n=n.replace("{shadowName}",t.shadowName),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}publishGetShadow(t,r){return ue(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/shadow/get";return n=n.replace("{thingName}",t.thingName),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}publishUpdateNamedShadow(t,r){return ue(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/shadow/name/{shadowName}/update";return n=n.replace("{thingName}",t.thingName),n=n.replace("{shadowName}",t.shadowName),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}publishUpdateShadow(t,r){return ue(this,void 0,void 0,function*(){let n="$aws/things/{thingName}/shadow/update";return n=n.replace("{thingName}",t.thingName),this.mqttAdapter.publish(n,JSON.stringify(t),r)})}subscribeToDeleteNamedShadowAccepted(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/name/{shadowName}/delete/accepted";i=i.replace("{thingName}",t.thingName),i=i.replace("{shadowName}",t.shadowName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToDeleteNamedShadowRejected(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/name/{shadowName}/delete/rejected";i=i.replace("{thingName}",t.thingName),i=i.replace("{shadowName}",t.shadowName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToDeleteShadowAccepted(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/delete/accepted";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToDeleteShadowRejected(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/delete/rejected";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToGetNamedShadowAccepted(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/name/{shadowName}/get/accepted";i=i.replace("{thingName}",t.thingName),i=i.replace("{shadowName}",t.shadowName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToGetNamedShadowRejected(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/name/{shadowName}/get/rejected";i=i.replace("{thingName}",t.thingName),i=i.replace("{shadowName}",t.shadowName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToGetShadowAccepted(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/get/accepted";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToGetShadowRejected(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/get/rejected";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToNamedShadowDeltaUpdatedEvents(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/name/{shadowName}/update/delta";i=i.replace("{thingName}",t.thingName),i=i.replace("{shadowName}",t.shadowName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToNamedShadowUpdatedEvents(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/name/{shadowName}/update/documents";i=i.replace("{thingName}",t.thingName),i=i.replace("{shadowName}",t.shadowName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToShadowDeltaUpdatedEvents(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/update/delta";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToShadowUpdatedEvents(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/update/documents";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToUpdateNamedShadowAccepted(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/name/{shadowName}/update/accepted";i=i.replace("{thingName}",t.thingName),i=i.replace("{shadowName}",t.shadowName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToUpdateNamedShadowRejected(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/name/{shadowName}/update/rejected";i=i.replace("{thingName}",t.thingName),i=i.replace("{shadowName}",t.shadowName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToUpdateShadowAccepted(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/update/accepted";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}subscribeToUpdateShadowRejected(t,r,n){return ue(this,void 0,void 0,function*(){let i="$aws/things/{thingName}/shadow/update/rejected";i=i.replace("{thingName}",t.thingName);const a=(o,u)=>{let l,c;try{const d=(0,be.toUtf8)(new Uint8Array(u));l=JSON.parse(d)}catch(d){c=ce.createClientError(d,u)}finally{n(c,l)}};return this.mqttAdapter.subscribe(i,r,a)})}}_t.IotShadowClient=ce;ce.INVALID_PAYLOAD_PARSING_ERROR="Invalid/unknown error parsing payload into response";var Vn={};(function(e){var t=g&&g.__awaiter||function(R,E,N,M){function W(H){return H instanceof N?H:new N(function(Q){Q(H)})}return new(N||(N=Promise))(function(H,Q){function he(ge){try{ye(M.next(ge))}catch(ze){Q(ze)}}function Te(ge){try{ye(M.throw(ge))}catch(ze){Q(ze)}}function ye(ge){ge.done?H(ge.value):W(ge.value).then(he,Te)}ye((M=M.apply(R,E||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.createRpcError=e.StreamingOperation=e.RequestResponseOperation=e.RpcClient=e.validateRpcClientConfig=e.RpcError=e.RpcErrorType=void 0;const r=Kt,n=Jr,i=Lr;var a;(function(R){R[R.SerializationError=0]="SerializationError",R[R.DeserializationError=1]="DeserializationError",R[R.HandshakeError=2]="HandshakeError",R[R.InternalError=3]="InternalError",R[R.ClientStateError=4]="ClientStateError",R[R.NetworkError=5]="NetworkError",R[R.InterruptionError=6]="InterruptionError",R[R.ValidationError=7]="ValidationError",R[R.ServiceError=8]="ServiceError"})(a=e.RpcErrorType||(e.RpcErrorType={}));class o extends Error{constructor(E){super(E.description),this.type=E.type,this.description=E.description,E.internalError&&(this.internalError=E.internalError),E.serviceError&&(this.serviceError=E.serviceError)}}e.RpcError=o;function u(R){if(!R)throw h(a.ValidationError,"Eventstream RPC client configuration is undefined");if(!R.hostName)throw h(a.ValidationError,"Eventstream RPC client configuration must have a valid host name");if(typeof R.hostName!="string")throw h(a.ValidationError,"Eventstream RPC client configuration host name must be a string");if(R.port===void 0||R.port===null)throw h(a.ValidationError,"Eventstream RPC client configuration must have a valid port");if(typeof R.port!="number"||!Number.isSafeInteger(R.port)||R.port<0||R.port>65535)throw h(a.ValidationError,"Eventstream RPC client configuration host name must be 16-bit integer")}e.validateRpcClientConfig=u;var l;(function(R){R[R.None=0]="None",R[R.Connecting=1]="Connecting",R[R.Connected=2]="Connected",R[R.Finished=3]="Finished",R[R.Closed=4]="Closed"})(l||(l={}));class c extends n.EventEmitter{constructor(E){super(),this.config=E,this.unclosedOperations=new Set,this.state=l.None,this.emitDisconnectOnClose=!1;let N={hostName:E.hostName,port:E.port,socketOptions:E.socketOptions,tlsCtx:E.tlsCtx};try{this.connection=new r.eventstream.ClientConnection(N)}catch(M){throw h(a.InternalError,"Failed to create eventstream connection",M)}}static new(E){return new c(E)}connect(E){return t(this,void 0,void 0,function*(){return new Promise((N,M)=>t(this,void 0,void 0,function*(){if(this.state!=l.None){M(h(a.ClientStateError,"RpcClient.connect() can only be called once"));return}let W=Q=>{this.state==l.Connecting&&(this.state=l.Finished,M(h(a.NetworkError,"RpcClient.connect() failed - connection closed")),setImmediate(()=>{this.close()}))};this.connection.on("disconnection",W),this.state=l.Connecting;let H;try{yield this.connection.connect({cancelController:E==null?void 0:E.cancelController});let Q={type:r.eventstream.MessageType.Connect};this.config.connectTransform&&(Q=yield this.config.connectTransform({message:Q,cancelController:E==null?void 0:E.cancelController})),this._applyEventstreamRpcHeadersToConnect(Q);let he=r.cancel.newCancellablePromiseFromNextEvent({cancelController:E==null?void 0:E.cancelController,emitter:this.connection,eventName:r.eventstream.ClientConnection.PROTOCOL_MESSAGE,eventDataTransformer:Te=>Te.message,cancelMessage:"Eventstream connect() cancelled by user request"});yield this.connection.sendProtocolMessage({message:Q,cancelController:E==null?void 0:E.cancelController}),H=yield he}catch(Q){this.state==l.Connecting&&(this.state=l.Finished,setImmediate(()=>{this.close()})),M(h(a.InternalError,"Failed to establish eventstream RPC connection",Q));return}if(this.state!=l.Connecting){M(h(a.InternalError,"Eventstream RPC connection attempt interrupted"));return}if(!H||!c.isValidConnack(H)){this.state=l.Finished,M(h(a.HandshakeError,"Failed to establish eventstream RPC connection - invalid connack")),setImmediate(()=>{this.close()});return}this.connection.removeListener("disconnection",W),this.connection.on("disconnection",Q=>{Q.errorCode!=0&&(this.disconnectionReason=new r.CrtError(Q.errorCode)),setImmediate(()=>{this.close()})}),this.emitDisconnectOnClose=!0,this.state=l.Connected,N({})}))})}isConnected(){return this.state==l.Connected}registerUnclosedOperation(E){if(!this.isConnected()||!this.unclosedOperations)throw h(a.ClientStateError,"Operation registration only allowed when the client is connected");this.unclosedOperations.add(E)}removeUnclosedOperation(E){this.unclosedOperations&&this.unclosedOperations.delete(E)}close(){return t(this,void 0,void 0,function*(){return new Promise((E,N)=>t(this,void 0,void 0,function*(){try{if(this.state==l.Closed){E();return}if(this.state=l.Closed,this.emitDisconnectOnClose&&(this.emitDisconnectOnClose=!1,this.disconnectionReason||(this.disconnectionReason=new r.CrtError("User-initiated disconnect")),setImmediate(()=>{this.emit("disconnection",{reason:this.disconnectionReason})})),this.unclosedOperations){let M=this.unclosedOperations;this.unclosedOperations=void 0;for(const W of M)yield W.close()}this.connection.close(),E()}catch(M){N(M)}}))})}newStream(){if(this.state!=l.Connected)throw h(a.ClientStateError,"New streams may only be created while the client is connected");try{return this.connection.newStream()}catch(E){throw h(a.InternalError,"Failed to create new event stream",E)}}on(E,N){return super.on(E,N),this}static isValidConnack(E){var N;return!(E.type!=r.eventstream.MessageType.ConnectAck||!(((N=E.flags)!==null&&N!==void 0?N:0)&r.eventstream.MessageFlags.ConnectionAccepted))}_applyEventstreamRpcHeadersToConnect(E){E.headers||(E.headers=[]),E.headers.push(r.eventstream.Header.newString(":version","0.1.0"))}}e.RpcClient=c,c.DISCONNECTION="disconnection";var d;(function(R){R[R.None=0]="None",R[R.Activating=1]="Activating",R[R.Activated=2]="Activated",R[R.Ended=3]="Ended",R[R.Closed=4]="Closed"})(d||(d={}));class f extends n.EventEmitter{constructor(E){super(),this.operationConfig=E,this.state=d.None,this.stream=E.client.newStream(),E.client.registerUnclosedOperation(this)}close(){return t(this,void 0,void 0,function*(){return new Promise((E,N)=>t(this,void 0,void 0,function*(){if(this.state==d.Closed){E();return}this.operationConfig.client.removeUnclosedOperation(this);let M=this.state==d.Activated;if(this.state=d.Closed,M)try{yield this.stream.sendMessage({message:{type:r.eventstream.MessageType.ApplicationMessage,flags:r.eventstream.MessageFlags.TerminateStream}})}catch{}setImmediate(()=>{this.stream.close()}),E()}))})}activate(E){return t(this,void 0,void 0,function*(){return new Promise((N,M)=>t(this,void 0,void 0,function*(){if(this.state!=d.None){M(h(a.ClientStateError,"Eventstream operations may only have activate() invoked once"));return}this.state=d.Activating;try{yield this.stream.activate({operation:this.operationConfig.name,message:E,cancelController:this.operationConfig.options.cancelController})}catch(W){this.state==d.Activating&&(this.state=d.Ended,setImmediate(()=>{this.close()})),M(h(a.InternalError,"Operation stream activation failure",W));return}if(this.state!=d.Activating){M(h(a.InternalError,"Operation stream activation interruption"));return}this.state=d.Activated,N({})}))})}isActive(){return this.state==d.Activated}getStream(){return this.stream}setStateEnded(){this.state=d.Ended}}class m extends n.EventEmitter{constructor(E,N){if(!N.operations.has(E.name))throw h(a.InternalError,`service model has no operation named ${E.name}`);super(),this.operationConfig=E,this.serviceModel=N,this.operation=new f(this.operationConfig)}activate(E){return t(this,void 0,void 0,function*(){return new Promise((W,H)=>t(this,void 0,void 0,function*(){var Q;try{let he=this.operation.getStream(),Te=r.cancel.newCancellablePromiseFromNextEvent({cancelController:this.operationConfig.options.cancelController,emitter:he,eventName:r.eventstream.ClientStream.MESSAGE,eventDataTransformer:$r=>$r.message,cancelMessage:"Eventstream execute() cancelled by user request"});this.operationConfig.options.disableValidation||T(this.serviceModel,this.operationConfig.name,E);let ye=I(this.serviceModel,this.operationConfig.name,E);yield this.operation.activate(ye);let ge=yield Te;((Q=ge.flags)!==null&&Q!==void 0?Q:0)&r.eventstream.MessageFlags.TerminateStream&&this.operation.setStateEnded();let ze=L(this.serviceModel,this.operationConfig.name,ge);W(ze)}catch(he){H(he)}})).finally(()=>t(this,void 0,void 0,function*(){yield this.operation.close()}))})}}e.RequestResponseOperation=m;class v extends n.EventEmitter{constructor(E,N,M){if(!M.operations.has(N.name))throw h(a.InternalError,`service model has no operation named ${N.name}`);N.options.disableValidation||T(M,N.name,E),super(),this.request=E,this.operationConfig=N,this.serviceModel=M,this.operation=new f(N),this.responseHandled=!1}activate(){return t(this,void 0,void 0,function*(){return new Promise((E,N)=>t(this,void 0,void 0,function*(){var M;try{let W=this.operation.getStream();W.addListener(r.eventstream.ClientStream.MESSAGE,this._onStreamMessageEvent.bind(this)),W.addListener(r.eventstream.ClientStream.ENDED,this._onStreamEndedEvent.bind(this));let H=r.cancel.newCancellablePromiseFromNextEvent({cancelController:this.operationConfig.options.cancelController,emitter:W,eventName:r.eventstream.ClientStream.MESSAGE,eventDataTransformer:ye=>(this.responseHandled=!0,ye.message),cancelMessage:"Eventstream execute() cancelled by user request"}),Q=I(this.serviceModel,this.operationConfig.name,this.request);yield this.operation.activate(Q);let he=yield H,Te=L(this.serviceModel,this.operationConfig.name,he);((M=he.flags)!==null&&M!==void 0?M:0)&r.eventstream.MessageFlags.TerminateStream&&(this.operation.setStateEnded(),yield this.close()),E(Te)}catch(W){yield this.close(),N(W)}}))})}sendMessage(E){return t(this,void 0,void 0,function*(){return new Promise((N,M)=>t(this,void 0,void 0,function*(){try{if(!A(this.serviceModel,this.operationConfig.name))throw h(a.ValidationError,`Operation '${this.operationConfig.name}' does not allow outbound streaming messages.`);this.operationConfig.options.disableValidation||S(this.serviceModel,this.operationConfig.name,E);let W=z(this.serviceModel,this.operationConfig.name,E);yield this.operation.getStream().sendMessage({message:W,cancelController:this.operationConfig.options.cancelController}),N()}catch(W){M(W)}}))})}close(){return t(this,void 0,void 0,function*(){return this.operation.close()})}on(E,N){return super.on(E,N),this}_onStreamMessageEvent(E){if(this.responseHandled)try{let N=G(this.serviceModel,this.operationConfig.name,E.message);setImmediate(()=>{this.emit(v.MESSAGE,N)})}catch(N){setImmediate(()=>{this.emit(v.STREAM_ERROR,N)})}}_onStreamEndedEvent(E){setImmediate(()=>t(this,void 0,void 0,function*(){this.emit(v.ENDED,{}),yield this.close()}))}}e.StreamingOperation=v,v.ENDED="ended",v.STREAM_ERROR="streamError",v.MESSAGE="message";function h(R,E,N,M){return new o({type:R,description:E,internalError:N,serviceError:M})}e.createRpcError=h;const y="service-model-type",_=":content-type",O="text/plain";function P(R,E){if(R.headers)try{for(const N of R.headers)if(N.name===E)return N.asString()}catch{return}}function C(R,E,N){if(!N)throw h(a.ValidationError,`Shape of type '${E}' is undefined`);let M=R.validators.get(E);if(!M)throw h(a.ValidationError,`No shape named '${E}' exists in the service model`);M(N)}function b(R,E,N,M){let W=R.operations.get(E);if(!W)throw h(a.InternalError,`No operation named '${E}' exists in the service model`);let H=M(W);if(!H)throw h(a.ValidationError,`Operation '${E}' does not have a defined selection shape`);return C(R,H,N)}function T(R,E,N){b(R,E,N,M=>M.requestShape)}function S(R,E,N){b(R,E,N,M=>M.outboundMessageShape)}function A(R,E){let N=R.operations.get(E);if(!N)throw h(a.InternalError,`No operation named '${E}' exists in the service model`);return N.outboundMessageShape!==void 0}function F(R,E,N,M){let W=R.operations.get(E);if(!W)throw h(a.InternalError,`No operation named '${E}' exists in the service model`);let H=M(W);if(!H)throw h(a.InternalError,`Operation '${E}' does not have a defined selection shape`);let Q=R.serializers.get(H);if(!Q)throw h(a.InternalError,`No top-level shape serializer for '${H}' exists in the service model`);return Q(N)}function I(R,E,N){return F(R,E,N,M=>M.requestShape)}function z(R,E,N){return F(R,E,N,M=>M.outboundMessageShape)}function U(R,E,N,M){if(!N){if(M.type!=r.eventstream.MessageType.ApplicationMessage&&M.type==r.eventstream.MessageType.ApplicationError){let ye=P(M,_);if(ye&&ye===O){let ge=(0,i.toUtf8)(new Uint8Array(M.payload));throw h(a.InternalError,`Eventstream (response) message was not a modelled shape.  Plain text payload is: '${ge}'`)}}throw h(a.InternalError,"Eventstream (response) message was not an application message")}let W=E.has(N),H;if(W){let ye=R.deserializers.get(N);ye&&(H=ye(M))}let Q=H?a.ServiceError:a.InternalError,he=H?"Eventstream RPC request failed.  Check serviceError property for details.":`Unexpected response shape received: '${N}'`;throw h(Q,he,void 0,H)}function $(R,E,N,M){let W=R.operations.get(E);if(!W)throw h(a.InternalError,`No operation named '${E}' exists in the service model`);let H=P(N,y),Q=M(W);if(!H||H!==Q||!Q){U(R,W.errorShapes,H,N);return}let he=R.deserializers.get(Q);if(!he)throw h(a.InternalError,`No top-level shape deserializer for '${Q}' exists in the service model`);return he(N)}function L(R,E,N){return $(R,E,N,M=>M.responseShape)}function G(R,E,N){return $(R,E,N,M=>M.inboundMessageShape)}})(Vn);var dp={},Qt={},fp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QOS=e.ReceiveMode=e.ReportedLifecycleState=e.RequestStatus=e.FailureHandlingPolicy=e.CertificateType=e.ConfigurationValidityStatus=e.PayloadFormat=e.MetricUnitType=e.LifecycleState=e.DeploymentStatus=e.DetailedDeploymentStatus=void 0,function(t){t.SUCCESSFUL="SUCCESSFUL",t.FAILED_NO_STATE_CHANGE="FAILED_NO_STATE_CHANGE",t.FAILED_ROLLBACK_NOT_REQUESTED="FAILED_ROLLBACK_NOT_REQUESTED",t.FAILED_ROLLBACK_COMPLETE="FAILED_ROLLBACK_COMPLETE",t.REJECTED="REJECTED"}(e.DetailedDeploymentStatus||(e.DetailedDeploymentStatus={})),function(t){t.QUEUED="QUEUED",t.IN_PROGRESS="IN_PROGRESS",t.SUCCEEDED="SUCCEEDED",t.FAILED="FAILED",t.CANCELED="CANCELED"}(e.DeploymentStatus||(e.DeploymentStatus={})),function(t){t.RUNNING="RUNNING",t.ERRORED="ERRORED",t.NEW="NEW",t.FINISHED="FINISHED",t.INSTALLED="INSTALLED",t.BROKEN="BROKEN",t.STARTING="STARTING",t.STOPPING="STOPPING"}(e.LifecycleState||(e.LifecycleState={})),function(t){t.BYTES="BYTES",t.BYTES_PER_SECOND="BYTES_PER_SECOND",t.COUNT="COUNT",t.COUNT_PER_SECOND="COUNT_PER_SECOND",t.MEGABYTES="MEGABYTES",t.SECONDS="SECONDS"}(e.MetricUnitType||(e.MetricUnitType={})),function(t){t.BYTES="0",t.UTF8="1"}(e.PayloadFormat||(e.PayloadFormat={})),function(t){t.ACCEPTED="ACCEPTED",t.REJECTED="REJECTED"}(e.ConfigurationValidityStatus||(e.ConfigurationValidityStatus={})),function(t){t.SERVER="SERVER"}(e.CertificateType||(e.CertificateType={})),function(t){t.ROLLBACK="ROLLBACK",t.DO_NOTHING="DO_NOTHING"}(e.FailureHandlingPolicy||(e.FailureHandlingPolicy={})),function(t){t.SUCCEEDED="SUCCEEDED",t.FAILED="FAILED"}(e.RequestStatus||(e.RequestStatus={})),function(t){t.RUNNING="RUNNING",t.ERRORED="ERRORED"}(e.ReportedLifecycleState||(e.ReportedLifecycleState={})),function(t){t.RECEIVE_ALL_MESSAGES="RECEIVE_ALL_MESSAGES",t.RECEIVE_MESSAGES_FROM_OTHERS="RECEIVE_MESSAGES_FROM_OTHERS"}(e.ReceiveMode||(e.ReceiveMode={})),function(t){t.AT_MOST_ONCE="0",t.AT_LEAST_ONCE="1"}(e.QOS||(e.QOS={}))})(fp);var s={},x={},s2=g&&g.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),u2=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c2=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&s2(t,e,r);return u2(t,e),t};Object.defineProperty(x,"__esModule",{value:!0});x.validateValueAsUnion=x.validateValueAsOptionalObject=x.validateValueAsObject=x.validateValueAsOptionalMap=x.validateValueAsMap=x.validateValueAsOptionalArray=x.validateValueAsArray=x.validateValueAsOptionalAny=x.validateValueAsAny=x.validateValueAsOptionalBlob=x.validateValueAsBlob=x.validateValueAsOptionalDate=x.validateValueAsDate=x.validateValueAsOptionalBoolean=x.validateValueAsBoolean=x.validateValueAsOptionalInteger=x.validateValueAsInteger=x.validateValueAsOptionalNumber=x.validateValueAsNumber=x.validateValueAsOptionalString=x.validateValueAsString=x.setDefinedObjectPropertyAsMap=x.setDefinedMapPropertyAsObject=x.normalizeMapValueAsObject=x.setDefinedArrayProperty=x.normalizeArrayValue=x.setDefinedProperty=x.transformNumberAsDate=x.encodeDateAsNumber=x.transformStringAsPayload=x.encodePayloadAsString=void 0;const oe=c2(Vn),wt=Kt;function l2(e){return Buffer.from(e).toString("base64")}x.encodePayloadAsString=l2;function d2(e){return Buffer.from(e,"base64")}x.transformStringAsPayload=d2;function f2(e){return e.getTime()/1e3}x.encodeDateAsNumber=f2;function p2(e){return new Date(e*1e3)}x.transformNumberAsDate=p2;function m2(e,t,r,n){r===void 0||r==null||(n?e[t]=n(r):e[t]=r)}x.setDefinedProperty=m2;function pp(e,t){if(t==null)return e;let r=new Array;for(const n of e)r.push(t(n));return r}x.normalizeArrayValue=pp;function v2(e,t,r,n){r===void 0||r==null||(e[t]=pp(r,n))}x.setDefinedArrayProperty=v2;function mp(e,t,r){let n={};for(const[i,a]of e.entries()){let o=t?t(i):i,u=r?r(a):a;n[o]=u}return n}x.normalizeMapValueAsObject=mp;function h2(e,t,r,n,i){r===void 0||r==null||(e[t]=mp(r))}x.setDefinedMapPropertyAsObject=h2;function g2(e,t,r,n,i){if(r===void 0||r==null)return;let a=new Map;for(const o in r){let u=n?n(o):o,l=i?i(r[o]):r[o];a.set(u,l)}e[t]=a}x.setDefinedObjectPropertyAsMap=g2;function mt(e,t){throw e&&t?oe.createRpcError(oe.RpcErrorType.ValidationError,`Missing required property '${e}' of type '${t}'`):oe.createRpcError(oe.RpcErrorType.ValidationError,"Missing required property")}function Nt(e,t,r){throw t&&r?oe.createRpcError(oe.RpcErrorType.ValidationError,`Property '${t}' of type '${r}' must be ${e}`):oe.createRpcError(oe.RpcErrorType.ValidationError,`Property must be ${e}`)}function vp(e,t,r){e===void 0&&mt(t,r),typeof e!="string"&&Nt("a string value",t,r)}x.validateValueAsString=vp;function y2(e,t,r){e!==void 0&&vp(e,t,r)}x.validateValueAsOptionalString=y2;function hp(e,t,r){e===void 0&&mt(t,r),typeof e!="number"&&Nt("a number value",t,r)}x.validateValueAsNumber=hp;function w2(e,t,r){e!==void 0&&hp(e,t,r)}x.validateValueAsOptionalNumber=w2;function gp(e,t,r){e===void 0&&mt(t,r),(typeof e!="number"||!Number.isSafeInteger(e))&&Nt("an integer value",t,r)}x.validateValueAsInteger=gp;function b2(e,t,r){e!==void 0&&gp(e,t,r)}x.validateValueAsOptionalInteger=b2;function yp(e,t,r){e===void 0&&mt(t,r),typeof e!="boolean"&&Nt("a boolean value",t,r)}x.validateValueAsBoolean=yp;function S2(e,t,r){e!==void 0&&yp(e,t,r)}x.validateValueAsOptionalBoolean=S2;function wp(e,t,r){e===void 0&&mt(t,r),(!(e instanceof Date)||isNaN(e.getTime()))&&Nt("a Date value",t,r)}x.validateValueAsDate=wp;function R2(e,t,r){e!==void 0&&wp(e,t,r)}x.validateValueAsOptionalDate=R2;function bp(e,t,r){e===void 0&&mt(t,r),typeof e!="string"&&!ArrayBuffer.isView(e)&&(!e.byteLength||!e.maxByteLength)&&Nt("a value convertible to a binary payload",t,r)}x.validateValueAsBlob=bp;function _2(e,t,r){e!==void 0&&bp(e,t,r)}x.validateValueAsOptionalBlob=_2;function Sp(e,t,r){e===void 0&&mt(t,r)}x.validateValueAsAny=Sp;function O2(e,t,r){e!==void 0&&Sp(e,t,r)}x.validateValueAsOptionalAny=O2;function Rp(e,t,r,n){e===void 0&&mt(r,n),Array.isArray(e)||Nt("an array value",r,n);for(const i of e)try{t(i)}catch(a){let o=a;throw r&&n?oe.createRpcError(oe.RpcErrorType.ValidationError,`Array property '${r}' of type '${n}' contains an invalid value`,new wt.CrtError(o.toString())):oe.createRpcError(oe.RpcErrorType.ValidationError,"Array contains an invalid value",new wt.CrtError(o.toString()))}}x.validateValueAsArray=Rp;function E2(e,t,r,n){e!==void 0&&Rp(e,t,r,n)}x.validateValueAsOptionalArray=E2;function _p(e,t,r,n,i){if(e===void 0)return;e instanceof Map||Nt("a map value",n,i);let a=e;for(const[o,u]of a){try{t(o)}catch(l){let c=l;throw n&&i?oe.createRpcError(oe.RpcErrorType.ValidationError,`Map property '${n}' of type '${i}' contains an invalid key`,new wt.CrtError(c.toString())):oe.createRpcError(oe.RpcErrorType.ValidationError,"Map contains an invalid key",new wt.CrtError(c.toString()))}try{r(u)}catch(l){let c=l;throw n&&i?oe.createRpcError(oe.RpcErrorType.ValidationError,`Map property '${n}' of type '${i}' contains an invalid value`,new wt.CrtError(c.toString())):oe.createRpcError(oe.RpcErrorType.ValidationError,"Map contains an invalid value",new wt.CrtError(c.toString()))}}}x.validateValueAsMap=_p;function T2(e,t,r,n,i){e!==void 0&&_p(e,t,r,n,i)}x.validateValueAsOptionalMap=T2;function Op(e,t,r,n){e===void 0&&mt(r,n);try{t(e)}catch(i){let a=i;throw oe.createRpcError(oe.RpcErrorType.ValidationError,`Property '${r}' of type '${n}' contains an invalid value`,new wt.CrtError(a.toString()))}}x.validateValueAsObject=Op;function C2(e,t,r,n){e!==void 0&&Op(e,t,r,n)}x.validateValueAsOptionalObject=C2;function P2(e,t){let r=0;for(const n of t)e.hasOwnProperty(n)&&(r+=1);return r}function A2(e,t){let r=P2(e,t.keys());if(r!=1)throw oe.createRpcError(oe.RpcErrorType.ValidationError,`Union has ${r} properties set`);for(const[n,i]of t.entries()){let a=e[n];if(a&&i)try{i(a)}catch(o){let u=o;throw oe.createRpcError(oe.RpcErrorType.ValidationError,`Union property '${n}' contains an invalid value`,new wt.CrtError(u.toString()))}}}x.validateValueAsUnion=A2;var D2=g&&g.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),I2=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),N2=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&D2(t,e,r);return I2(t,e),t};Object.defineProperty(s,"__esModule",{value:!0});s.normalizeCancelLocalDeploymentResponse=s.normalizeListNamedShadowsForThingRequest=s.normalizeListNamedShadowsForThingResponse=s.normalizeSubscribeToComponentUpdatesRequest=s.normalizeSubscribeToComponentUpdatesResponse=s.normalizeListLocalDeploymentsRequest=s.normalizeListLocalDeploymentsResponse=s.normalizeStopComponentRequest=s.normalizeStopComponentResponse=s.normalizeComponentNotFoundError=s.normalizePauseComponentRequest=s.normalizePauseComponentResponse=s.normalizeUnauthorizedError=s.normalizeResourceNotFoundError=s.normalizeCreateLocalDeploymentRequest=s.normalizeCreateLocalDeploymentResponse=s.normalizeServiceError=s.normalizeInvalidRecipeDirectoryPathError=s.normalizeInvalidArtifactsDirectoryPathError=s.normalizeInvalidArgumentsError=s.normalizeIoTCoreMessage=s.normalizeConfigurationUpdateEvents=s.normalizeValidateConfigurationUpdateEvents=s.normalizeSubscriptionResponseMessage=s.normalizeCredentialDocument=s.normalizePublishMessage=s.normalizeCertificateOptions=s.normalizeCertificateUpdateEvent=s.normalizeClientDeviceCredential=s.normalizeConfigurationValidityReport=s.normalizeSecretValue=s.normalizeComponentUpdatePolicyEvents=s.normalizeMQTTMessage=s.normalizeConfigurationUpdateEvent=s.normalizeMetric=s.normalizeValidateConfigurationUpdateEvent=s.normalizeMQTTCredential=s.normalizeJsonMessage=s.normalizeBinaryMessage=s.normalizeCertificateUpdate=s.normalizeComponentDetails=s.normalizePreComponentUpdateEvent=s.normalizePostComponentUpdateEvent=s.normalizeLocalDeployment=s.normalizeRunWithInfo=s.normalizeMessageContext=s.normalizeDeploymentStatusDetails=s.normalizeSystemResourceLimits=s.normalizeUserProperty=s.makeServiceModel=void 0;s.normalizePutComponentMetricRequest=s.normalizePutComponentMetricResponse=s.normalizeDeferComponentUpdateRequest=s.normalizeDeferComponentUpdateResponse=s.normalizeSubscribeToValidateConfigurationUpdatesRequest=s.normalizeSubscribeToValidateConfigurationUpdatesResponse=s.normalizeGetConfigurationRequest=s.normalizeGetConfigurationResponse=s.normalizeSubscribeToTopicRequest=s.normalizeSubscribeToTopicResponse=s.normalizeGetComponentDetailsRequest=s.normalizeGetComponentDetailsResponse=s.normalizeGetClientDeviceAuthTokenRequest=s.normalizeGetClientDeviceAuthTokenResponse=s.normalizeInvalidCredentialError=s.normalizePublishToTopicRequest=s.normalizePublishToTopicResponse=s.normalizeSubscribeToCertificateUpdatesRequest=s.normalizeSubscribeToCertificateUpdatesResponse=s.normalizeVerifyClientDeviceIdentityRequest=s.normalizeVerifyClientDeviceIdentityResponse=s.normalizeAuthorizeClientDeviceActionRequest=s.normalizeAuthorizeClientDeviceActionResponse=s.normalizeInvalidClientDeviceAuthTokenError=s.normalizeListComponentsRequest=s.normalizeListComponentsResponse=s.normalizeCreateDebugPasswordRequest=s.normalizeCreateDebugPasswordResponse=s.normalizeGetThingShadowRequest=s.normalizeGetThingShadowResponse=s.normalizeSendConfigurationValidityReportRequest=s.normalizeSendConfigurationValidityReportResponse=s.normalizeUpdateThingShadowRequest=s.normalizeUpdateThingShadowResponse=s.normalizeUpdateConfigurationRequest=s.normalizeUpdateConfigurationResponse=s.normalizeConflictError=s.normalizeFailedUpdateConditionCheckError=s.normalizeValidateAuthorizationTokenRequest=s.normalizeValidateAuthorizationTokenResponse=s.normalizeInvalidTokenError=s.normalizeRestartComponentRequest=s.normalizeRestartComponentResponse=s.normalizeGetLocalDeploymentStatusRequest=s.normalizeGetLocalDeploymentStatusResponse=s.normalizeGetSecretValueRequest=s.normalizeGetSecretValueResponse=s.normalizeUpdateStateRequest=s.normalizeUpdateStateResponse=s.normalizeCancelLocalDeploymentRequest=void 0;s.validateComponentNotFoundError=s.validatePauseComponentRequest=s.validatePauseComponentResponse=s.validateUnauthorizedError=s.validateResourceNotFoundError=s.validateCreateLocalDeploymentRequest=s.validateCreateLocalDeploymentResponse=s.validateServiceError=s.validateInvalidRecipeDirectoryPathError=s.validateInvalidArtifactsDirectoryPathError=s.validateInvalidArgumentsError=s.validateIoTCoreMessage=s.validateConfigurationUpdateEvents=s.validateValidateConfigurationUpdateEvents=s.validateSubscriptionResponseMessage=s.validateCredentialDocument=s.validatePublishMessage=s.validateCertificateOptions=s.validateCertificateUpdateEvent=s.validateClientDeviceCredential=s.validateConfigurationValidityReport=s.validateSecretValue=s.validateComponentUpdatePolicyEvents=s.validateMQTTMessage=s.validateConfigurationUpdateEvent=s.validateMetric=s.validateValidateConfigurationUpdateEvent=s.validateMQTTCredential=s.validateJsonMessage=s.validateBinaryMessage=s.validateCertificateUpdate=s.validateComponentDetails=s.validatePreComponentUpdateEvent=s.validatePostComponentUpdateEvent=s.validateLocalDeployment=s.validateRunWithInfo=s.validateMessageContext=s.validateDeploymentStatusDetails=s.validateSystemResourceLimits=s.validateUserProperty=s.normalizeSubscribeToIoTCoreRequest=s.normalizeSubscribeToIoTCoreResponse=s.normalizeResumeComponentRequest=s.normalizeResumeComponentResponse=s.normalizePublishToIoTCoreRequest=s.normalizePublishToIoTCoreResponse=s.normalizeSubscribeToConfigurationUpdateRequest=s.normalizeSubscribeToConfigurationUpdateResponse=s.normalizeDeleteThingShadowRequest=s.normalizeDeleteThingShadowResponse=void 0;s.validateSubscribeToTopicResponse=s.validateGetComponentDetailsRequest=s.validateGetComponentDetailsResponse=s.validateGetClientDeviceAuthTokenRequest=s.validateGetClientDeviceAuthTokenResponse=s.validateInvalidCredentialError=s.validatePublishToTopicRequest=s.validatePublishToTopicResponse=s.validateSubscribeToCertificateUpdatesRequest=s.validateSubscribeToCertificateUpdatesResponse=s.validateVerifyClientDeviceIdentityRequest=s.validateVerifyClientDeviceIdentityResponse=s.validateAuthorizeClientDeviceActionRequest=s.validateAuthorizeClientDeviceActionResponse=s.validateInvalidClientDeviceAuthTokenError=s.validateListComponentsRequest=s.validateListComponentsResponse=s.validateCreateDebugPasswordRequest=s.validateCreateDebugPasswordResponse=s.validateGetThingShadowRequest=s.validateGetThingShadowResponse=s.validateSendConfigurationValidityReportRequest=s.validateSendConfigurationValidityReportResponse=s.validateUpdateThingShadowRequest=s.validateUpdateThingShadowResponse=s.validateUpdateConfigurationRequest=s.validateUpdateConfigurationResponse=s.validateConflictError=s.validateFailedUpdateConditionCheckError=s.validateValidateAuthorizationTokenRequest=s.validateValidateAuthorizationTokenResponse=s.validateInvalidTokenError=s.validateRestartComponentRequest=s.validateRestartComponentResponse=s.validateGetLocalDeploymentStatusRequest=s.validateGetLocalDeploymentStatusResponse=s.validateGetSecretValueRequest=s.validateGetSecretValueResponse=s.validateUpdateStateRequest=s.validateUpdateStateResponse=s.validateCancelLocalDeploymentRequest=s.validateCancelLocalDeploymentResponse=s.validateListNamedShadowsForThingRequest=s.validateListNamedShadowsForThingResponse=s.validateSubscribeToComponentUpdatesRequest=s.validateSubscribeToComponentUpdatesResponse=s.validateListLocalDeploymentsRequest=s.validateListLocalDeploymentsResponse=s.validateStopComponentRequest=s.validateStopComponentResponse=void 0;s.deserializeInvalidArtifactsDirectoryPathError=s.deserializeInvalidArgumentsError=s.deserializeIoTCoreMessage=s.deserializeConfigurationUpdateEvents=s.deserializeValidateConfigurationUpdateEvents=s.deserializeSubscriptionResponseMessage=s.deserializeCredentialDocument=s.deserializePublishMessage=s.deserializeCertificateOptions=s.deserializeCertificateUpdateEvent=s.deserializeClientDeviceCredential=s.deserializeConfigurationValidityReport=s.deserializeSecretValue=s.deserializeComponentUpdatePolicyEvents=s.deserializeMQTTMessage=s.deserializeConfigurationUpdateEvent=s.deserializeMetric=s.deserializeValidateConfigurationUpdateEvent=s.deserializeMQTTCredential=s.deserializeJsonMessage=s.deserializeBinaryMessage=s.deserializeCertificateUpdate=s.deserializeComponentDetails=s.deserializePreComponentUpdateEvent=s.deserializePostComponentUpdateEvent=s.deserializeLocalDeployment=s.deserializeRunWithInfo=s.deserializeMessageContext=s.deserializeDeploymentStatusDetails=s.deserializeSystemResourceLimits=s.deserializeUserProperty=s.validateSubscribeToIoTCoreRequest=s.validateSubscribeToIoTCoreResponse=s.validateResumeComponentRequest=s.validateResumeComponentResponse=s.validatePublishToIoTCoreRequest=s.validatePublishToIoTCoreResponse=s.validateSubscribeToConfigurationUpdateRequest=s.validateSubscribeToConfigurationUpdateResponse=s.validateDeleteThingShadowRequest=s.validateDeleteThingShadowResponse=s.validatePutComponentMetricRequest=s.validatePutComponentMetricResponse=s.validateDeferComponentUpdateRequest=s.validateDeferComponentUpdateResponse=s.validateSubscribeToValidateConfigurationUpdatesRequest=s.validateSubscribeToValidateConfigurationUpdatesResponse=s.validateGetConfigurationRequest=s.validateGetConfigurationResponse=s.validateSubscribeToTopicRequest=void 0;s.deserializeSubscribeToCertificateUpdatesResponse=s.deserializeVerifyClientDeviceIdentityRequest=s.deserializeVerifyClientDeviceIdentityResponse=s.deserializeAuthorizeClientDeviceActionRequest=s.deserializeAuthorizeClientDeviceActionResponse=s.deserializeInvalidClientDeviceAuthTokenError=s.deserializeListComponentsRequest=s.deserializeListComponentsResponse=s.deserializeCreateDebugPasswordRequest=s.deserializeCreateDebugPasswordResponse=s.deserializeGetThingShadowRequest=s.deserializeGetThingShadowResponse=s.deserializeSendConfigurationValidityReportRequest=s.deserializeSendConfigurationValidityReportResponse=s.deserializeUpdateThingShadowRequest=s.deserializeUpdateThingShadowResponse=s.deserializeUpdateConfigurationRequest=s.deserializeUpdateConfigurationResponse=s.deserializeConflictError=s.deserializeFailedUpdateConditionCheckError=s.deserializeValidateAuthorizationTokenRequest=s.deserializeValidateAuthorizationTokenResponse=s.deserializeInvalidTokenError=s.deserializeRestartComponentRequest=s.deserializeRestartComponentResponse=s.deserializeGetLocalDeploymentStatusRequest=s.deserializeGetLocalDeploymentStatusResponse=s.deserializeGetSecretValueRequest=s.deserializeGetSecretValueResponse=s.deserializeUpdateStateRequest=s.deserializeUpdateStateResponse=s.deserializeCancelLocalDeploymentRequest=s.deserializeCancelLocalDeploymentResponse=s.deserializeListNamedShadowsForThingRequest=s.deserializeListNamedShadowsForThingResponse=s.deserializeSubscribeToComponentUpdatesRequest=s.deserializeSubscribeToComponentUpdatesResponse=s.deserializeListLocalDeploymentsRequest=s.deserializeListLocalDeploymentsResponse=s.deserializeStopComponentRequest=s.deserializeStopComponentResponse=s.deserializeComponentNotFoundError=s.deserializePauseComponentRequest=s.deserializePauseComponentResponse=s.deserializeUnauthorizedError=s.deserializeResourceNotFoundError=s.deserializeCreateLocalDeploymentRequest=s.deserializeCreateLocalDeploymentResponse=s.deserializeServiceError=s.deserializeInvalidRecipeDirectoryPathError=void 0;s.deserializeEventstreamMessageToVerifyClientDeviceIdentityResponse=s.deserializeEventstreamMessageToSubscribeToComponentUpdatesResponse=s.deserializeEventstreamMessageToListComponentsResponse=s.deserializeEventstreamMessageToDeferComponentUpdateResponse=s.deserializeEventstreamMessageToUpdateStateResponse=s.deserializeEventstreamMessageToIoTCoreMessage=s.deserializeEventstreamMessageToComponentUpdatePolicyEvents=s.deserializeEventstreamMessageToPutComponentMetricResponse=s.deserializeEventstreamMessageToGetComponentDetailsResponse=s.deserializeEventstreamMessageToInvalidArgumentsError=s.deserializeEventstreamMessageToResumeComponentResponse=s.deserializeEventstreamMessageToListLocalDeploymentsResponse=s.deserializeEventstreamMessageToInvalidRecipeDirectoryPathError=s.deserializeEventstreamMessageToSubscribeToIoTCoreResponse=s.deserializeEventstreamMessageToGetSecretValueResponse=s.deserializeEventstreamMessageToCertificateUpdateEvent=s.deserializeEventstreamMessageToComponentNotFoundError=s.deserializeEventstreamMessageToListNamedShadowsForThingResponse=s.deserializeEventstreamMessageToFailedUpdateConditionCheckError=s.deserializeEventstreamMessageToSubscriptionResponseMessage=s.deserializeEventstreamMessageToCreateDebugPasswordResponse=s.deserializeEventstreamMessageToConflictError=s.deserializeSubscribeToIoTCoreRequest=s.deserializeSubscribeToIoTCoreResponse=s.deserializeResumeComponentRequest=s.deserializeResumeComponentResponse=s.deserializePublishToIoTCoreRequest=s.deserializePublishToIoTCoreResponse=s.deserializeSubscribeToConfigurationUpdateRequest=s.deserializeSubscribeToConfigurationUpdateResponse=s.deserializeDeleteThingShadowRequest=s.deserializeDeleteThingShadowResponse=s.deserializePutComponentMetricRequest=s.deserializePutComponentMetricResponse=s.deserializeDeferComponentUpdateRequest=s.deserializeDeferComponentUpdateResponse=s.deserializeSubscribeToValidateConfigurationUpdatesRequest=s.deserializeSubscribeToValidateConfigurationUpdatesResponse=s.deserializeGetConfigurationRequest=s.deserializeGetConfigurationResponse=s.deserializeSubscribeToTopicRequest=s.deserializeSubscribeToTopicResponse=s.deserializeGetComponentDetailsRequest=s.deserializeGetComponentDetailsResponse=s.deserializeGetClientDeviceAuthTokenRequest=s.deserializeGetClientDeviceAuthTokenResponse=s.deserializeInvalidCredentialError=s.deserializePublishToTopicRequest=s.deserializePublishToTopicResponse=s.deserializeSubscribeToCertificateUpdatesRequest=void 0;s.serializeSubscribeToTopicRequestToEventstreamMessage=s.serializeListComponentsRequestToEventstreamMessage=s.serializeGetSecretValueRequestToEventstreamMessage=s.serializeDeferComponentUpdateRequestToEventstreamMessage=s.serializeGetConfigurationRequestToEventstreamMessage=s.serializeDeleteThingShadowRequestToEventstreamMessage=s.serializePublishToIoTCoreRequestToEventstreamMessage=s.serializePauseComponentRequestToEventstreamMessage=s.serializeGetClientDeviceAuthTokenRequestToEventstreamMessage=s.serializeValidateAuthorizationTokenRequestToEventstreamMessage=s.serializeSendConfigurationValidityReportRequestToEventstreamMessage=s.serializeListLocalDeploymentsRequestToEventstreamMessage=s.serializeAuthorizeClientDeviceActionRequestToEventstreamMessage=s.serializeVerifyClientDeviceIdentityRequestToEventstreamMessage=s.serializeStopComponentRequestToEventstreamMessage=s.serializeResumeComponentRequestToEventstreamMessage=s.serializeUpdateThingShadowRequestToEventstreamMessage=s.serializeCreateDebugPasswordRequestToEventstreamMessage=s.serializePublishToTopicRequestToEventstreamMessage=s.serializeGetComponentDetailsRequestToEventstreamMessage=s.deserializeEventstreamMessageToCancelLocalDeploymentResponse=s.deserializeEventstreamMessageToValidateConfigurationUpdateEvents=s.deserializeEventstreamMessageToStopComponentResponse=s.deserializeEventstreamMessageToConfigurationUpdateEvents=s.deserializeEventstreamMessageToServiceError=s.deserializeEventstreamMessageToSubscribeToValidateConfigurationUpdatesResponse=s.deserializeEventstreamMessageToSubscribeToConfigurationUpdateResponse=s.deserializeEventstreamMessageToDeleteThingShadowResponse=s.deserializeEventstreamMessageToRestartComponentResponse=s.deserializeEventstreamMessageToUpdateConfigurationResponse=s.deserializeEventstreamMessageToSubscribeToCertificateUpdatesResponse=s.deserializeEventstreamMessageToUnauthorizedError=s.deserializeEventstreamMessageToPauseComponentResponse=s.deserializeEventstreamMessageToGetLocalDeploymentStatusResponse=s.deserializeEventstreamMessageToInvalidCredentialError=s.deserializeEventstreamMessageToGetConfigurationResponse=s.deserializeEventstreamMessageToAuthorizeClientDeviceActionResponse=s.deserializeEventstreamMessageToUpdateThingShadowResponse=s.deserializeEventstreamMessageToValidateAuthorizationTokenResponse=s.deserializeEventstreamMessageToPublishToTopicResponse=s.deserializeEventstreamMessageToCreateLocalDeploymentResponse=s.deserializeEventstreamMessageToGetClientDeviceAuthTokenResponse=s.deserializeEventstreamMessageToInvalidTokenError=s.deserializeEventstreamMessageToSubscribeToTopicResponse=s.deserializeEventstreamMessageToPublishToIoTCoreResponse=s.deserializeEventstreamMessageToInvalidClientDeviceAuthTokenError=s.deserializeEventstreamMessageToGetThingShadowResponse=s.deserializeEventstreamMessageToSendConfigurationValidityReportResponse=s.deserializeEventstreamMessageToInvalidArtifactsDirectoryPathError=s.deserializeEventstreamMessageToResourceNotFoundError=void 0;s.serializeUpdateStateRequestToEventstreamMessage=s.serializeSubscribeToIoTCoreRequestToEventstreamMessage=s.serializeGetThingShadowRequestToEventstreamMessage=s.serializeGetLocalDeploymentStatusRequestToEventstreamMessage=s.serializeUpdateConfigurationRequestToEventstreamMessage=s.serializeListNamedShadowsForThingRequestToEventstreamMessage=s.serializeRestartComponentRequestToEventstreamMessage=s.serializeSubscribeToComponentUpdatesRequestToEventstreamMessage=s.serializeSubscribeToConfigurationUpdateRequestToEventstreamMessage=s.serializePutComponentMetricRequestToEventstreamMessage=s.serializeCreateLocalDeploymentRequestToEventstreamMessage=s.serializeSubscribeToValidateConfigurationUpdatesRequestToEventstreamMessage=s.serializeSubscribeToCertificateUpdatesRequestToEventstreamMessage=s.serializeCancelLocalDeploymentRequestToEventstreamMessage=void 0;const p=N2(x),Z=Kt,J=Lr;function F2(){return new Map([["aws.greengrass#UserProperty",Ro],["aws.greengrass#SystemResourceLimits",Hs],["aws.greengrass#DeploymentStatusDetails",Ws],["aws.greengrass#MessageContext",_o],["aws.greengrass#RunWithInfo",Qs],["aws.greengrass#LocalDeployment",Oo],["aws.greengrass#PostComponentUpdateEvent",Ks],["aws.greengrass#PreComponentUpdateEvent",Ys],["aws.greengrass#ComponentDetails",Eo],["aws.greengrass#CertificateUpdate",Xs],["aws.greengrass#BinaryMessage",To],["aws.greengrass#JsonMessage",Co],["aws.greengrass#MQTTCredential",Zs],["aws.greengrass#ValidateConfigurationUpdateEvent",js],["aws.greengrass#Metric",eu],["aws.greengrass#ConfigurationUpdateEvent",tu],["aws.greengrass#MQTTMessage",ru],["aws.greengrass#ComponentUpdatePolicyEvents",Ep],["aws.greengrass#SecretValue",nu],["aws.greengrass#ConfigurationValidityReport",iu],["aws.greengrass#ClientDeviceCredential",au],["aws.greengrass#CertificateUpdateEvent",Tp],["aws.greengrass#CertificateOptions",ou],["aws.greengrass#PublishMessage",su],["aws.greengrass#CredentialDocument",uu],["aws.greengrass#SubscriptionResponseMessage",Cp],["aws.greengrass#ValidateConfigurationUpdateEvents",Pp],["aws.greengrass#ConfigurationUpdateEvents",Ap],["aws.greengrass#IoTCoreMessage",Dp],["aws.greengrass#InvalidArgumentsError",Ip],["aws.greengrass#InvalidArtifactsDirectoryPathError",Np],["aws.greengrass#InvalidRecipeDirectoryPathError",Fp],["aws.greengrass#ServiceError",Mp],["aws.greengrass#CreateLocalDeploymentResponse",qp],["aws.greengrass#CreateLocalDeploymentRequest",cu],["aws.greengrass#ResourceNotFoundError",zp],["aws.greengrass#UnauthorizedError",Lp],["aws.greengrass#PauseComponentResponse",$p],["aws.greengrass#PauseComponentRequest",lu],["aws.greengrass#ComponentNotFoundError",Up],["aws.greengrass#StopComponentResponse",xp],["aws.greengrass#StopComponentRequest",du],["aws.greengrass#ListLocalDeploymentsResponse",Vp],["aws.greengrass#ListLocalDeploymentsRequest",fu],["aws.greengrass#SubscribeToComponentUpdatesResponse",Gp],["aws.greengrass#SubscribeToComponentUpdatesRequest",pu],["aws.greengrass#ListNamedShadowsForThingResponse",Bp],["aws.greengrass#ListNamedShadowsForThingRequest",mu],["aws.greengrass#CancelLocalDeploymentResponse",kp],["aws.greengrass#CancelLocalDeploymentRequest",vu],["aws.greengrass#UpdateStateResponse",Jp],["aws.greengrass#UpdateStateRequest",hu],["aws.greengrass#GetSecretValueResponse",Hp],["aws.greengrass#GetSecretValueRequest",gu],["aws.greengrass#GetLocalDeploymentStatusResponse",Wp],["aws.greengrass#GetLocalDeploymentStatusRequest",yu],["aws.greengrass#RestartComponentResponse",Qp],["aws.greengrass#RestartComponentRequest",wu],["aws.greengrass#InvalidTokenError",Kp],["aws.greengrass#ValidateAuthorizationTokenResponse",Yp],["aws.greengrass#ValidateAuthorizationTokenRequest",bu],["aws.greengrass#FailedUpdateConditionCheckError",Xp],["aws.greengrass#ConflictError",Zp],["aws.greengrass#UpdateConfigurationResponse",jp],["aws.greengrass#UpdateConfigurationRequest",Su],["aws.greengrass#UpdateThingShadowResponse",em],["aws.greengrass#UpdateThingShadowRequest",Ru],["aws.greengrass#SendConfigurationValidityReportResponse",tm],["aws.greengrass#SendConfigurationValidityReportRequest",_u],["aws.greengrass#GetThingShadowResponse",rm],["aws.greengrass#GetThingShadowRequest",Ou],["aws.greengrass#CreateDebugPasswordResponse",nm],["aws.greengrass#CreateDebugPasswordRequest",Eu],["aws.greengrass#ListComponentsResponse",im],["aws.greengrass#ListComponentsRequest",Tu],["aws.greengrass#InvalidClientDeviceAuthTokenError",am],["aws.greengrass#AuthorizeClientDeviceActionResponse",om],["aws.greengrass#AuthorizeClientDeviceActionRequest",Cu],["aws.greengrass#VerifyClientDeviceIdentityResponse",sm],["aws.greengrass#VerifyClientDeviceIdentityRequest",Pu],["aws.greengrass#SubscribeToCertificateUpdatesResponse",um],["aws.greengrass#SubscribeToCertificateUpdatesRequest",Au],["aws.greengrass#PublishToTopicResponse",cm],["aws.greengrass#PublishToTopicRequest",Du],["aws.greengrass#InvalidCredentialError",lm],["aws.greengrass#GetClientDeviceAuthTokenResponse",dm],["aws.greengrass#GetClientDeviceAuthTokenRequest",Iu],["aws.greengrass#GetComponentDetailsResponse",fm],["aws.greengrass#GetComponentDetailsRequest",Nu],["aws.greengrass#SubscribeToTopicResponse",pm],["aws.greengrass#SubscribeToTopicRequest",Fu],["aws.greengrass#GetConfigurationResponse",mm],["aws.greengrass#GetConfigurationRequest",Mu],["aws.greengrass#SubscribeToValidateConfigurationUpdatesResponse",vm],["aws.greengrass#SubscribeToValidateConfigurationUpdatesRequest",qu],["aws.greengrass#DeferComponentUpdateResponse",hm],["aws.greengrass#DeferComponentUpdateRequest",zu],["aws.greengrass#PutComponentMetricResponse",gm],["aws.greengrass#PutComponentMetricRequest",Lu],["aws.greengrass#DeleteThingShadowResponse",ym],["aws.greengrass#DeleteThingShadowRequest",$u],["aws.greengrass#SubscribeToConfigurationUpdateResponse",wm],["aws.greengrass#SubscribeToConfigurationUpdateRequest",Uu],["aws.greengrass#PublishToIoTCoreResponse",bm],["aws.greengrass#PublishToIoTCoreRequest",xu],["aws.greengrass#ResumeComponentResponse",Sm],["aws.greengrass#ResumeComponentRequest",Vu],["aws.greengrass#SubscribeToIoTCoreResponse",Rm],["aws.greengrass#SubscribeToIoTCoreRequest",Gu]])}function M2(){return new Map([["aws.greengrass#UserProperty",Po],["aws.greengrass#SystemResourceLimits",Bu],["aws.greengrass#DeploymentStatusDetails",ku],["aws.greengrass#MessageContext",Ao],["aws.greengrass#RunWithInfo",Ju],["aws.greengrass#LocalDeployment",Do],["aws.greengrass#PostComponentUpdateEvent",Hu],["aws.greengrass#PreComponentUpdateEvent",Wu],["aws.greengrass#ComponentDetails",Io],["aws.greengrass#CertificateUpdate",Qu],["aws.greengrass#BinaryMessage",No],["aws.greengrass#JsonMessage",Fo],["aws.greengrass#MQTTCredential",Ku],["aws.greengrass#ValidateConfigurationUpdateEvent",Yu],["aws.greengrass#Metric",Xu],["aws.greengrass#ConfigurationUpdateEvent",Zu],["aws.greengrass#MQTTMessage",ju],["aws.greengrass#ComponentUpdatePolicyEvents",_m],["aws.greengrass#SecretValue",Em],["aws.greengrass#ConfigurationValidityReport",ec],["aws.greengrass#ClientDeviceCredential",Cm],["aws.greengrass#CertificateUpdateEvent",Pm],["aws.greengrass#CertificateOptions",tc],["aws.greengrass#PublishMessage",Dm],["aws.greengrass#CredentialDocument",Nm],["aws.greengrass#SubscriptionResponseMessage",Fm],["aws.greengrass#ValidateConfigurationUpdateEvents",Mm],["aws.greengrass#ConfigurationUpdateEvents",qm],["aws.greengrass#IoTCoreMessage",zm],["aws.greengrass#InvalidArgumentsError",Lm],["aws.greengrass#InvalidArtifactsDirectoryPathError",$m],["aws.greengrass#InvalidRecipeDirectoryPathError",Um],["aws.greengrass#ServiceError",xm],["aws.greengrass#CreateLocalDeploymentResponse",Vm],["aws.greengrass#CreateLocalDeploymentRequest",Gm],["aws.greengrass#ResourceNotFoundError",Bm],["aws.greengrass#UnauthorizedError",km],["aws.greengrass#PauseComponentResponse",Jm],["aws.greengrass#PauseComponentRequest",Hm],["aws.greengrass#ComponentNotFoundError",Wm],["aws.greengrass#StopComponentResponse",Qm],["aws.greengrass#StopComponentRequest",Km],["aws.greengrass#ListLocalDeploymentsResponse",Ym],["aws.greengrass#ListLocalDeploymentsRequest",Xm],["aws.greengrass#SubscribeToComponentUpdatesResponse",Zm],["aws.greengrass#SubscribeToComponentUpdatesRequest",jm],["aws.greengrass#ListNamedShadowsForThingResponse",ev],["aws.greengrass#ListNamedShadowsForThingRequest",tv],["aws.greengrass#CancelLocalDeploymentResponse",rv],["aws.greengrass#CancelLocalDeploymentRequest",nv],["aws.greengrass#UpdateStateResponse",iv],["aws.greengrass#UpdateStateRequest",av],["aws.greengrass#GetSecretValueResponse",ov],["aws.greengrass#GetSecretValueRequest",sv],["aws.greengrass#GetLocalDeploymentStatusResponse",uv],["aws.greengrass#GetLocalDeploymentStatusRequest",cv],["aws.greengrass#RestartComponentResponse",lv],["aws.greengrass#RestartComponentRequest",dv],["aws.greengrass#InvalidTokenError",fv],["aws.greengrass#ValidateAuthorizationTokenResponse",pv],["aws.greengrass#ValidateAuthorizationTokenRequest",mv],["aws.greengrass#FailedUpdateConditionCheckError",vv],["aws.greengrass#ConflictError",hv],["aws.greengrass#UpdateConfigurationResponse",gv],["aws.greengrass#UpdateConfigurationRequest",yv],["aws.greengrass#UpdateThingShadowResponse",wv],["aws.greengrass#UpdateThingShadowRequest",bv],["aws.greengrass#SendConfigurationValidityReportResponse",Sv],["aws.greengrass#SendConfigurationValidityReportRequest",Rv],["aws.greengrass#GetThingShadowResponse",_v],["aws.greengrass#GetThingShadowRequest",Ov],["aws.greengrass#CreateDebugPasswordResponse",Ev],["aws.greengrass#CreateDebugPasswordRequest",Tv],["aws.greengrass#ListComponentsResponse",Cv],["aws.greengrass#ListComponentsRequest",Pv],["aws.greengrass#InvalidClientDeviceAuthTokenError",Av],["aws.greengrass#AuthorizeClientDeviceActionResponse",Dv],["aws.greengrass#AuthorizeClientDeviceActionRequest",Iv],["aws.greengrass#VerifyClientDeviceIdentityResponse",Nv],["aws.greengrass#VerifyClientDeviceIdentityRequest",Fv],["aws.greengrass#SubscribeToCertificateUpdatesResponse",Mv],["aws.greengrass#SubscribeToCertificateUpdatesRequest",qv],["aws.greengrass#PublishToTopicResponse",zv],["aws.greengrass#PublishToTopicRequest",Lv],["aws.greengrass#InvalidCredentialError",$v],["aws.greengrass#GetClientDeviceAuthTokenResponse",Uv],["aws.greengrass#GetClientDeviceAuthTokenRequest",xv],["aws.greengrass#GetComponentDetailsResponse",Vv],["aws.greengrass#GetComponentDetailsRequest",Gv],["aws.greengrass#SubscribeToTopicResponse",Bv],["aws.greengrass#SubscribeToTopicRequest",kv],["aws.greengrass#GetConfigurationResponse",Jv],["aws.greengrass#GetConfigurationRequest",Hv],["aws.greengrass#SubscribeToValidateConfigurationUpdatesResponse",Wv],["aws.greengrass#SubscribeToValidateConfigurationUpdatesRequest",Qv],["aws.greengrass#DeferComponentUpdateResponse",Kv],["aws.greengrass#DeferComponentUpdateRequest",Yv],["aws.greengrass#PutComponentMetricResponse",Xv],["aws.greengrass#PutComponentMetricRequest",Zv],["aws.greengrass#DeleteThingShadowResponse",jv],["aws.greengrass#DeleteThingShadowRequest",eh],["aws.greengrass#SubscribeToConfigurationUpdateResponse",th],["aws.greengrass#SubscribeToConfigurationUpdateRequest",rh],["aws.greengrass#PublishToIoTCoreResponse",nh],["aws.greengrass#PublishToIoTCoreRequest",ih],["aws.greengrass#ResumeComponentResponse",ah],["aws.greengrass#ResumeComponentRequest",oh],["aws.greengrass#SubscribeToIoTCoreResponse",sh],["aws.greengrass#SubscribeToIoTCoreRequest",uh]])}function q2(){return new Map([["aws.greengrass#ConflictError",Gh],["aws.greengrass#CreateDebugPasswordResponse",Bh],["aws.greengrass#SubscriptionResponseMessage",kh],["aws.greengrass#FailedUpdateConditionCheckError",Jh],["aws.greengrass#ListNamedShadowsForThingResponse",Hh],["aws.greengrass#ComponentNotFoundError",Wh],["aws.greengrass#CertificateUpdateEvent",Qh],["aws.greengrass#GetSecretValueResponse",Kh],["aws.greengrass#SubscribeToIoTCoreResponse",Yh],["aws.greengrass#InvalidRecipeDirectoryPathError",Xh],["aws.greengrass#ListLocalDeploymentsResponse",Zh],["aws.greengrass#ResumeComponentResponse",jh],["aws.greengrass#InvalidArgumentsError",eg],["aws.greengrass#GetComponentDetailsResponse",tg],["aws.greengrass#PutComponentMetricResponse",rg],["aws.greengrass#ComponentUpdatePolicyEvents",ng],["aws.greengrass#IoTCoreMessage",ig],["aws.greengrass#UpdateStateResponse",ag],["aws.greengrass#DeferComponentUpdateResponse",og],["aws.greengrass#ListComponentsResponse",sg],["aws.greengrass#SubscribeToComponentUpdatesResponse",ug],["aws.greengrass#VerifyClientDeviceIdentityResponse",cg],["aws.greengrass#ResourceNotFoundError",lg],["aws.greengrass#InvalidArtifactsDirectoryPathError",dg],["aws.greengrass#SendConfigurationValidityReportResponse",fg],["aws.greengrass#GetThingShadowResponse",pg],["aws.greengrass#InvalidClientDeviceAuthTokenError",mg],["aws.greengrass#PublishToIoTCoreResponse",vg],["aws.greengrass#SubscribeToTopicResponse",hg],["aws.greengrass#InvalidTokenError",gg],["aws.greengrass#GetClientDeviceAuthTokenResponse",yg],["aws.greengrass#CreateLocalDeploymentResponse",wg],["aws.greengrass#PublishToTopicResponse",bg],["aws.greengrass#ValidateAuthorizationTokenResponse",Sg],["aws.greengrass#UpdateThingShadowResponse",Rg],["aws.greengrass#AuthorizeClientDeviceActionResponse",_g],["aws.greengrass#GetConfigurationResponse",Og],["aws.greengrass#InvalidCredentialError",Eg],["aws.greengrass#GetLocalDeploymentStatusResponse",Tg],["aws.greengrass#PauseComponentResponse",Cg],["aws.greengrass#UnauthorizedError",Pg],["aws.greengrass#SubscribeToCertificateUpdatesResponse",Ag],["aws.greengrass#UpdateConfigurationResponse",Dg],["aws.greengrass#RestartComponentResponse",Ig],["aws.greengrass#DeleteThingShadowResponse",Ng],["aws.greengrass#SubscribeToConfigurationUpdateResponse",Fg],["aws.greengrass#SubscribeToValidateConfigurationUpdatesResponse",Mg],["aws.greengrass#ServiceError",qg],["aws.greengrass#ConfigurationUpdateEvents",zg],["aws.greengrass#StopComponentResponse",Lg],["aws.greengrass#ValidateConfigurationUpdateEvents",$g],["aws.greengrass#CancelLocalDeploymentResponse",Ug]])}function z2(){return new Map([["aws.greengrass#GetComponentDetailsRequest",xg],["aws.greengrass#PublishToTopicRequest",Vg],["aws.greengrass#CreateDebugPasswordRequest",Gg],["aws.greengrass#UpdateThingShadowRequest",Bg],["aws.greengrass#ResumeComponentRequest",kg],["aws.greengrass#StopComponentRequest",Jg],["aws.greengrass#VerifyClientDeviceIdentityRequest",Hg],["aws.greengrass#AuthorizeClientDeviceActionRequest",Wg],["aws.greengrass#ListLocalDeploymentsRequest",Qg],["aws.greengrass#SendConfigurationValidityReportRequest",Kg],["aws.greengrass#ValidateAuthorizationTokenRequest",Yg],["aws.greengrass#GetClientDeviceAuthTokenRequest",Xg],["aws.greengrass#PauseComponentRequest",Zg],["aws.greengrass#PublishToIoTCoreRequest",jg],["aws.greengrass#DeleteThingShadowRequest",ey],["aws.greengrass#GetConfigurationRequest",ty],["aws.greengrass#DeferComponentUpdateRequest",ry],["aws.greengrass#GetSecretValueRequest",ny],["aws.greengrass#ListComponentsRequest",iy],["aws.greengrass#SubscribeToTopicRequest",ay],["aws.greengrass#CancelLocalDeploymentRequest",oy],["aws.greengrass#SubscribeToCertificateUpdatesRequest",sy],["aws.greengrass#SubscribeToValidateConfigurationUpdatesRequest",uy],["aws.greengrass#CreateLocalDeploymentRequest",cy],["aws.greengrass#PutComponentMetricRequest",ly],["aws.greengrass#SubscribeToConfigurationUpdateRequest",dy],["aws.greengrass#SubscribeToComponentUpdatesRequest",fy],["aws.greengrass#RestartComponentRequest",py],["aws.greengrass#ListNamedShadowsForThingRequest",my],["aws.greengrass#UpdateConfigurationRequest",vy],["aws.greengrass#GetLocalDeploymentStatusRequest",hy],["aws.greengrass#GetThingShadowRequest",gy],["aws.greengrass#SubscribeToIoTCoreRequest",yy],["aws.greengrass#UpdateStateRequest",wy]])}function L2(){return new Map([["aws.greengrass#AuthorizeClientDeviceAction",{requestShape:"aws.greengrass#AuthorizeClientDeviceActionRequest",responseShape:"aws.greengrass#AuthorizeClientDeviceActionResponse",errorShapes:new Set(["aws.greengrass#UnauthorizedError","aws.greengrass#ServiceError","aws.greengrass#InvalidArgumentsError","aws.greengrass#InvalidClientDeviceAuthTokenError"])}],["aws.greengrass#CancelLocalDeployment",{requestShape:"aws.greengrass#CancelLocalDeploymentRequest",responseShape:"aws.greengrass#CancelLocalDeploymentResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError","aws.greengrass#InvalidArgumentsError"])}],["aws.greengrass#CreateDebugPassword",{requestShape:"aws.greengrass#CreateDebugPasswordRequest",responseShape:"aws.greengrass#CreateDebugPasswordResponse",errorShapes:new Set(["aws.greengrass#UnauthorizedError","aws.greengrass#ServiceError"])}],["aws.greengrass#CreateLocalDeployment",{requestShape:"aws.greengrass#CreateLocalDeploymentRequest",responseShape:"aws.greengrass#CreateLocalDeploymentResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#InvalidRecipeDirectoryPathError","aws.greengrass#InvalidArtifactsDirectoryPathError","aws.greengrass#InvalidArgumentsError"])}],["aws.greengrass#DeferComponentUpdate",{requestShape:"aws.greengrass#DeferComponentUpdateRequest",responseShape:"aws.greengrass#DeferComponentUpdateResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError","aws.greengrass#InvalidArgumentsError"])}],["aws.greengrass#DeleteThingShadow",{requestShape:"aws.greengrass#DeleteThingShadowRequest",responseShape:"aws.greengrass#DeleteThingShadowResponse",errorShapes:new Set(["aws.greengrass#InvalidArgumentsError","aws.greengrass#ResourceNotFoundError","aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError"])}],["aws.greengrass#GetClientDeviceAuthToken",{requestShape:"aws.greengrass#GetClientDeviceAuthTokenRequest",responseShape:"aws.greengrass#GetClientDeviceAuthTokenResponse",errorShapes:new Set(["aws.greengrass#UnauthorizedError","aws.greengrass#ServiceError","aws.greengrass#InvalidArgumentsError","aws.greengrass#InvalidCredentialError"])}],["aws.greengrass#GetComponentDetails",{requestShape:"aws.greengrass#GetComponentDetailsRequest",responseShape:"aws.greengrass#GetComponentDetailsResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError","aws.greengrass#InvalidArgumentsError"])}],["aws.greengrass#GetConfiguration",{requestShape:"aws.greengrass#GetConfigurationRequest",responseShape:"aws.greengrass#GetConfigurationResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError"])}],["aws.greengrass#GetLocalDeploymentStatus",{requestShape:"aws.greengrass#GetLocalDeploymentStatusRequest",responseShape:"aws.greengrass#GetLocalDeploymentStatusResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError"])}],["aws.greengrass#GetSecretValue",{requestShape:"aws.greengrass#GetSecretValueRequest",responseShape:"aws.greengrass#GetSecretValueResponse",errorShapes:new Set(["aws.greengrass#UnauthorizedError","aws.greengrass#ResourceNotFoundError","aws.greengrass#ServiceError"])}],["aws.greengrass#GetThingShadow",{requestShape:"aws.greengrass#GetThingShadowRequest",responseShape:"aws.greengrass#GetThingShadowResponse",errorShapes:new Set(["aws.greengrass#InvalidArgumentsError","aws.greengrass#ResourceNotFoundError","aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError"])}],["aws.greengrass#ListComponents",{requestShape:"aws.greengrass#ListComponentsRequest",responseShape:"aws.greengrass#ListComponentsResponse",errorShapes:new Set(["aws.greengrass#ServiceError"])}],["aws.greengrass#ListLocalDeployments",{requestShape:"aws.greengrass#ListLocalDeploymentsRequest",responseShape:"aws.greengrass#ListLocalDeploymentsResponse",errorShapes:new Set(["aws.greengrass#ServiceError"])}],["aws.greengrass#ListNamedShadowsForThing",{requestShape:"aws.greengrass#ListNamedShadowsForThingRequest",responseShape:"aws.greengrass#ListNamedShadowsForThingResponse",errorShapes:new Set(["aws.greengrass#InvalidArgumentsError","aws.greengrass#ResourceNotFoundError","aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError"])}],["aws.greengrass#PauseComponent",{requestShape:"aws.greengrass#PauseComponentRequest",responseShape:"aws.greengrass#PauseComponentResponse",errorShapes:new Set(["aws.greengrass#UnauthorizedError","aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError"])}],["aws.greengrass#PublishToIoTCore",{requestShape:"aws.greengrass#PublishToIoTCoreRequest",responseShape:"aws.greengrass#PublishToIoTCoreResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError"])}],["aws.greengrass#PublishToTopic",{requestShape:"aws.greengrass#PublishToTopicRequest",responseShape:"aws.greengrass#PublishToTopicResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError"])}],["aws.greengrass#PutComponentMetric",{requestShape:"aws.greengrass#PutComponentMetricRequest",responseShape:"aws.greengrass#PutComponentMetricResponse",errorShapes:new Set(["aws.greengrass#UnauthorizedError","aws.greengrass#ServiceError","aws.greengrass#InvalidArgumentsError"])}],["aws.greengrass#RestartComponent",{requestShape:"aws.greengrass#RestartComponentRequest",responseShape:"aws.greengrass#RestartComponentResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ComponentNotFoundError","aws.greengrass#InvalidArgumentsError"])}],["aws.greengrass#ResumeComponent",{requestShape:"aws.greengrass#ResumeComponentRequest",responseShape:"aws.greengrass#ResumeComponentResponse",errorShapes:new Set(["aws.greengrass#UnauthorizedError","aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError"])}],["aws.greengrass#SendConfigurationValidityReport",{requestShape:"aws.greengrass#SendConfigurationValidityReportRequest",responseShape:"aws.greengrass#SendConfigurationValidityReportResponse",errorShapes:new Set(["aws.greengrass#InvalidArgumentsError","aws.greengrass#ServiceError"])}],["aws.greengrass#StopComponent",{requestShape:"aws.greengrass#StopComponentRequest",responseShape:"aws.greengrass#StopComponentResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ComponentNotFoundError","aws.greengrass#InvalidArgumentsError"])}],["aws.greengrass#SubscribeToCertificateUpdates",{requestShape:"aws.greengrass#SubscribeToCertificateUpdatesRequest",responseShape:"aws.greengrass#SubscribeToCertificateUpdatesResponse",inboundMessageShape:"aws.greengrass#CertificateUpdateEvent",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError","aws.greengrass#InvalidArgumentsError"])}],["aws.greengrass#SubscribeToComponentUpdates",{requestShape:"aws.greengrass#SubscribeToComponentUpdatesRequest",responseShape:"aws.greengrass#SubscribeToComponentUpdatesResponse",inboundMessageShape:"aws.greengrass#ComponentUpdatePolicyEvents",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError"])}],["aws.greengrass#SubscribeToConfigurationUpdate",{requestShape:"aws.greengrass#SubscribeToConfigurationUpdateRequest",responseShape:"aws.greengrass#SubscribeToConfigurationUpdateResponse",inboundMessageShape:"aws.greengrass#ConfigurationUpdateEvents",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError"])}],["aws.greengrass#SubscribeToIoTCore",{requestShape:"aws.greengrass#SubscribeToIoTCoreRequest",responseShape:"aws.greengrass#SubscribeToIoTCoreResponse",inboundMessageShape:"aws.greengrass#IoTCoreMessage",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError"])}],["aws.greengrass#SubscribeToTopic",{requestShape:"aws.greengrass#SubscribeToTopicRequest",responseShape:"aws.greengrass#SubscribeToTopicResponse",inboundMessageShape:"aws.greengrass#SubscriptionResponseMessage",errorShapes:new Set(["aws.greengrass#InvalidArgumentsError","aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError"])}],["aws.greengrass#SubscribeToValidateConfigurationUpdates",{requestShape:"aws.greengrass#SubscribeToValidateConfigurationUpdatesRequest",responseShape:"aws.greengrass#SubscribeToValidateConfigurationUpdatesResponse",inboundMessageShape:"aws.greengrass#ValidateConfigurationUpdateEvents",errorShapes:new Set(["aws.greengrass#ServiceError"])}],["aws.greengrass#UpdateConfiguration",{requestShape:"aws.greengrass#UpdateConfigurationRequest",responseShape:"aws.greengrass#UpdateConfigurationResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError","aws.greengrass#ConflictError","aws.greengrass#FailedUpdateConditionCheckError","aws.greengrass#InvalidArgumentsError"])}],["aws.greengrass#UpdateState",{requestShape:"aws.greengrass#UpdateStateRequest",responseShape:"aws.greengrass#UpdateStateResponse",errorShapes:new Set(["aws.greengrass#ServiceError","aws.greengrass#ResourceNotFoundError"])}],["aws.greengrass#UpdateThingShadow",{requestShape:"aws.greengrass#UpdateThingShadowRequest",responseShape:"aws.greengrass#UpdateThingShadowResponse",errorShapes:new Set(["aws.greengrass#InvalidArgumentsError","aws.greengrass#ConflictError","aws.greengrass#ServiceError","aws.greengrass#UnauthorizedError"])}],["aws.greengrass#ValidateAuthorizationToken",{requestShape:"aws.greengrass#ValidateAuthorizationTokenRequest",responseShape:"aws.greengrass#ValidateAuthorizationTokenResponse",errorShapes:new Set(["aws.greengrass#InvalidTokenError","aws.greengrass#UnauthorizedError","aws.greengrass#ServiceError"])}],["aws.greengrass#VerifyClientDeviceIdentity",{requestShape:"aws.greengrass#VerifyClientDeviceIdentityRequest",responseShape:"aws.greengrass#VerifyClientDeviceIdentityResponse",errorShapes:new Set(["aws.greengrass#UnauthorizedError","aws.greengrass#ServiceError","aws.greengrass#InvalidArgumentsError"])}]])}const $2=new Set(["SUCCESSFUL","FAILED_NO_STATE_CHANGE","FAILED_ROLLBACK_NOT_REQUESTED","FAILED_ROLLBACK_COMPLETE","REJECTED"]),U2=new Set(["QUEUED","IN_PROGRESS","SUCCEEDED","FAILED","CANCELED"]),x2=new Set(["RUNNING","ERRORED","NEW","FINISHED","INSTALLED","BROKEN","STARTING","STOPPING"]),V2=new Set(["BYTES","BYTES_PER_SECOND","COUNT","COUNT_PER_SECOND","MEGABYTES","SECONDS"]),G2=new Set(["0","1"]),B2=new Set(["ACCEPTED","REJECTED"]),k2=new Set(["SERVER"]),J2=new Set(["ROLLBACK","DO_NOTHING"]),H2=new Set(["SUCCEEDED","FAILED"]),W2=new Set(["RUNNING","ERRORED"]),Q2=new Set(["RECEIVE_ALL_MESSAGES","RECEIVE_MESSAGES_FROM_OTHERS"]),K2=new Set(["0","1"]);function Y2(){return new Map([["DetailedDeploymentStatus",$2],["DeploymentStatus",U2],["LifecycleState",x2],["MetricUnitType",V2],["PayloadFormat",G2],["ConfigurationValidityStatus",B2],["CertificateType",k2],["FailureHandlingPolicy",J2],["RequestStatus",H2],["ReportedLifecycleState",W2],["ReceiveMode",Q2],["QOS",K2]])}function X2(){return{normalizers:F2(),validators:M2(),deserializers:q2(),serializers:z2(),operations:L2(),enums:Y2()}}s.makeServiceModel=X2;function Ro(e){let t={};return p.setDefinedProperty(t,"key",e.key),p.setDefinedProperty(t,"value",e.value),t}s.normalizeUserProperty=Ro;function Hs(e){let t={};return p.setDefinedProperty(t,"memory",e.memory),p.setDefinedProperty(t,"cpus",e.cpus),t}s.normalizeSystemResourceLimits=Hs;function Ws(e){let t={};return p.setDefinedProperty(t,"detailedDeploymentStatus",e.detailedDeploymentStatus),p.setDefinedArrayProperty(t,"deploymentErrorStack",e.deploymentErrorStack,void 0),p.setDefinedArrayProperty(t,"deploymentErrorTypes",e.deploymentErrorTypes,void 0),p.setDefinedProperty(t,"deploymentFailureCause",e.deploymentFailureCause),t}s.normalizeDeploymentStatusDetails=Ws;function _o(e){let t={};return p.setDefinedProperty(t,"topic",e.topic),t}s.normalizeMessageContext=_o;function Qs(e){let t={};return p.setDefinedProperty(t,"posixUser",e.posixUser),p.setDefinedProperty(t,"windowsUser",e.windowsUser),p.setDefinedProperty(t,"systemResourceLimits",e.systemResourceLimits,Hs),t}s.normalizeRunWithInfo=Qs;function Oo(e){let t={};return p.setDefinedProperty(t,"deploymentId",e.deploymentId),p.setDefinedProperty(t,"status",e.status),p.setDefinedProperty(t,"createdOn",e.createdOn),p.setDefinedProperty(t,"deploymentStatusDetails",e.deploymentStatusDetails,Ws),t}s.normalizeLocalDeployment=Oo;function Ks(e){let t={};return p.setDefinedProperty(t,"deploymentId",e.deploymentId),t}s.normalizePostComponentUpdateEvent=Ks;function Ys(e){let t={};return p.setDefinedProperty(t,"deploymentId",e.deploymentId),p.setDefinedProperty(t,"isGgcRestarting",e.isGgcRestarting),t}s.normalizePreComponentUpdateEvent=Ys;function Eo(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),p.setDefinedProperty(t,"version",e.version),p.setDefinedProperty(t,"state",e.state),p.setDefinedProperty(t,"configuration",e.configuration),t}s.normalizeComponentDetails=Eo;function Xs(e){let t={};return p.setDefinedProperty(t,"privateKey",e.privateKey),p.setDefinedProperty(t,"publicKey",e.publicKey),p.setDefinedProperty(t,"certificate",e.certificate),p.setDefinedArrayProperty(t,"caCertificates",e.caCertificates,void 0),t}s.normalizeCertificateUpdate=Xs;function To(e){let t={};return p.setDefinedProperty(t,"message",e.message,p.encodePayloadAsString),p.setDefinedProperty(t,"context",e.context,_o),t}s.normalizeBinaryMessage=To;function Co(e){let t={};return p.setDefinedProperty(t,"message",e.message),p.setDefinedProperty(t,"context",e.context,_o),t}s.normalizeJsonMessage=Co;function Zs(e){let t={};return p.setDefinedProperty(t,"clientId",e.clientId),p.setDefinedProperty(t,"certificatePem",e.certificatePem),p.setDefinedProperty(t,"username",e.username),p.setDefinedProperty(t,"password",e.password),t}s.normalizeMQTTCredential=Zs;function js(e){let t={};return p.setDefinedProperty(t,"configuration",e.configuration),p.setDefinedProperty(t,"deploymentId",e.deploymentId),t}s.normalizeValidateConfigurationUpdateEvent=js;function eu(e){let t={};return p.setDefinedProperty(t,"name",e.name),p.setDefinedProperty(t,"unit",e.unit),p.setDefinedProperty(t,"value",e.value),t}s.normalizeMetric=eu;function tu(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),p.setDefinedArrayProperty(t,"keyPath",e.keyPath,void 0),t}s.normalizeConfigurationUpdateEvent=tu;function ru(e){let t={};return p.setDefinedProperty(t,"topicName",e.topicName),p.setDefinedProperty(t,"payload",e.payload,p.encodePayloadAsString),p.setDefinedProperty(t,"retain",e.retain),p.setDefinedArrayProperty(t,"userProperties",e.userProperties,Ro),p.setDefinedProperty(t,"messageExpiryIntervalSeconds",e.messageExpiryIntervalSeconds),p.setDefinedProperty(t,"correlationData",e.correlationData,p.encodePayloadAsString),p.setDefinedProperty(t,"responseTopic",e.responseTopic),p.setDefinedProperty(t,"payloadFormat",e.payloadFormat),p.setDefinedProperty(t,"contentType",e.contentType),t}s.normalizeMQTTMessage=ru;function Ep(e){let t={};return p.setDefinedProperty(t,"preUpdateEvent",e.preUpdateEvent,Ys),p.setDefinedProperty(t,"postUpdateEvent",e.postUpdateEvent,Ks),t}s.normalizeComponentUpdatePolicyEvents=Ep;function nu(e){let t={};return p.setDefinedProperty(t,"secretString",e.secretString),p.setDefinedProperty(t,"secretBinary",e.secretBinary,p.encodePayloadAsString),t}s.normalizeSecretValue=nu;function iu(e){let t={};return p.setDefinedProperty(t,"status",e.status),p.setDefinedProperty(t,"deploymentId",e.deploymentId),p.setDefinedProperty(t,"message",e.message),t}s.normalizeConfigurationValidityReport=iu;function au(e){let t={};return p.setDefinedProperty(t,"clientDeviceCertificate",e.clientDeviceCertificate),t}s.normalizeClientDeviceCredential=au;function Tp(e){let t={};return p.setDefinedProperty(t,"certificateUpdate",e.certificateUpdate,Xs),t}s.normalizeCertificateUpdateEvent=Tp;function ou(e){let t={};return p.setDefinedProperty(t,"certificateType",e.certificateType),t}s.normalizeCertificateOptions=ou;function su(e){let t={};return p.setDefinedProperty(t,"jsonMessage",e.jsonMessage,Co),p.setDefinedProperty(t,"binaryMessage",e.binaryMessage,To),t}s.normalizePublishMessage=su;function uu(e){let t={};return p.setDefinedProperty(t,"mqttCredential",e.mqttCredential,Zs),t}s.normalizeCredentialDocument=uu;function Cp(e){let t={};return p.setDefinedProperty(t,"jsonMessage",e.jsonMessage,Co),p.setDefinedProperty(t,"binaryMessage",e.binaryMessage,To),t}s.normalizeSubscriptionResponseMessage=Cp;function Pp(e){let t={};return p.setDefinedProperty(t,"validateConfigurationUpdateEvent",e.validateConfigurationUpdateEvent,js),t}s.normalizeValidateConfigurationUpdateEvents=Pp;function Ap(e){let t={};return p.setDefinedProperty(t,"configurationUpdateEvent",e.configurationUpdateEvent,tu),t}s.normalizeConfigurationUpdateEvents=Ap;function Dp(e){let t={};return p.setDefinedProperty(t,"message",e.message,ru),t}s.normalizeIoTCoreMessage=Dp;function Ip(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeInvalidArgumentsError=Ip;function Np(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeInvalidArtifactsDirectoryPathError=Np;function Fp(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeInvalidRecipeDirectoryPathError=Fp;function Mp(e){let t={};return p.setDefinedProperty(t,"message",e.message),p.setDefinedProperty(t,"context",e.context),t}s.normalizeServiceError=Mp;function qp(e){let t={};return p.setDefinedProperty(t,"deploymentId",e.deploymentId),t}s.normalizeCreateLocalDeploymentResponse=qp;function cu(e){let t={};return p.setDefinedProperty(t,"groupName",e.groupName),p.setDefinedMapPropertyAsObject(t,"rootComponentVersionsToAdd",e.rootComponentVersionsToAdd,void 0,void 0),p.setDefinedArrayProperty(t,"rootComponentsToRemove",e.rootComponentsToRemove,void 0),p.setDefinedMapPropertyAsObject(t,"componentToConfiguration",e.componentToConfiguration,void 0,void 0),p.setDefinedMapPropertyAsObject(t,"componentToRunWithInfo",e.componentToRunWithInfo,void 0,Qs),p.setDefinedProperty(t,"recipeDirectoryPath",e.recipeDirectoryPath),p.setDefinedProperty(t,"artifactsDirectoryPath",e.artifactsDirectoryPath),p.setDefinedProperty(t,"failureHandlingPolicy",e.failureHandlingPolicy),t}s.normalizeCreateLocalDeploymentRequest=cu;function zp(e){let t={};return p.setDefinedProperty(t,"message",e.message),p.setDefinedProperty(t,"resourceType",e.resourceType),p.setDefinedProperty(t,"resourceName",e.resourceName),t}s.normalizeResourceNotFoundError=zp;function Lp(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeUnauthorizedError=Lp;function $p(e){return{}}s.normalizePauseComponentResponse=$p;function lu(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),t}s.normalizePauseComponentRequest=lu;function Up(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeComponentNotFoundError=Up;function xp(e){let t={};return p.setDefinedProperty(t,"stopStatus",e.stopStatus),p.setDefinedProperty(t,"message",e.message),t}s.normalizeStopComponentResponse=xp;function du(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),t}s.normalizeStopComponentRequest=du;function Vp(e){let t={};return p.setDefinedArrayProperty(t,"localDeployments",e.localDeployments,Oo),t}s.normalizeListLocalDeploymentsResponse=Vp;function fu(e){return{}}s.normalizeListLocalDeploymentsRequest=fu;function Gp(e){return{}}s.normalizeSubscribeToComponentUpdatesResponse=Gp;function pu(e){return{}}s.normalizeSubscribeToComponentUpdatesRequest=pu;function Bp(e){let t={};return p.setDefinedArrayProperty(t,"results",e.results,void 0),p.setDefinedProperty(t,"timestamp",e.timestamp,p.encodeDateAsNumber),p.setDefinedProperty(t,"nextToken",e.nextToken),t}s.normalizeListNamedShadowsForThingResponse=Bp;function mu(e){let t={};return p.setDefinedProperty(t,"thingName",e.thingName),p.setDefinedProperty(t,"nextToken",e.nextToken),p.setDefinedProperty(t,"pageSize",e.pageSize),t}s.normalizeListNamedShadowsForThingRequest=mu;function kp(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeCancelLocalDeploymentResponse=kp;function vu(e){let t={};return p.setDefinedProperty(t,"deploymentId",e.deploymentId),t}s.normalizeCancelLocalDeploymentRequest=vu;function Jp(e){return{}}s.normalizeUpdateStateResponse=Jp;function hu(e){let t={};return p.setDefinedProperty(t,"state",e.state),t}s.normalizeUpdateStateRequest=hu;function Hp(e){let t={};return p.setDefinedProperty(t,"secretId",e.secretId),p.setDefinedProperty(t,"versionId",e.versionId),p.setDefinedArrayProperty(t,"versionStage",e.versionStage,void 0),p.setDefinedProperty(t,"secretValue",e.secretValue,nu),t}s.normalizeGetSecretValueResponse=Hp;function gu(e){let t={};return p.setDefinedProperty(t,"secretId",e.secretId),p.setDefinedProperty(t,"versionId",e.versionId),p.setDefinedProperty(t,"versionStage",e.versionStage),t}s.normalizeGetSecretValueRequest=gu;function Wp(e){let t={};return p.setDefinedProperty(t,"deployment",e.deployment,Oo),t}s.normalizeGetLocalDeploymentStatusResponse=Wp;function yu(e){let t={};return p.setDefinedProperty(t,"deploymentId",e.deploymentId),t}s.normalizeGetLocalDeploymentStatusRequest=yu;function Qp(e){let t={};return p.setDefinedProperty(t,"restartStatus",e.restartStatus),p.setDefinedProperty(t,"message",e.message),t}s.normalizeRestartComponentResponse=Qp;function wu(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),t}s.normalizeRestartComponentRequest=wu;function Kp(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeInvalidTokenError=Kp;function Yp(e){let t={};return p.setDefinedProperty(t,"isValid",e.isValid),t}s.normalizeValidateAuthorizationTokenResponse=Yp;function bu(e){let t={};return p.setDefinedProperty(t,"token",e.token),t}s.normalizeValidateAuthorizationTokenRequest=bu;function Xp(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeFailedUpdateConditionCheckError=Xp;function Zp(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeConflictError=Zp;function jp(e){return{}}s.normalizeUpdateConfigurationResponse=jp;function Su(e){let t={};return p.setDefinedArrayProperty(t,"keyPath",e.keyPath,void 0),p.setDefinedProperty(t,"timestamp",e.timestamp,p.encodeDateAsNumber),p.setDefinedProperty(t,"valueToMerge",e.valueToMerge),t}s.normalizeUpdateConfigurationRequest=Su;function em(e){let t={};return p.setDefinedProperty(t,"payload",e.payload,p.encodePayloadAsString),t}s.normalizeUpdateThingShadowResponse=em;function Ru(e){let t={};return p.setDefinedProperty(t,"thingName",e.thingName),p.setDefinedProperty(t,"shadowName",e.shadowName),p.setDefinedProperty(t,"payload",e.payload,p.encodePayloadAsString),t}s.normalizeUpdateThingShadowRequest=Ru;function tm(e){return{}}s.normalizeSendConfigurationValidityReportResponse=tm;function _u(e){let t={};return p.setDefinedProperty(t,"configurationValidityReport",e.configurationValidityReport,iu),t}s.normalizeSendConfigurationValidityReportRequest=_u;function rm(e){let t={};return p.setDefinedProperty(t,"payload",e.payload,p.encodePayloadAsString),t}s.normalizeGetThingShadowResponse=rm;function Ou(e){let t={};return p.setDefinedProperty(t,"thingName",e.thingName),p.setDefinedProperty(t,"shadowName",e.shadowName),t}s.normalizeGetThingShadowRequest=Ou;function nm(e){let t={};return p.setDefinedProperty(t,"password",e.password),p.setDefinedProperty(t,"username",e.username),p.setDefinedProperty(t,"passwordExpiration",e.passwordExpiration,p.encodeDateAsNumber),p.setDefinedProperty(t,"certificateSHA256Hash",e.certificateSHA256Hash),p.setDefinedProperty(t,"certificateSHA1Hash",e.certificateSHA1Hash),t}s.normalizeCreateDebugPasswordResponse=nm;function Eu(e){return{}}s.normalizeCreateDebugPasswordRequest=Eu;function im(e){let t={};return p.setDefinedArrayProperty(t,"components",e.components,Eo),t}s.normalizeListComponentsResponse=im;function Tu(e){return{}}s.normalizeListComponentsRequest=Tu;function am(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeInvalidClientDeviceAuthTokenError=am;function om(e){let t={};return p.setDefinedProperty(t,"isAuthorized",e.isAuthorized),t}s.normalizeAuthorizeClientDeviceActionResponse=om;function Cu(e){let t={};return p.setDefinedProperty(t,"clientDeviceAuthToken",e.clientDeviceAuthToken),p.setDefinedProperty(t,"operation",e.operation),p.setDefinedProperty(t,"resource",e.resource),t}s.normalizeAuthorizeClientDeviceActionRequest=Cu;function sm(e){let t={};return p.setDefinedProperty(t,"isValidClientDevice",e.isValidClientDevice),t}s.normalizeVerifyClientDeviceIdentityResponse=sm;function Pu(e){let t={};return p.setDefinedProperty(t,"credential",e.credential,au),t}s.normalizeVerifyClientDeviceIdentityRequest=Pu;function um(e){return{}}s.normalizeSubscribeToCertificateUpdatesResponse=um;function Au(e){let t={};return p.setDefinedProperty(t,"certificateOptions",e.certificateOptions,ou),t}s.normalizeSubscribeToCertificateUpdatesRequest=Au;function cm(e){return{}}s.normalizePublishToTopicResponse=cm;function Du(e){let t={};return p.setDefinedProperty(t,"topic",e.topic),p.setDefinedProperty(t,"publishMessage",e.publishMessage,su),t}s.normalizePublishToTopicRequest=Du;function lm(e){let t={};return p.setDefinedProperty(t,"message",e.message),t}s.normalizeInvalidCredentialError=lm;function dm(e){let t={};return p.setDefinedProperty(t,"clientDeviceAuthToken",e.clientDeviceAuthToken),t}s.normalizeGetClientDeviceAuthTokenResponse=dm;function Iu(e){let t={};return p.setDefinedProperty(t,"credential",e.credential,uu),t}s.normalizeGetClientDeviceAuthTokenRequest=Iu;function fm(e){let t={};return p.setDefinedProperty(t,"componentDetails",e.componentDetails,Eo),t}s.normalizeGetComponentDetailsResponse=fm;function Nu(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),t}s.normalizeGetComponentDetailsRequest=Nu;function pm(e){let t={};return p.setDefinedProperty(t,"topicName",e.topicName),t}s.normalizeSubscribeToTopicResponse=pm;function Fu(e){let t={};return p.setDefinedProperty(t,"topic",e.topic),p.setDefinedProperty(t,"receiveMode",e.receiveMode),t}s.normalizeSubscribeToTopicRequest=Fu;function mm(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),p.setDefinedProperty(t,"value",e.value),t}s.normalizeGetConfigurationResponse=mm;function Mu(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),p.setDefinedArrayProperty(t,"keyPath",e.keyPath,void 0),t}s.normalizeGetConfigurationRequest=Mu;function vm(e){return{}}s.normalizeSubscribeToValidateConfigurationUpdatesResponse=vm;function qu(e){return{}}s.normalizeSubscribeToValidateConfigurationUpdatesRequest=qu;function hm(e){return{}}s.normalizeDeferComponentUpdateResponse=hm;function zu(e){let t={};return p.setDefinedProperty(t,"deploymentId",e.deploymentId),p.setDefinedProperty(t,"message",e.message),p.setDefinedProperty(t,"recheckAfterMs",e.recheckAfterMs),t}s.normalizeDeferComponentUpdateRequest=zu;function gm(e){return{}}s.normalizePutComponentMetricResponse=gm;function Lu(e){let t={};return p.setDefinedArrayProperty(t,"metrics",e.metrics,eu),t}s.normalizePutComponentMetricRequest=Lu;function ym(e){let t={};return p.setDefinedProperty(t,"payload",e.payload,p.encodePayloadAsString),t}s.normalizeDeleteThingShadowResponse=ym;function $u(e){let t={};return p.setDefinedProperty(t,"thingName",e.thingName),p.setDefinedProperty(t,"shadowName",e.shadowName),t}s.normalizeDeleteThingShadowRequest=$u;function wm(e){return{}}s.normalizeSubscribeToConfigurationUpdateResponse=wm;function Uu(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),p.setDefinedArrayProperty(t,"keyPath",e.keyPath,void 0),t}s.normalizeSubscribeToConfigurationUpdateRequest=Uu;function bm(e){return{}}s.normalizePublishToIoTCoreResponse=bm;function xu(e){let t={};return p.setDefinedProperty(t,"topicName",e.topicName),p.setDefinedProperty(t,"qos",e.qos),p.setDefinedProperty(t,"payload",e.payload,p.encodePayloadAsString),p.setDefinedProperty(t,"retain",e.retain),p.setDefinedArrayProperty(t,"userProperties",e.userProperties,Ro),p.setDefinedProperty(t,"messageExpiryIntervalSeconds",e.messageExpiryIntervalSeconds),p.setDefinedProperty(t,"correlationData",e.correlationData,p.encodePayloadAsString),p.setDefinedProperty(t,"responseTopic",e.responseTopic),p.setDefinedProperty(t,"payloadFormat",e.payloadFormat),p.setDefinedProperty(t,"contentType",e.contentType),t}s.normalizePublishToIoTCoreRequest=xu;function Sm(e){return{}}s.normalizeResumeComponentResponse=Sm;function Vu(e){let t={};return p.setDefinedProperty(t,"componentName",e.componentName),t}s.normalizeResumeComponentRequest=Vu;function Rm(e){return{}}s.normalizeSubscribeToIoTCoreResponse=Rm;function Gu(e){let t={};return p.setDefinedProperty(t,"topicName",e.topicName),p.setDefinedProperty(t,"qos",e.qos),t}s.normalizeSubscribeToIoTCoreRequest=Gu;function Po(e){p.validateValueAsOptionalString(e.key,"key","UserProperty"),p.validateValueAsOptionalString(e.value,"value","UserProperty")}s.validateUserProperty=Po;function Bu(e){p.validateValueAsOptionalInteger(e.memory,"memory","SystemResourceLimits"),p.validateValueAsOptionalNumber(e.cpus,"cpus","SystemResourceLimits")}s.validateSystemResourceLimits=Bu;function ku(e){p.validateValueAsString(e.detailedDeploymentStatus,"detailedDeploymentStatus","DeploymentStatusDetails"),p.validateValueAsOptionalArray(e.deploymentErrorStack,p.validateValueAsString,"deploymentErrorStack","DeploymentStatusDetails"),p.validateValueAsOptionalArray(e.deploymentErrorTypes,p.validateValueAsString,"deploymentErrorTypes","DeploymentStatusDetails"),p.validateValueAsOptionalString(e.deploymentFailureCause,"deploymentFailureCause","DeploymentStatusDetails")}s.validateDeploymentStatusDetails=ku;function Ao(e){p.validateValueAsOptionalString(e.topic,"topic","MessageContext")}s.validateMessageContext=Ao;function Ju(e){p.validateValueAsOptionalString(e.posixUser,"posixUser","RunWithInfo"),p.validateValueAsOptionalString(e.windowsUser,"windowsUser","RunWithInfo"),p.validateValueAsOptionalObject(e.systemResourceLimits,Bu,"systemResourceLimits","RunWithInfo")}s.validateRunWithInfo=Ju;function Do(e){p.validateValueAsString(e.deploymentId,"deploymentId","LocalDeployment"),p.validateValueAsString(e.status,"status","LocalDeployment"),p.validateValueAsOptionalString(e.createdOn,"createdOn","LocalDeployment"),p.validateValueAsOptionalObject(e.deploymentStatusDetails,ku,"deploymentStatusDetails","LocalDeployment")}s.validateLocalDeployment=Do;function Hu(e){p.validateValueAsString(e.deploymentId,"deploymentId","PostComponentUpdateEvent")}s.validatePostComponentUpdateEvent=Hu;function Wu(e){p.validateValueAsString(e.deploymentId,"deploymentId","PreComponentUpdateEvent"),p.validateValueAsBoolean(e.isGgcRestarting,"isGgcRestarting","PreComponentUpdateEvent")}s.validatePreComponentUpdateEvent=Wu;function Io(e){p.validateValueAsString(e.componentName,"componentName","ComponentDetails"),p.validateValueAsString(e.version,"version","ComponentDetails"),p.validateValueAsString(e.state,"state","ComponentDetails"),p.validateValueAsOptionalAny(e.configuration,"configuration","ComponentDetails")}s.validateComponentDetails=Io;function Qu(e){p.validateValueAsOptionalString(e.privateKey,"privateKey","CertificateUpdate"),p.validateValueAsOptionalString(e.publicKey,"publicKey","CertificateUpdate"),p.validateValueAsOptionalString(e.certificate,"certificate","CertificateUpdate"),p.validateValueAsOptionalArray(e.caCertificates,p.validateValueAsString,"caCertificates","CertificateUpdate")}s.validateCertificateUpdate=Qu;function No(e){p.validateValueAsOptionalBlob(e.message,"message","BinaryMessage"),p.validateValueAsOptionalObject(e.context,Ao,"context","BinaryMessage")}s.validateBinaryMessage=No;function Fo(e){p.validateValueAsOptionalAny(e.message,"message","JsonMessage"),p.validateValueAsOptionalObject(e.context,Ao,"context","JsonMessage")}s.validateJsonMessage=Fo;function Ku(e){p.validateValueAsOptionalString(e.clientId,"clientId","MQTTCredential"),p.validateValueAsOptionalString(e.certificatePem,"certificatePem","MQTTCredential"),p.validateValueAsOptionalString(e.username,"username","MQTTCredential"),p.validateValueAsOptionalString(e.password,"password","MQTTCredential")}s.validateMQTTCredential=Ku;function Yu(e){p.validateValueAsOptionalAny(e.configuration,"configuration","ValidateConfigurationUpdateEvent"),p.validateValueAsString(e.deploymentId,"deploymentId","ValidateConfigurationUpdateEvent")}s.validateValidateConfigurationUpdateEvent=Yu;function Xu(e){p.validateValueAsString(e.name,"name","Metric"),p.validateValueAsString(e.unit,"unit","Metric"),p.validateValueAsNumber(e.value,"value","Metric")}s.validateMetric=Xu;function Zu(e){p.validateValueAsString(e.componentName,"componentName","ConfigurationUpdateEvent"),p.validateValueAsArray(e.keyPath,p.validateValueAsString,"keyPath","ConfigurationUpdateEvent")}s.validateConfigurationUpdateEvent=Zu;function ju(e){p.validateValueAsString(e.topicName,"topicName","MQTTMessage"),p.validateValueAsOptionalBlob(e.payload,"payload","MQTTMessage"),p.validateValueAsOptionalBoolean(e.retain,"retain","MQTTMessage"),p.validateValueAsOptionalArray(e.userProperties,Po,"userProperties","MQTTMessage"),p.validateValueAsOptionalInteger(e.messageExpiryIntervalSeconds,"messageExpiryIntervalSeconds","MQTTMessage"),p.validateValueAsOptionalBlob(e.correlationData,"correlationData","MQTTMessage"),p.validateValueAsOptionalString(e.responseTopic,"responseTopic","MQTTMessage"),p.validateValueAsOptionalString(e.payloadFormat,"payloadFormat","MQTTMessage"),p.validateValueAsOptionalString(e.contentType,"contentType","MQTTMessage")}s.validateMQTTMessage=ju;const Z2=new Map([["preUpdateEvent",Wu],["postUpdateEvent",Hu]]);function _m(e){p.validateValueAsUnion(e,Z2)}s.validateComponentUpdatePolicyEvents=_m;const Om=new Map([["secretString",p.validateValueAsString],["secretBinary",p.validateValueAsBlob]]);function Em(e){p.validateValueAsUnion(e,Om)}s.validateSecretValue=Em;function ec(e){p.validateValueAsString(e.status,"status","ConfigurationValidityReport"),p.validateValueAsString(e.deploymentId,"deploymentId","ConfigurationValidityReport"),p.validateValueAsOptionalString(e.message,"message","ConfigurationValidityReport")}s.validateConfigurationValidityReport=ec;const Tm=new Map([["clientDeviceCertificate",p.validateValueAsString]]);function Cm(e){p.validateValueAsUnion(e,Tm)}s.validateClientDeviceCredential=Cm;const j2=new Map([["certificateUpdate",Qu]]);function Pm(e){p.validateValueAsUnion(e,j2)}s.validateCertificateUpdateEvent=Pm;function tc(e){p.validateValueAsString(e.certificateType,"certificateType","CertificateOptions")}s.validateCertificateOptions=tc;const Am=new Map([["jsonMessage",Fo],["binaryMessage",No]]);function Dm(e){p.validateValueAsUnion(e,Am)}s.validatePublishMessage=Dm;const Im=new Map([["mqttCredential",Ku]]);function Nm(e){p.validateValueAsUnion(e,Im)}s.validateCredentialDocument=Nm;const eB=new Map([["jsonMessage",Fo],["binaryMessage",No]]);function Fm(e){p.validateValueAsUnion(e,eB)}s.validateSubscriptionResponseMessage=Fm;const tB=new Map([["validateConfigurationUpdateEvent",Yu]]);function Mm(e){p.validateValueAsUnion(e,tB)}s.validateValidateConfigurationUpdateEvents=Mm;const rB=new Map([["configurationUpdateEvent",Zu]]);function qm(e){p.validateValueAsUnion(e,rB)}s.validateConfigurationUpdateEvents=qm;const nB=new Map([["message",ju]]);function zm(e){p.validateValueAsUnion(e,nB)}s.validateIoTCoreMessage=zm;function Lm(e){p.validateValueAsOptionalString(e.message,"message","InvalidArgumentsError")}s.validateInvalidArgumentsError=Lm;function $m(e){p.validateValueAsOptionalString(e.message,"message","InvalidArtifactsDirectoryPathError")}s.validateInvalidArtifactsDirectoryPathError=$m;function Um(e){p.validateValueAsOptionalString(e.message,"message","InvalidRecipeDirectoryPathError")}s.validateInvalidRecipeDirectoryPathError=Um;function xm(e){p.validateValueAsOptionalString(e.message,"message","ServiceError"),p.validateValueAsOptionalAny(e.context,"context","ServiceError")}s.validateServiceError=xm;function Vm(e){p.validateValueAsOptionalString(e.deploymentId,"deploymentId","CreateLocalDeploymentResponse")}s.validateCreateLocalDeploymentResponse=Vm;function Gm(e){p.validateValueAsOptionalString(e.groupName,"groupName","CreateLocalDeploymentRequest"),p.validateValueAsOptionalMap(e.rootComponentVersionsToAdd,p.validateValueAsString,p.validateValueAsString,"rootComponentVersionsToAdd","CreateLocalDeploymentRequest"),p.validateValueAsOptionalArray(e.rootComponentsToRemove,p.validateValueAsString,"rootComponentsToRemove","CreateLocalDeploymentRequest"),p.validateValueAsOptionalMap(e.componentToConfiguration,p.validateValueAsString,p.validateValueAsAny,"componentToConfiguration","CreateLocalDeploymentRequest"),p.validateValueAsOptionalMap(e.componentToRunWithInfo,p.validateValueAsString,Ju,"componentToRunWithInfo","CreateLocalDeploymentRequest"),p.validateValueAsOptionalString(e.recipeDirectoryPath,"recipeDirectoryPath","CreateLocalDeploymentRequest"),p.validateValueAsOptionalString(e.artifactsDirectoryPath,"artifactsDirectoryPath","CreateLocalDeploymentRequest"),p.validateValueAsOptionalString(e.failureHandlingPolicy,"failureHandlingPolicy","CreateLocalDeploymentRequest")}s.validateCreateLocalDeploymentRequest=Gm;function Bm(e){p.validateValueAsOptionalString(e.message,"message","ResourceNotFoundError"),p.validateValueAsOptionalString(e.resourceType,"resourceType","ResourceNotFoundError"),p.validateValueAsOptionalString(e.resourceName,"resourceName","ResourceNotFoundError")}s.validateResourceNotFoundError=Bm;function km(e){p.validateValueAsOptionalString(e.message,"message","UnauthorizedError")}s.validateUnauthorizedError=km;function Jm(e){}s.validatePauseComponentResponse=Jm;function Hm(e){p.validateValueAsString(e.componentName,"componentName","PauseComponentRequest")}s.validatePauseComponentRequest=Hm;function Wm(e){p.validateValueAsOptionalString(e.message,"message","ComponentNotFoundError")}s.validateComponentNotFoundError=Wm;function Qm(e){p.validateValueAsString(e.stopStatus,"stopStatus","StopComponentResponse"),p.validateValueAsOptionalString(e.message,"message","StopComponentResponse")}s.validateStopComponentResponse=Qm;function Km(e){p.validateValueAsString(e.componentName,"componentName","StopComponentRequest")}s.validateStopComponentRequest=Km;function Ym(e){p.validateValueAsOptionalArray(e.localDeployments,Do,"localDeployments","ListLocalDeploymentsResponse")}s.validateListLocalDeploymentsResponse=Ym;function Xm(e){}s.validateListLocalDeploymentsRequest=Xm;function Zm(e){}s.validateSubscribeToComponentUpdatesResponse=Zm;function jm(e){}s.validateSubscribeToComponentUpdatesRequest=jm;function ev(e){p.validateValueAsArray(e.results,p.validateValueAsString,"results","ListNamedShadowsForThingResponse"),p.validateValueAsDate(e.timestamp,"timestamp","ListNamedShadowsForThingResponse"),p.validateValueAsOptionalString(e.nextToken,"nextToken","ListNamedShadowsForThingResponse")}s.validateListNamedShadowsForThingResponse=ev;function tv(e){p.validateValueAsString(e.thingName,"thingName","ListNamedShadowsForThingRequest"),p.validateValueAsOptionalString(e.nextToken,"nextToken","ListNamedShadowsForThingRequest"),p.validateValueAsOptionalInteger(e.pageSize,"pageSize","ListNamedShadowsForThingRequest")}s.validateListNamedShadowsForThingRequest=tv;function rv(e){p.validateValueAsOptionalString(e.message,"message","CancelLocalDeploymentResponse")}s.validateCancelLocalDeploymentResponse=rv;function nv(e){p.validateValueAsOptionalString(e.deploymentId,"deploymentId","CancelLocalDeploymentRequest")}s.validateCancelLocalDeploymentRequest=nv;function iv(e){}s.validateUpdateStateResponse=iv;function av(e){p.validateValueAsString(e.state,"state","UpdateStateRequest")}s.validateUpdateStateRequest=av;function ov(e){p.validateValueAsString(e.secretId,"secretId","GetSecretValueResponse"),p.validateValueAsString(e.versionId,"versionId","GetSecretValueResponse"),p.validateValueAsArray(e.versionStage,p.validateValueAsString,"versionStage","GetSecretValueResponse"),p.validateValueAsUnion(e.secretValue,Om)}s.validateGetSecretValueResponse=ov;function sv(e){p.validateValueAsString(e.secretId,"secretId","GetSecretValueRequest"),p.validateValueAsOptionalString(e.versionId,"versionId","GetSecretValueRequest"),p.validateValueAsOptionalString(e.versionStage,"versionStage","GetSecretValueRequest")}s.validateGetSecretValueRequest=sv;function uv(e){p.validateValueAsObject(e.deployment,Do,"deployment","GetLocalDeploymentStatusResponse")}s.validateGetLocalDeploymentStatusResponse=uv;function cv(e){p.validateValueAsString(e.deploymentId,"deploymentId","GetLocalDeploymentStatusRequest")}s.validateGetLocalDeploymentStatusRequest=cv;function lv(e){p.validateValueAsString(e.restartStatus,"restartStatus","RestartComponentResponse"),p.validateValueAsOptionalString(e.message,"message","RestartComponentResponse")}s.validateRestartComponentResponse=lv;function dv(e){p.validateValueAsString(e.componentName,"componentName","RestartComponentRequest")}s.validateRestartComponentRequest=dv;function fv(e){p.validateValueAsOptionalString(e.message,"message","InvalidTokenError")}s.validateInvalidTokenError=fv;function pv(e){p.validateValueAsBoolean(e.isValid,"isValid","ValidateAuthorizationTokenResponse")}s.validateValidateAuthorizationTokenResponse=pv;function mv(e){p.validateValueAsString(e.token,"token","ValidateAuthorizationTokenRequest")}s.validateValidateAuthorizationTokenRequest=mv;function vv(e){p.validateValueAsOptionalString(e.message,"message","FailedUpdateConditionCheckError")}s.validateFailedUpdateConditionCheckError=vv;function hv(e){p.validateValueAsOptionalString(e.message,"message","ConflictError")}s.validateConflictError=hv;function gv(e){}s.validateUpdateConfigurationResponse=gv;function yv(e){p.validateValueAsOptionalArray(e.keyPath,p.validateValueAsString,"keyPath","UpdateConfigurationRequest"),p.validateValueAsDate(e.timestamp,"timestamp","UpdateConfigurationRequest"),p.validateValueAsAny(e.valueToMerge,"valueToMerge","UpdateConfigurationRequest")}s.validateUpdateConfigurationRequest=yv;function wv(e){p.validateValueAsBlob(e.payload,"payload","UpdateThingShadowResponse")}s.validateUpdateThingShadowResponse=wv;function bv(e){p.validateValueAsString(e.thingName,"thingName","UpdateThingShadowRequest"),p.validateValueAsOptionalString(e.shadowName,"shadowName","UpdateThingShadowRequest"),p.validateValueAsBlob(e.payload,"payload","UpdateThingShadowRequest")}s.validateUpdateThingShadowRequest=bv;function Sv(e){}s.validateSendConfigurationValidityReportResponse=Sv;function Rv(e){p.validateValueAsObject(e.configurationValidityReport,ec,"configurationValidityReport","SendConfigurationValidityReportRequest")}s.validateSendConfigurationValidityReportRequest=Rv;function _v(e){p.validateValueAsBlob(e.payload,"payload","GetThingShadowResponse")}s.validateGetThingShadowResponse=_v;function Ov(e){p.validateValueAsString(e.thingName,"thingName","GetThingShadowRequest"),p.validateValueAsOptionalString(e.shadowName,"shadowName","GetThingShadowRequest")}s.validateGetThingShadowRequest=Ov;function Ev(e){p.validateValueAsString(e.password,"password","CreateDebugPasswordResponse"),p.validateValueAsString(e.username,"username","CreateDebugPasswordResponse"),p.validateValueAsDate(e.passwordExpiration,"passwordExpiration","CreateDebugPasswordResponse"),p.validateValueAsOptionalString(e.certificateSHA256Hash,"certificateSHA256Hash","CreateDebugPasswordResponse"),p.validateValueAsOptionalString(e.certificateSHA1Hash,"certificateSHA1Hash","CreateDebugPasswordResponse")}s.validateCreateDebugPasswordResponse=Ev;function Tv(e){}s.validateCreateDebugPasswordRequest=Tv;function Cv(e){p.validateValueAsOptionalArray(e.components,Io,"components","ListComponentsResponse")}s.validateListComponentsResponse=Cv;function Pv(e){}s.validateListComponentsRequest=Pv;function Av(e){p.validateValueAsOptionalString(e.message,"message","InvalidClientDeviceAuthTokenError")}s.validateInvalidClientDeviceAuthTokenError=Av;function Dv(e){p.validateValueAsBoolean(e.isAuthorized,"isAuthorized","AuthorizeClientDeviceActionResponse")}s.validateAuthorizeClientDeviceActionResponse=Dv;function Iv(e){p.validateValueAsString(e.clientDeviceAuthToken,"clientDeviceAuthToken","AuthorizeClientDeviceActionRequest"),p.validateValueAsString(e.operation,"operation","AuthorizeClientDeviceActionRequest"),p.validateValueAsString(e.resource,"resource","AuthorizeClientDeviceActionRequest")}s.validateAuthorizeClientDeviceActionRequest=Iv;function Nv(e){p.validateValueAsBoolean(e.isValidClientDevice,"isValidClientDevice","VerifyClientDeviceIdentityResponse")}s.validateVerifyClientDeviceIdentityResponse=Nv;function Fv(e){p.validateValueAsUnion(e.credential,Tm)}s.validateVerifyClientDeviceIdentityRequest=Fv;function Mv(e){}s.validateSubscribeToCertificateUpdatesResponse=Mv;function qv(e){p.validateValueAsObject(e.certificateOptions,tc,"certificateOptions","SubscribeToCertificateUpdatesRequest")}s.validateSubscribeToCertificateUpdatesRequest=qv;function zv(e){}s.validatePublishToTopicResponse=zv;function Lv(e){p.validateValueAsString(e.topic,"topic","PublishToTopicRequest"),p.validateValueAsUnion(e.publishMessage,Am)}s.validatePublishToTopicRequest=Lv;function $v(e){p.validateValueAsOptionalString(e.message,"message","InvalidCredentialError")}s.validateInvalidCredentialError=$v;function Uv(e){p.validateValueAsString(e.clientDeviceAuthToken,"clientDeviceAuthToken","GetClientDeviceAuthTokenResponse")}s.validateGetClientDeviceAuthTokenResponse=Uv;function xv(e){p.validateValueAsUnion(e.credential,Im)}s.validateGetClientDeviceAuthTokenRequest=xv;function Vv(e){p.validateValueAsObject(e.componentDetails,Io,"componentDetails","GetComponentDetailsResponse")}s.validateGetComponentDetailsResponse=Vv;function Gv(e){p.validateValueAsString(e.componentName,"componentName","GetComponentDetailsRequest")}s.validateGetComponentDetailsRequest=Gv;function Bv(e){p.validateValueAsOptionalString(e.topicName,"topicName","SubscribeToTopicResponse")}s.validateSubscribeToTopicResponse=Bv;function kv(e){p.validateValueAsString(e.topic,"topic","SubscribeToTopicRequest"),p.validateValueAsOptionalString(e.receiveMode,"receiveMode","SubscribeToTopicRequest")}s.validateSubscribeToTopicRequest=kv;function Jv(e){p.validateValueAsOptionalString(e.componentName,"componentName","GetConfigurationResponse"),p.validateValueAsOptionalAny(e.value,"value","GetConfigurationResponse")}s.validateGetConfigurationResponse=Jv;function Hv(e){p.validateValueAsOptionalString(e.componentName,"componentName","GetConfigurationRequest"),p.validateValueAsArray(e.keyPath,p.validateValueAsString,"keyPath","GetConfigurationRequest")}s.validateGetConfigurationRequest=Hv;function Wv(e){}s.validateSubscribeToValidateConfigurationUpdatesResponse=Wv;function Qv(e){}s.validateSubscribeToValidateConfigurationUpdatesRequest=Qv;function Kv(e){}s.validateDeferComponentUpdateResponse=Kv;function Yv(e){p.validateValueAsString(e.deploymentId,"deploymentId","DeferComponentUpdateRequest"),p.validateValueAsOptionalString(e.message,"message","DeferComponentUpdateRequest"),p.validateValueAsOptionalInteger(e.recheckAfterMs,"recheckAfterMs","DeferComponentUpdateRequest")}s.validateDeferComponentUpdateRequest=Yv;function Xv(e){}s.validatePutComponentMetricResponse=Xv;function Zv(e){p.validateValueAsArray(e.metrics,Xu,"metrics","PutComponentMetricRequest")}s.validatePutComponentMetricRequest=Zv;function jv(e){p.validateValueAsBlob(e.payload,"payload","DeleteThingShadowResponse")}s.validateDeleteThingShadowResponse=jv;function eh(e){p.validateValueAsString(e.thingName,"thingName","DeleteThingShadowRequest"),p.validateValueAsOptionalString(e.shadowName,"shadowName","DeleteThingShadowRequest")}s.validateDeleteThingShadowRequest=eh;function th(e){}s.validateSubscribeToConfigurationUpdateResponse=th;function rh(e){p.validateValueAsOptionalString(e.componentName,"componentName","SubscribeToConfigurationUpdateRequest"),p.validateValueAsArray(e.keyPath,p.validateValueAsString,"keyPath","SubscribeToConfigurationUpdateRequest")}s.validateSubscribeToConfigurationUpdateRequest=rh;function nh(e){}s.validatePublishToIoTCoreResponse=nh;function ih(e){p.validateValueAsString(e.topicName,"topicName","PublishToIoTCoreRequest"),p.validateValueAsString(e.qos,"qos","PublishToIoTCoreRequest"),p.validateValueAsOptionalBlob(e.payload,"payload","PublishToIoTCoreRequest"),p.validateValueAsOptionalBoolean(e.retain,"retain","PublishToIoTCoreRequest"),p.validateValueAsOptionalArray(e.userProperties,Po,"userProperties","PublishToIoTCoreRequest"),p.validateValueAsOptionalInteger(e.messageExpiryIntervalSeconds,"messageExpiryIntervalSeconds","PublishToIoTCoreRequest"),p.validateValueAsOptionalBlob(e.correlationData,"correlationData","PublishToIoTCoreRequest"),p.validateValueAsOptionalString(e.responseTopic,"responseTopic","PublishToIoTCoreRequest"),p.validateValueAsOptionalString(e.payloadFormat,"payloadFormat","PublishToIoTCoreRequest"),p.validateValueAsOptionalString(e.contentType,"contentType","PublishToIoTCoreRequest")}s.validatePublishToIoTCoreRequest=ih;function ah(e){}s.validateResumeComponentResponse=ah;function oh(e){p.validateValueAsString(e.componentName,"componentName","ResumeComponentRequest")}s.validateResumeComponentRequest=oh;function sh(e){}s.validateSubscribeToIoTCoreResponse=sh;function uh(e){p.validateValueAsString(e.topicName,"topicName","SubscribeToIoTCoreRequest"),p.validateValueAsString(e.qos,"qos","SubscribeToIoTCoreRequest")}s.validateSubscribeToIoTCoreRequest=uh;function rc(e){return e}s.deserializeUserProperty=rc;function ch(e){return e}s.deserializeSystemResourceLimits=ch;function lh(e){return e}s.deserializeDeploymentStatusDetails=lh;function nc(e){return e}s.deserializeMessageContext=nc;function dh(e){return p.setDefinedProperty(e,"systemResourceLimits",e.systemResourceLimits,ch),e}s.deserializeRunWithInfo=dh;function ic(e){return p.setDefinedProperty(e,"deploymentStatusDetails",e.deploymentStatusDetails,lh),e}s.deserializeLocalDeployment=ic;function fh(e){return e}s.deserializePostComponentUpdateEvent=fh;function ph(e){return e}s.deserializePreComponentUpdateEvent=ph;function ac(e){return e}s.deserializeComponentDetails=ac;function mh(e){return e}s.deserializeCertificateUpdate=mh;function oc(e){return p.setDefinedProperty(e,"message",e.message,p.transformStringAsPayload),p.setDefinedProperty(e,"context",e.context,nc),e}s.deserializeBinaryMessage=oc;function sc(e){return p.setDefinedProperty(e,"context",e.context,nc),e}s.deserializeJsonMessage=sc;function vh(e){return e}s.deserializeMQTTCredential=vh;function hh(e){return e}s.deserializeValidateConfigurationUpdateEvent=hh;function gh(e){return e}s.deserializeMetric=gh;function yh(e){return e}s.deserializeConfigurationUpdateEvent=yh;function wh(e){return p.setDefinedProperty(e,"payload",e.payload,p.transformStringAsPayload),p.setDefinedArrayProperty(e,"userProperties",e.userProperties,rc),p.setDefinedProperty(e,"correlationData",e.correlationData,p.transformStringAsPayload),e}s.deserializeMQTTMessage=wh;function bh(e){return p.setDefinedProperty(e,"preUpdateEvent",e.preUpdateEvent,ph),p.setDefinedProperty(e,"postUpdateEvent",e.postUpdateEvent,fh),e}s.deserializeComponentUpdatePolicyEvents=bh;function Sh(e){return p.setDefinedProperty(e,"secretBinary",e.secretBinary,p.transformStringAsPayload),e}s.deserializeSecretValue=Sh;function Rh(e){return e}s.deserializeConfigurationValidityReport=Rh;function _h(e){return e}s.deserializeClientDeviceCredential=_h;function Oh(e){return p.setDefinedProperty(e,"certificateUpdate",e.certificateUpdate,mh),e}s.deserializeCertificateUpdateEvent=Oh;function Eh(e){return e}s.deserializeCertificateOptions=Eh;function Th(e){return p.setDefinedProperty(e,"jsonMessage",e.jsonMessage,sc),p.setDefinedProperty(e,"binaryMessage",e.binaryMessage,oc),e}s.deserializePublishMessage=Th;function Ch(e){return p.setDefinedProperty(e,"mqttCredential",e.mqttCredential,vh),e}s.deserializeCredentialDocument=Ch;function Ph(e){return p.setDefinedProperty(e,"jsonMessage",e.jsonMessage,sc),p.setDefinedProperty(e,"binaryMessage",e.binaryMessage,oc),e}s.deserializeSubscriptionResponseMessage=Ph;function Ah(e){return p.setDefinedProperty(e,"validateConfigurationUpdateEvent",e.validateConfigurationUpdateEvent,hh),e}s.deserializeValidateConfigurationUpdateEvents=Ah;function Dh(e){return p.setDefinedProperty(e,"configurationUpdateEvent",e.configurationUpdateEvent,yh),e}s.deserializeConfigurationUpdateEvents=Dh;function Ih(e){return p.setDefinedProperty(e,"message",e.message,wh),e}s.deserializeIoTCoreMessage=Ih;function iB(e){return e}s.deserializeInvalidArgumentsError=iB;function aB(e){return e}s.deserializeInvalidArtifactsDirectoryPathError=aB;function oB(e){return e}s.deserializeInvalidRecipeDirectoryPathError=oB;function sB(e){return e}s.deserializeServiceError=sB;function uB(e){return e}s.deserializeCreateLocalDeploymentResponse=uB;function cB(e){return p.setDefinedObjectPropertyAsMap(e,"componentToRunWithInfo",e.componentToRunWithInfo,void 0,dh),e}s.deserializeCreateLocalDeploymentRequest=cB;function lB(e){return e}s.deserializeResourceNotFoundError=lB;function dB(e){return e}s.deserializeUnauthorizedError=dB;function fB(e){return e}s.deserializePauseComponentResponse=fB;function pB(e){return e}s.deserializePauseComponentRequest=pB;function mB(e){return e}s.deserializeComponentNotFoundError=mB;function vB(e){return e}s.deserializeStopComponentResponse=vB;function hB(e){return e}s.deserializeStopComponentRequest=hB;function Nh(e){return p.setDefinedArrayProperty(e,"localDeployments",e.localDeployments,ic),e}s.deserializeListLocalDeploymentsResponse=Nh;function gB(e){return e}s.deserializeListLocalDeploymentsRequest=gB;function yB(e){return e}s.deserializeSubscribeToComponentUpdatesResponse=yB;function wB(e){return e}s.deserializeSubscribeToComponentUpdatesRequest=wB;function Fh(e){return p.setDefinedProperty(e,"timestamp",e.timestamp,p.transformNumberAsDate),e}s.deserializeListNamedShadowsForThingResponse=Fh;function bB(e){return e}s.deserializeListNamedShadowsForThingRequest=bB;function SB(e){return e}s.deserializeCancelLocalDeploymentResponse=SB;function RB(e){return e}s.deserializeCancelLocalDeploymentRequest=RB;function _B(e){return e}s.deserializeUpdateStateResponse=_B;function OB(e){return e}s.deserializeUpdateStateRequest=OB;function Mh(e){return p.setDefinedProperty(e,"secretValue",e.secretValue,Sh),e}s.deserializeGetSecretValueResponse=Mh;function EB(e){return e}s.deserializeGetSecretValueRequest=EB;function qh(e){return p.setDefinedProperty(e,"deployment",e.deployment,ic),e}s.deserializeGetLocalDeploymentStatusResponse=qh;function TB(e){return e}s.deserializeGetLocalDeploymentStatusRequest=TB;function CB(e){return e}s.deserializeRestartComponentResponse=CB;function PB(e){return e}s.deserializeRestartComponentRequest=PB;function AB(e){return e}s.deserializeInvalidTokenError=AB;function DB(e){return e}s.deserializeValidateAuthorizationTokenResponse=DB;function IB(e){return e}s.deserializeValidateAuthorizationTokenRequest=IB;function NB(e){return e}s.deserializeFailedUpdateConditionCheckError=NB;function FB(e){return e}s.deserializeConflictError=FB;function MB(e){return e}s.deserializeUpdateConfigurationResponse=MB;function qB(e){return p.setDefinedProperty(e,"timestamp",e.timestamp,p.transformNumberAsDate),e}s.deserializeUpdateConfigurationRequest=qB;function zh(e){return p.setDefinedProperty(e,"payload",e.payload,p.transformStringAsPayload),e}s.deserializeUpdateThingShadowResponse=zh;function zB(e){return p.setDefinedProperty(e,"payload",e.payload,p.transformStringAsPayload),e}s.deserializeUpdateThingShadowRequest=zB;function LB(e){return e}s.deserializeSendConfigurationValidityReportResponse=LB;function $B(e){return p.setDefinedProperty(e,"configurationValidityReport",e.configurationValidityReport,Rh),e}s.deserializeSendConfigurationValidityReportRequest=$B;function Lh(e){return p.setDefinedProperty(e,"payload",e.payload,p.transformStringAsPayload),e}s.deserializeGetThingShadowResponse=Lh;function UB(e){return e}s.deserializeGetThingShadowRequest=UB;function $h(e){return p.setDefinedProperty(e,"passwordExpiration",e.passwordExpiration,p.transformNumberAsDate),e}s.deserializeCreateDebugPasswordResponse=$h;function xB(e){return e}s.deserializeCreateDebugPasswordRequest=xB;function Uh(e){return p.setDefinedArrayProperty(e,"components",e.components,ac),e}s.deserializeListComponentsResponse=Uh;function VB(e){return e}s.deserializeListComponentsRequest=VB;function GB(e){return e}s.deserializeInvalidClientDeviceAuthTokenError=GB;function BB(e){return e}s.deserializeAuthorizeClientDeviceActionResponse=BB;function kB(e){return e}s.deserializeAuthorizeClientDeviceActionRequest=kB;function JB(e){return e}s.deserializeVerifyClientDeviceIdentityResponse=JB;function HB(e){return p.setDefinedProperty(e,"credential",e.credential,_h),e}s.deserializeVerifyClientDeviceIdentityRequest=HB;function WB(e){return e}s.deserializeSubscribeToCertificateUpdatesResponse=WB;function QB(e){return p.setDefinedProperty(e,"certificateOptions",e.certificateOptions,Eh),e}s.deserializeSubscribeToCertificateUpdatesRequest=QB;function KB(e){return e}s.deserializePublishToTopicResponse=KB;function YB(e){return p.setDefinedProperty(e,"publishMessage",e.publishMessage,Th),e}s.deserializePublishToTopicRequest=YB;function XB(e){return e}s.deserializeInvalidCredentialError=XB;function ZB(e){return e}s.deserializeGetClientDeviceAuthTokenResponse=ZB;function jB(e){return p.setDefinedProperty(e,"credential",e.credential,Ch),e}s.deserializeGetClientDeviceAuthTokenRequest=jB;function xh(e){return p.setDefinedProperty(e,"componentDetails",e.componentDetails,ac),e}s.deserializeGetComponentDetailsResponse=xh;function ek(e){return e}s.deserializeGetComponentDetailsRequest=ek;function tk(e){return e}s.deserializeSubscribeToTopicResponse=tk;function rk(e){return e}s.deserializeSubscribeToTopicRequest=rk;function nk(e){return e}s.deserializeGetConfigurationResponse=nk;function ik(e){return e}s.deserializeGetConfigurationRequest=ik;function ak(e){return e}s.deserializeSubscribeToValidateConfigurationUpdatesResponse=ak;function ok(e){return e}s.deserializeSubscribeToValidateConfigurationUpdatesRequest=ok;function sk(e){return e}s.deserializeDeferComponentUpdateResponse=sk;function uk(e){return e}s.deserializeDeferComponentUpdateRequest=uk;function ck(e){return e}s.deserializePutComponentMetricResponse=ck;function lk(e){return p.setDefinedArrayProperty(e,"metrics",e.metrics,gh),e}s.deserializePutComponentMetricRequest=lk;function Vh(e){return p.setDefinedProperty(e,"payload",e.payload,p.transformStringAsPayload),e}s.deserializeDeleteThingShadowResponse=Vh;function dk(e){return e}s.deserializeDeleteThingShadowRequest=dk;function fk(e){return e}s.deserializeSubscribeToConfigurationUpdateResponse=fk;function pk(e){return e}s.deserializeSubscribeToConfigurationUpdateRequest=pk;function mk(e){return e}s.deserializePublishToIoTCoreResponse=mk;function vk(e){return p.setDefinedProperty(e,"payload",e.payload,p.transformStringAsPayload),p.setDefinedArrayProperty(e,"userProperties",e.userProperties,rc),p.setDefinedProperty(e,"correlationData",e.correlationData,p.transformStringAsPayload),e}s.deserializePublishToIoTCoreRequest=vk;function hk(e){return e}s.deserializeResumeComponentResponse=hk;function gk(e){return e}s.deserializeResumeComponentRequest=gk;function yk(e){return e}s.deserializeSubscribeToIoTCoreResponse=yk;function wk(e){return e}s.deserializeSubscribeToIoTCoreRequest=wk;function Gh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToConflictError=Gh;function Bh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return $h(r)}s.deserializeEventstreamMessageToCreateDebugPasswordResponse=Bh;function kh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Ph(r)}s.deserializeEventstreamMessageToSubscriptionResponseMessage=kh;function Jh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToFailedUpdateConditionCheckError=Jh;function Hh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Fh(r)}s.deserializeEventstreamMessageToListNamedShadowsForThingResponse=Hh;function Wh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToComponentNotFoundError=Wh;function Qh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Oh(r)}s.deserializeEventstreamMessageToCertificateUpdateEvent=Qh;function Kh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Mh(r)}s.deserializeEventstreamMessageToGetSecretValueResponse=Kh;function Yh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToSubscribeToIoTCoreResponse=Yh;function Xh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToInvalidRecipeDirectoryPathError=Xh;function Zh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Nh(r)}s.deserializeEventstreamMessageToListLocalDeploymentsResponse=Zh;function jh(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToResumeComponentResponse=jh;function eg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToInvalidArgumentsError=eg;function tg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return xh(r)}s.deserializeEventstreamMessageToGetComponentDetailsResponse=tg;function rg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToPutComponentMetricResponse=rg;function ng(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return bh(r)}s.deserializeEventstreamMessageToComponentUpdatePolicyEvents=ng;function ig(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Ih(r)}s.deserializeEventstreamMessageToIoTCoreMessage=ig;function ag(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToUpdateStateResponse=ag;function og(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToDeferComponentUpdateResponse=og;function sg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Uh(r)}s.deserializeEventstreamMessageToListComponentsResponse=sg;function ug(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToSubscribeToComponentUpdatesResponse=ug;function cg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToVerifyClientDeviceIdentityResponse=cg;function lg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToResourceNotFoundError=lg;function dg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToInvalidArtifactsDirectoryPathError=dg;function fg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToSendConfigurationValidityReportResponse=fg;function pg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Lh(r)}s.deserializeEventstreamMessageToGetThingShadowResponse=pg;function mg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToInvalidClientDeviceAuthTokenError=mg;function vg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToPublishToIoTCoreResponse=vg;function hg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToSubscribeToTopicResponse=hg;function gg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToInvalidTokenError=gg;function yg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToGetClientDeviceAuthTokenResponse=yg;function wg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToCreateLocalDeploymentResponse=wg;function bg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToPublishToTopicResponse=bg;function Sg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToValidateAuthorizationTokenResponse=Sg;function Rg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return zh(r)}s.deserializeEventstreamMessageToUpdateThingShadowResponse=Rg;function _g(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToAuthorizeClientDeviceActionResponse=_g;function Og(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToGetConfigurationResponse=Og;function Eg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToInvalidCredentialError=Eg;function Tg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return qh(r)}s.deserializeEventstreamMessageToGetLocalDeploymentStatusResponse=Tg;function Cg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToPauseComponentResponse=Cg;function Pg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToUnauthorizedError=Pg;function Ag(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToSubscribeToCertificateUpdatesResponse=Ag;function Dg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToUpdateConfigurationResponse=Dg;function Ig(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToRestartComponentResponse=Ig;function Ng(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Vh(r)}s.deserializeEventstreamMessageToDeleteThingShadowResponse=Ng;function Fg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToSubscribeToConfigurationUpdateResponse=Fg;function Mg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToSubscribeToValidateConfigurationUpdatesResponse=Mg;function qg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToServiceError=qg;function zg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Dh(r)}s.deserializeEventstreamMessageToConfigurationUpdateEvents=zg;function Lg(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToStopComponentResponse=Lg;function $g(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return Ah(r)}s.deserializeEventstreamMessageToValidateConfigurationUpdateEvents=$g;function Ug(e){const t=(0,J.toUtf8)(new Uint8Array(e.payload));let r=JSON.parse(t);return r}s.deserializeEventstreamMessageToCancelLocalDeploymentResponse=Ug;function xg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Nu(e))}}s.serializeGetComponentDetailsRequestToEventstreamMessage=xg;function Vg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Du(e))}}s.serializePublishToTopicRequestToEventstreamMessage=Vg;function Gg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Eu())}}s.serializeCreateDebugPasswordRequestToEventstreamMessage=Gg;function Bg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Ru(e))}}s.serializeUpdateThingShadowRequestToEventstreamMessage=Bg;function kg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Vu(e))}}s.serializeResumeComponentRequestToEventstreamMessage=kg;function Jg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(du(e))}}s.serializeStopComponentRequestToEventstreamMessage=Jg;function Hg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Pu(e))}}s.serializeVerifyClientDeviceIdentityRequestToEventstreamMessage=Hg;function Wg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Cu(e))}}s.serializeAuthorizeClientDeviceActionRequestToEventstreamMessage=Wg;function Qg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(fu())}}s.serializeListLocalDeploymentsRequestToEventstreamMessage=Qg;function Kg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(_u(e))}}s.serializeSendConfigurationValidityReportRequestToEventstreamMessage=Kg;function Yg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(bu(e))}}s.serializeValidateAuthorizationTokenRequestToEventstreamMessage=Yg;function Xg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Iu(e))}}s.serializeGetClientDeviceAuthTokenRequestToEventstreamMessage=Xg;function Zg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(lu(e))}}s.serializePauseComponentRequestToEventstreamMessage=Zg;function jg(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(xu(e))}}s.serializePublishToIoTCoreRequestToEventstreamMessage=jg;function ey(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify($u(e))}}s.serializeDeleteThingShadowRequestToEventstreamMessage=ey;function ty(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Mu(e))}}s.serializeGetConfigurationRequestToEventstreamMessage=ty;function ry(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(zu(e))}}s.serializeDeferComponentUpdateRequestToEventstreamMessage=ry;function ny(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(gu(e))}}s.serializeGetSecretValueRequestToEventstreamMessage=ny;function iy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Tu())}}s.serializeListComponentsRequestToEventstreamMessage=iy;function ay(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Fu(e))}}s.serializeSubscribeToTopicRequestToEventstreamMessage=ay;function oy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(vu(e))}}s.serializeCancelLocalDeploymentRequestToEventstreamMessage=oy;function sy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Au(e))}}s.serializeSubscribeToCertificateUpdatesRequestToEventstreamMessage=sy;function uy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(qu())}}s.serializeSubscribeToValidateConfigurationUpdatesRequestToEventstreamMessage=uy;function cy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(cu(e))}}s.serializeCreateLocalDeploymentRequestToEventstreamMessage=cy;function ly(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Lu(e))}}s.serializePutComponentMetricRequestToEventstreamMessage=ly;function dy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Uu(e))}}s.serializeSubscribeToConfigurationUpdateRequestToEventstreamMessage=dy;function fy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(pu())}}s.serializeSubscribeToComponentUpdatesRequestToEventstreamMessage=fy;function py(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(wu(e))}}s.serializeRestartComponentRequestToEventstreamMessage=py;function my(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(mu(e))}}s.serializeListNamedShadowsForThingRequestToEventstreamMessage=my;function vy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Su(e))}}s.serializeUpdateConfigurationRequestToEventstreamMessage=vy;function hy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(yu(e))}}s.serializeGetLocalDeploymentStatusRequestToEventstreamMessage=hy;function gy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Ou(e))}}s.serializeGetThingShadowRequestToEventstreamMessage=gy;function yy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(Gu(e))}}s.serializeSubscribeToIoTCoreRequestToEventstreamMessage=yy;function wy(e){return{type:Z.eventstream.MessageType.ApplicationMessage,payload:JSON.stringify(hu(e))}}s.serializeUpdateStateRequestToEventstreamMessage=wy;var bk=g&&g.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Sk=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),uc=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&bk(t,e,r);return Sk(t,e),t},ne=g&&g.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(u,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.Client=Qt.model=void 0;const Rk=uc(fp);Qt.model=Rk;const _k=uc(s),X=uc(Vn),Ok=Jr;class Mo extends Ok.EventEmitter{constructor(t){super(),this.serviceModel=_k.makeServiceModel(),this.rpcClient=X.RpcClient.new(t),this.rpcClient.on("disconnection",r=>{setImmediate(()=>{this.emit(Mo.DISCONNECTION,r)})})}connect(){return ne(this,void 0,void 0,function*(){yield this.rpcClient.connect()})}close(){return ne(this,void 0,void 0,function*(){yield this.rpcClient.close()})}on(t,r){return super.on(t,r),this}authorizeClientDeviceAction(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#AuthorizeClientDeviceAction",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}cancelLocalDeployment(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#CancelLocalDeployment",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}createDebugPassword(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#CreateDebugPassword",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}createLocalDeployment(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#CreateLocalDeployment",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}deferComponentUpdate(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#DeferComponentUpdate",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}deleteThingShadow(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#DeleteThingShadow",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}getClientDeviceAuthToken(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#GetClientDeviceAuthToken",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}getComponentDetails(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#GetComponentDetails",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}getConfiguration(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#GetConfiguration",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}getLocalDeploymentStatus(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#GetLocalDeploymentStatus",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}getSecretValue(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#GetSecretValue",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}getThingShadow(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#GetThingShadow",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}listComponents(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#ListComponents",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}listLocalDeployments(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#ListLocalDeployments",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}listNamedShadowsForThing(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#ListNamedShadowsForThing",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}pauseComponent(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#PauseComponent",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}publishToIoTCore(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#PublishToIoTCore",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}publishToTopic(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#PublishToTopic",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}putComponentMetric(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#PutComponentMetric",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}restartComponent(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#RestartComponent",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}resumeComponent(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#ResumeComponent",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}sendConfigurationValidityReport(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#SendConfigurationValidityReport",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}stopComponent(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#StopComponent",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}subscribeToCertificateUpdates(t,r){let n={name:"aws.greengrass#SubscribeToCertificateUpdates",client:this.rpcClient,options:r||{}};return new X.StreamingOperation(t,n,this.serviceModel)}subscribeToComponentUpdates(t,r){let n={name:"aws.greengrass#SubscribeToComponentUpdates",client:this.rpcClient,options:r||{}};return new X.StreamingOperation(t,n,this.serviceModel)}subscribeToConfigurationUpdate(t,r){let n={name:"aws.greengrass#SubscribeToConfigurationUpdate",client:this.rpcClient,options:r||{}};return new X.StreamingOperation(t,n,this.serviceModel)}subscribeToIoTCore(t,r){let n={name:"aws.greengrass#SubscribeToIoTCore",client:this.rpcClient,options:r||{}};return new X.StreamingOperation(t,n,this.serviceModel)}subscribeToTopic(t,r){let n={name:"aws.greengrass#SubscribeToTopic",client:this.rpcClient,options:r||{}};return new X.StreamingOperation(t,n,this.serviceModel)}subscribeToValidateConfigurationUpdates(t,r){let n={name:"aws.greengrass#SubscribeToValidateConfigurationUpdates",client:this.rpcClient,options:r||{}};return new X.StreamingOperation(t,n,this.serviceModel)}updateConfiguration(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#UpdateConfiguration",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}updateState(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#UpdateState",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}updateThingShadow(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#UpdateThingShadow",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}validateAuthorizationToken(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#ValidateAuthorizationToken",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}verifyClientDeviceIdentity(t,r){return ne(this,void 0,void 0,function*(){let n={name:"aws.greengrass#VerifyClientDeviceIdentity",client:this.rpcClient,options:r||{}};return yield new X.RequestResponseOperation(n,this.serviceModel).activate(t)})}}Qt.Client=Mo;Mo.DISCONNECTION="disconnection";(function(e){var t=g&&g.__createBinding||(Object.create?function(f,m,v,h){h===void 0&&(h=v);var y=Object.getOwnPropertyDescriptor(m,v);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(f,h,y)}:function(f,m,v,h){h===void 0&&(h=v),f[h]=m[v]}),r=g&&g.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),n=g&&g.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var v in f)v!=="default"&&Object.prototype.hasOwnProperty.call(f,v)&&t(m,f,v);return r(m,f),m},i=g&&g.__exportStar||function(f,m){for(var v in f)v!=="default"&&!Object.prototype.hasOwnProperty.call(m,v)&&t(m,f,v)},a=g&&g.__awaiter||function(f,m,v,h){function y(_){return _ instanceof v?_:new v(function(O){O(_)})}return new(v||(v=Promise))(function(_,O){function P(T){try{b(h.next(T))}catch(S){O(S)}}function C(T){try{b(h.throw(T))}catch(S){O(S)}}function b(T){T.done?_(T.value):y(T.value).then(P,C)}b((h=h.apply(f,m||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.createDefaultClientConfig=void 0;const o=n(Qt),u=n(Vn),l=Kt;i(Qt,e);function c(){let f=process.env.AWS_GG_NUCLEUS_DOMAIN_SOCKET_FILEPATH_FOR_COMPONENT,m=process.env.SVCUID;return{hostName:f||"",port:0,socketOptions:new l.io.SocketOptions(l.io.SocketType.STREAM,l.io.SocketDomain.LOCAL),connectTransform:v=>a(this,void 0,void 0,function*(){let h=v.message;return m&&(h.payload=JSON.stringify({authToken:m})),h})}}e.createDefaultClientConfig=c;function d(f){return f||(f=c()),u.validateRpcClientConfig(f),new o.Client(f)}e.createClient=d})(dp);(function(e){var t=g&&g.__createBinding||(Object.create?function(f,m,v,h){h===void 0&&(h=v);var y=Object.getOwnPropertyDescriptor(m,v);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(f,h,y)}:function(f,m,v,h){h===void 0&&(h=v),f[h]=m[v]}),r=g&&g.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),n=g&&g.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var v in f)v!=="default"&&Object.prototype.hasOwnProperty.call(f,v)&&t(m,f,v);return r(m,f),m};Object.defineProperty(e,"__esModule",{value:!0}),e.CrtError=e.mqtt5=e.mqtt=e.iotshadow=e.iotjobs=e.iotidentity=e.iot=e.io=e.http=e.greengrasscoreipc=e.greengrass=e.eventstream_rpc=e.auth=void 0;const i=n(bt);e.iotidentity=i;const a=n(St);e.greengrass=a;const o=n(Rt);e.iotjobs=o;const u=n(_t);e.iotshadow=u;const l=n(Vn);e.eventstream_rpc=l;const c=n(dp);e.greengrasscoreipc=c;const d=Kt;Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return d.auth}}),Object.defineProperty(e,"http",{enumerable:!0,get:function(){return d.http}}),Object.defineProperty(e,"io",{enumerable:!0,get:function(){return d.io}}),Object.defineProperty(e,"iot",{enumerable:!0,get:function(){return d.iot}}),Object.defineProperty(e,"mqtt",{enumerable:!0,get:function(){return d.mqtt}}),Object.defineProperty(e,"mqtt5",{enumerable:!0,get:function(){return d.mqtt5}}),Object.defineProperty(e,"CrtError",{enumerable:!0,get:function(){return d.CrtError}})})($e);const{AwsIotMqtt5ClientConfigBuilder:Ek}=$e.iot,{Mqtt5Client:Tk}=$e.mqtt5;function Ck(e,t){const r=new Map,n=new Map;async function i(v){const h=v.id;switch(v.type){case w.MQTT_CONNECT_REQUEST:o(v);break;case w.MQTT_DISCONNECT_REQUEST:u(v);break;case w.MQTT_PUBLISH_REQUEST:l(v);break;case w.MQTT_SUBSCRIBE_REQUEST:c(v);break;case w.MQTT_UNSUBSCRIBE_REQUEST:d(v);break;default:m("Invalid mqttClientHandler message type",h)}}function a(v){const h=r.get(v);if(h===void 0)throw new Error("Client not found");return h}async function o({id:v,config:h}){const{hostName:y,port:_,keepAliveIntervalSeconds:O,productSerial:P}=h;try{const C=$f(P),{data:b}=await t.deviceList({deviceListRequest:C});if(b.devices.length===0)throw new Error("Device not found");const{additionalAttributes:T,deviceHash:S}=b.devices[0];if(T===void 0)throw new Error("Certificates not found");const{certificates:A}=T,F=ts(A.cert),I=ts(A.key),z=ts(A.ca),U=Ek.newDirectMqttBuilderWithMtlsFromMemory(y,F,I).withCertificateAuthority(z).withPort(_).withConnectProperties({keepAliveIntervalSeconds:O,clientId:S}),$=new Tk(U.build());$.on("attemptingConnect",G=>{console.log("attemptingConnect",G)}),$.on("connectionSuccess",({connack:G,settings:R})=>{e.next({type:w.MQTT_CONNECT_RESPONSE,id:v,connack:G,settings:R})}),$.on("connectionFailure",({error:G})=>{const R=vt(G,"ConnectionFailure");m(R,v)}),$.on("error",G=>{console.error(G);const R=vt(G);m(R,v),$.stop()}),$.on("disconnection",({disconnect:G,error:R})=>{if(G!==void 0){m(G.reasonString??"Unknown disconnect",v);return}const E=vt(R,"Disconnect");m(E,v)}),$.on("stopped",()=>{m("stopped",v)});const L=Jr.once($,"connectionSuccess");$.start(),await L,$.removeAllListeners(),$.on("messageReceived",({message:G})=>{if(console.log("Message Received:",JSON.stringify(G)),G.payload!==void 0){const R=ip(new Uint8Array(G.payload));console.log("Message Payload:",R)}f(G,h)}),r.set(P,{client:$,config:h})}catch(C){const b=vt(C);m(b,v)}}async function u({id:v,productSerial:h}){try{const{client:y}=a(h);y.removeAllListeners();const _=Jr.once(y,"stopped");y.stop(),await _,y.close(),e.next({type:w.MQTT_DISCONNECT_RESPONSE,id:v})}catch(y){const _=vt(y);m(_,v)}}async function l({id:v,topicName:h,payload:y,productSerial:_}){try{const{client:O}=a(_),P=({disconnect:b})=>{m((b==null?void 0:b.reasonString)??"Unknown disconnect",v),O.removeListener("disconnection",P).stop()};O.on("disconnection",P);const C=await O.publish({qos:$e.mqtt5.QoS.AtMostOnce,topicName:h,payload:y});(C===void 0||C.reasonCode===$e.mqtt5.PubackReasonCode.Success)&&e.next({type:w.MQTT_PUBLISH_RESPONSE,id:v,result:C}),setTimeout(()=>{O.removeListener("disconnection",P)},600)}catch(O){const P=vt(O);m(P,v)}}async function c({id:v,topicFilter:h,productSerial:y}){try{const{client:_,config:O}=a(y),{enableSubscriptionIdentifiers:P}=O,C=({disconnect:I})=>{m((I==null?void 0:I.reasonString)??"Unknown disconnect",v),_.removeListener("disconnection",C).stop()};_.on("disconnection",C);const b=P?v:void 0,T=[{qos:$e.mqtt5.QoS.AtMostOnce,topicFilter:h}],S=await _.subscribe(P?{subscriptions:T,subscriptionIdentifier:b}:{subscriptions:T});if(S==null?void 0:S.reasonCodes.every(I=>I===$e.mqtt5.SubackReasonCode.GrantedQoS0||I===$e.mqtt5.SubackReasonCode.GrantedQoS1||I===$e.mqtt5.SubackReasonCode.GrantedQoS2)){const I=T.map(z=>z.topicFilter);n.set(v,I),e.next({type:w.MQTT_SUBSCRIBE_RESPONSE,id:v,result:S});return}const F=S==null?void 0:S.reasonCodes.map(I=>`${_x($e.mqtt5.SubackReasonCode,I)} [${I}]`);m(`Subscription failed with reasons: ${F.toString()}`,v),setTimeout(()=>{_.removeListener("disconnection",C)},1e3)}catch(_){console.error(_);const O=vt(_);m(O,v)}}async function d({id:v,productSerial:h}){try{const{client:y}=a(h),_=n.get(v);if(_===void 0)throw new Error("Topic filters not found");const O=await y.unsubscribe({topicFilters:_});if(O!=null&&O.reasonCodes.every(C=>C===$e.mqtt5.UnsubackReasonCode.Success)){n.delete(v),e.next({type:w.MQTT_UNSUBSCRIBE_RESPONSE,id:v});return}console.log("Unsubscribe failed",O);const[{disconnect:P}]=await Jr.once(y,"disconnection");m((P==null?void 0:P.reasonString)??"Unknown disconnect",v)}catch(y){const _=vt(y);m(_,v)}}function f(v,{enableSubscriptionIdentifiers:h}){const{subscriptionIdentifiers:y,topicName:_,payload:O}=v;if(h){if(y===void 0){console.error(`No subscription identifiers for topic: ${_}`);return}for(const P of y){if(!n.has(P)){console.error(`No message handler for topic: ${_} with id: ${P}`);return}e.next({type:w.MQTT_SUBSCRIBE_UPDATE,id:P,topicName:_,payload:O})}return}for(const[P,C]of n)for(const b of C)Pk(_,b)&&e.next({type:w.MQTT_SUBSCRIBE_UPDATE,id:P,topicName:_,payload:O})}function m(v,h){e.next({type:w.ERROR_RESPONSE,id:h,reason:v})}return{mqttClientHandler:i}}function Pk(e,t){const r=t.replace(/\+/g,"[^/]+").replace(/#/g,".+").replace("$","\\$");return new RegExp(`^${r}$`).test(e)}function Ak(e){const t=new Map;async function r({id:f,options:m}){const{comPort:v}=m;if(typeof v!="string"||v.length===0)throw new Error("No com port specified");try{if(t.get(v)!==void 0){e.next({type:w.PLC_OPEN_RESPONSE,id:f});return}const y=jf(m);await y.open(),t.set(v,y),e.next({type:w.PLC_OPEN_RESPONSE,id:f})}catch(h){await d(h,f)}}function n(f){Sx(f);const m=t.get(f);if(m===void 0)throw new Error(`PLC client not found for comPort: ${f}`);return m}async function i({id:f,comPort:m,command:v}){try{Rx(v);const y=await n(m).send(v);e.next({type:w.PLC_RESPONSE,id:f,responses:y})}catch(h){await d(h,f)}}async function a({id:f,comPort:m}){try{const h=await n(m).scanDevices();e.next({type:w.PLC_SCAN_DEVICES_RESPONSE,id:f,plcDevices:h})}catch(v){await d(v,f)}}async function o({id:f,comPort:m,device:v}){try{const y=await n(m).getDeviceInfo(v);e.next({type:w.PLC_GET_DEVICE_INFO_RESPONSE,id:f,info:y})}catch(h){await d(h,f)}}async function u({id:f,comPort:m,device:v,percent:h}){try{const _=await n(m).setPower(v,h);if(_!==0)throw new Error(`Error setting power: ${_}`);e.next({type:w.PLC_SET_POWER_RESPONSE,id:f,statusCode:_})}catch(y){await d(y,f)}}async function l({id:f,comPort:m,device:v}){try{const y=await n(m).getData(v);e.next({type:w.PLC_GET_DATA_RESPONSE,id:f,data:y})}catch(h){await d(h,f)}}async function c({id:f,comPort:m}){try{await n(m).close(),e.next({type:w.PLC_CLOSE_RESPONSE,id:f,message:`Port ${m} closed`})}catch(v){await d(v,f)}}async function d(f,m,v){const{msg:h}=await ae(f);e.next({type:w.ERROR_RESPONSE,id:m,reason:h})}return{plcOpenHandler:r,plcMessageHandler:i,plcScanDevicesHandler:a,plcGetDeviceInfo:o,plcSetPower:u,plcGetData:l,plcCloseHandler:c}}function Dk({id:e,fn:t,args:r}){switch(t){case Dd.CRC32:try{const n=kb.readFileSync(r[0]),i=Yf(n);return{type:w.UTILITY_RESPONSE,result:i.toString(16).padStart(8,"0").toUpperCase(),id:e}}catch(n){return{type:w.ERROR_RESPONSE,id:e,reason:n instanceof Error?n.message:"Unknown error"}}default:return{type:w.ERROR_RESPONSE,id:e,reason:"Unknown utility function"}}}async function Ik(e,t){const r=hs("76b513a2d19d972de051a10596a3afdb"),n=await cc.subtle.importKey("raw",hs(e),{name:"AES-CTR"},!1,["encrypt","decrypt"]);return await cc.subtle.decrypt({name:"AES-CTR",counter:r,length:128},n,t)}function Nk(e){async function t({id:r,fileType:n,productCode:i,encryptedFileContent:a,decryptionKey:o,fileVersion:u,fileHash:l,encoding:c,fileName:d,releaseId:f,remarks:m}){try{const v=await Ik(o,a);globalThis.cachedFirmwareFiles===void 0&&(globalThis.cachedFirmwareFiles=[]),globalThis.cachedFirmwareFiles.push({fileType:n,productCode:i,content:new Uint8Array(v),version:u,hash:l,encoding:c,fileName:d,releaseId:f,remarks:m??""}),e.next({type:w.DOWNLOAD_FIRMWARE_FILE_RESPONSE,id:r,message:`Download successful (Product Code: ${i}, Version: ${u}, Hash: ${l})`})}catch(v){const{msg:h}=await ae(v);e.next({type:w.ERROR_RESPONSE,id:r,reason:h})}}return{downloadFirmwareFileHandler:t}}async function Fk(e){const t=new px(Xr.IPC_FLASH,e),{api:r}=Qd(e),{printHandler:n}=NG(t,r),{serialPortListHandler:i}=mx(t),{serialPortTestHandler:a}=Ex(t),{serialPortHandler:o,serialPortCloseHandler:u}=Hf(t),{generateNvsHandler:l}=Jf(t,r),{generateOtpHandler:c}=Kf(t,r),{igbTestHandler:d}=bG(t,r),{esp32FlashHandler:f}=oV(t,r),{esp32EraseHandler:m}=rV(t),{esp32TestHandler:v}=zG(t),{microchipTestHandler:h}=LG(t),{microchipEraseHandler:y}=nV(t),{microchipListHandler:_}=_G(t),{microchipFlashHandler:O}=pV(t,r),{microchipPlcFlashHandler:P}=bV(t,r),{comPortMonitorHandler:C}=vx(t),{plcOpenHandler:b,plcMessageHandler:T,plcScanDevicesHandler:S,plcGetDeviceInfo:A,plcSetPower:F,plcGetData:I,plcCloseHandler:z}=Ak(t),{saveFileHandler:U}=qG(t),{readFileHandler:$}=MG(t),{downloadFirmwareFileHandler:L}=Nk(t),{mqttClientHandler:G}=Ck(t,r);t.subscribe(R=>{switch(R.type){case w.PING:t.next({type:w.PONG,id:R.id});break;case w.GENERATE_NVS_CSV_REQUEST:l(R);break;case w.FLASH_TEST_REQUEST:switch(R.deviceType){case Pe.ESP32_C3:case Pe.ESP32_S3:v(R);break;case Pe.MICROCHIP:h(R);break}break;case w.FLASH_START_REQUEST:switch(R.deviceType){case Pe.ESP32_C3:case Pe.ESP32_S3:f(R);break;case Pe.MICROCHIP:R.plcMode?P(R):O(R);break}break;case w.FLASH_ERASE_REQUEST:switch(R.deviceType){case Pe.ESP32_C3:case Pe.ESP32_S3:m(R);break;case Pe.MICROCHIP:y(R);break}break;case w.COM_PORT_TEST_REQUEST:a(R);break;case w.COM_PORT_LIST_REQUEST:i(R);break;case w.SERIAL_PORT_REQUEST:o(R);break;case w.SERIAL_PORT_CLOSE_REQUEST:u(R);break;case w.PRINT_COMMAND_REQUEST:case w.PRINT_TEST_REQUEST:case w.PRINT_REQUEST:n(R);break;case w.MICROCHIP_LIST_REQUEST:_(R);break;case w.GENERATE_OTP_REQUEST:c(R);break;case w.START_COM_MONITOR_REQUEST:C(R);break;case w.STOP_COM_MONITOR_REQUEST:C(R);break;case w.COM_MONITOR_SEND_DATA:C(R);break;case w.UTILITY_REQUEST:t.next(Dk(R));break;case w.IGB_TEST_REQUEST:d(R);break;case w.SAVE_FILE_REQUEST:U(R);break;case w.READ_FILE_REQUEST:$(R);break;case w.SET_MENU_BAR_VISIBILITY:e.setMenuBarVisibility(R.visible);break;case w.PLC_OPEN_REQUEST:b(R);break;case w.PLC_REQUEST:T(R);break;case w.PLC_SCAN_DEVICES_REQUEST:S(R);break;case w.PLC_GET_DEVICE_INFO_REQUEST:A(R);break;case w.PLC_SET_POWER_REQUEST:F(R);break;case w.PLC_GET_DATA_REQUEST:I(R);break;case w.PLC_CLOSE_REQUEST:z(R);break;case w.DOWNLOAD_FIRMWARE_FILE_REQUEST:L(R);break;case w.MQTT_CONNECT_REQUEST:case w.MQTT_DISCONNECT_REQUEST:case w.MQTT_PUBLISH_REQUEST:case w.MQTT_SUBSCRIBE_REQUEST:case w.MQTT_UNSUBSCRIBE_REQUEST:G(R);break;default:console.error("Unknown message type",R.type)}}),console.log("IpcServer started")}function bd(){const e=new _e.BrowserWindow({title:"Solarnative Fab App",icon:"public/icon.png",autoHideMenuBar:!0,webPreferences:{preload:Qe.join(__dirname,"../dist-electron/preload.js"),contextIsolation:!0}});e.webContents.on("did-finish-load",()=>{e.setTitle(`Fab App v${Hb}`)}),process.env.VITE_DEV_SERVER_URL!==void 0?(console.log("Development Mode"),e.loadURL("http://localhost:3000")):(console.log("Production Mode"),e.loadFile(Qe.join(__dirname,"../dist/index.html"))),e.maximize(),VC(e),Fk(e),process.env.NODE_ENV==="development"&&e.webContents.openDevTools()}_e.app.whenReady().then(()=>{bd(),_e.app.on("activate",function(){_e.BrowserWindow.getAllWindows().length===0&&bd()}),_e.session.defaultSession.webRequest.onHeadersReceived((e,t)=>{t({responseHeaders:{...e.responseHeaders,"Content-Security-Policy":["script-src 'self' 'unsafe-inline' http://localhost:3000/"]}})})});_e.app.on("window-all-closed",function(){process.platform!=="darwin"&&_e.app.quit()});_e.app.on("before-quit",e=>{console.log("About to quit the app...")});_e.ipcMain.on(Xr.TO_CLIPBOARD_IN_MAIN,(e,t)=>{_e.clipboard.writeText(t)});
