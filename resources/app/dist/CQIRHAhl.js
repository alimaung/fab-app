import{d as Io,aK as ko,aL as wo,dw as Co,r as x,t as m,v as M,z as o,A as e,B as a,N as s,ax as xo,P as _o,ai as yo,ay as Mo,dx as ro,R as io,ao as qo,dy as se,aN as U,dz as j,dA as Y,a0 as To,a5 as $o,a6 as Lo,a4 as Eo,a8 as So,a9 as Ro,X as Ao,ab as Do,Y as zo,Z as No,a3 as Uo,a2 as Oo,ac as Fo,aH as Xo,ar as Ho,_ as Vo,aB as Ko,C as ae,D as re,x as oe,bb as ue,c as Go,o as ce,K as jo,L as T,bg as Zo,O as G,Q as mo,y as C,dB as de,aC as pe,m as ee,af as _e,a1 as fe,W as te,bI as me,aS as Yo,dC as Jo,$ as ve,as as ge,aj as ne,ap as le,bQ as ye,M as be,V as Be}from"./0fV2q4Ox.js";import{_ as Pe}from"./logout.js";import{_ as xe}from"./D3w5NPJd.js";import{z as Ie,p as lo,A as ke,B as we}from"./D0r5xylr.js";import{a as ie}from"./DaypLSNh.js";import{_ as Ce}from"./CxwSbNEQ.js";import{u as Te}from"./rGigr8ii.js";import"./BYx_WZxC.js";const $e=Io({__name:"logisticsProductLabel",setup(q){const{request:L,newMsgId:S}=ko(wo.IPC_FLASH),I=Co(),k=x(""),P=x(),c=x(""),p=[],v=x(!1),R=b=>v.value=b;async function D(){v.value=!0}function g(){var b;(b=P==null?void 0:P.value)==null||b.$el.setFocus()}function A(){c.value="Print cancelled ❌",_()}function _(){k.value="",qo(()=>g())}async function $(){if(p.includes(k.value)){await(await se.create({header:"Print label again? 🤔",animated:!0,backdropDismiss:!0,buttons:[{text:"Cancel",role:"cancel",handler:()=>{A()}},{text:"Print",role:"confirm",handler:()=>{O()}}]})).present();return}O()}async function O(){c.value="Print job started. Please wait. 🕒";try{const{message:b}=await L({type:U.PRINT_REQUEST,id:S(),input:k.value,ipAddress:I.value.ipAddress,port:I.value.port,printer:j.CAB_SQUIX63,labelType:Y.PRODUCT},3e4);p.push(k.value),c.value=b,_()}catch(b){const y=b instanceof Error?b.message:"Unknown error type";c.value=`⚠️ Error: ${y}`}}return(b,y)=>{const J=To,F=$o,so=Lo,ao=Eo,oo=So,V=Ro,z=Ao,X=Do,h=zo,eo=No,to=Uo,W=Oo,uo=Fo,i=Xo,l=Ho;return m(),M(io,null,[o(V,null,{default:e(()=>[o(so,null,{default:e(()=>[o(J,null,{default:e(()=>[a("📻 Product Label")]),_:1}),o(F,null,{default:e(()=>[a("Print a product label to stick directly onto the device")]),_:1})]),_:1}),o(oo,null,{default:e(()=>[o(ao,{onClick:y[0]||(y[0]=t=>D())},{default:e(()=>[a("Start")]),_:1})]),_:1})]),_:1}),o(l,{"is-open":s(v),onWillDismiss:y[7]||(y[7]=t=>R(!1)),onDidPresent:y[8]||(y[8]=t=>g())},{default:e(()=>[o(eo,null,{default:e(()=>[o(h,null,{default:e(()=>[o(z,null,{default:e(()=>[a("Print Product Label")]),_:1}),o(ao,{onClick:y[1]||(y[1]=t=>R(!1)),slot:"end",fill:"default"},{default:e(()=>[o(X,{icon:"ioniconsClose"in b?b.ioniconsClose:s(xo),size:"medium"},null,8,["icon"])]),_:1})]),_:1})]),_:1}),o(uo,{class:"ion-padding"},{default:e(()=>[o(W,null,{default:e(()=>[o(to,{ref_key:"qrCodeInput",ref:P,type:"text",label:"Data Matrix Code",modelValue:s(k),"onUpdate:modelValue":y[2]||(y[2]=t=>_o(k)?k.value=t:null),onKeyup:y[3]||(y[3]=yo(t=>$(),["enter"]))},null,8,["modelValue"]),o(X,{slot:"end",label:"Clear input",icon:"ioniconsBackspace"in b?b.ioniconsBackspace:s(Mo),onClick:y[4]||(y[4]=t=>_())},null,8,["icon"]),o(X,{slot:"end",label:"Print",color:"tertiary",icon:"ioniconsPrint"in b?b.ioniconsPrint:s(ro),onClick:y[5]||(y[5]=t=>$())},null,8,["icon"])]),_:1})]),_:1}),o(i,null,{default:e(()=>[o(h,null,{default:e(()=>[o(W,{lines:"none"},{default:e(()=>[o(to,{type:"text",modelValue:s(c),"onUpdate:modelValue":y[6]||(y[6]=t=>_o(c)?c.value=t:null),readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"])],64)}}}),Le={},Ee=q=>(ae("data-v-25773f85"),q=q(),re(),q),Se={class:"flex-container"},Re=Ee(()=>oe("div",{class:"spacer"},null,-1));function Ae(q,L){return m(),M("div",Se,[Ko(q.$slots,"start",{},void 0,!0),Re,Ko(q.$slots,"end",{},void 0,!0)])}const De=Vo(Le,[["render",Ae],["__scopeId","data-v-25773f85"]]),ze=Io({__name:"logisticsProductPackagingLabel",setup(q){const{request:L,newMsgId:S}=ko(wo.IPC_FLASH),{$api:I}=ee(),{hasRole:k}=ue(),P=Co(),c=x(""),p=x(0),v=Go(()=>y(p.value)),R=x(!1),D=i=>R.value=i,g=x(!1),A={name:"Select a logistics box",gtin:"",count:0,perBox:0,content:"",id:0,productBoxTypeId:0},_=x([]),$=x([A]),O=x(-1);ce(async()=>{$.value=[A,...await b()]});async function b(){const{data:i}=await I.logisticsBoxTypeList(),{logisticsBoxTypes:l}=i;return l?l.map(({numberUnits:t,productBoxType:n,id:u})=>{const f=`${t}x ${n.articleNumber}`;return{id:u,name:f,gtin:n.gTIN,count:t,perBox:n.numberUnits,content:n.articleNumber,productBoxTypeId:n.id}}):[]}function y(i){const l=$.value.find(({id:t})=>t===i);if(!l)throw new Error(`Logistics box with id ${i} not found`);return l}async function J(i,l){if(W.value){c.value="😃 Logistics box is full";return}for(let u=0;u<l.length;u++)l[u].length>14&&(l[u]=Ie(l[u]));const t=l.indexOf("");if(t>-1){z(i-1,t,!1);return}const n=_.value.find(u=>u.pos===i);if(!n){c.value=`⛔ Product box not found at pos ${i}`;return}try{if(n.productBoxId<0){c.value=`Creating new product box for ${l} 📦`;const{productBoxTypeId:N}=v.value,{data:H}=await I.productBoxCreate({productBoxCreateRequest:{productBoxTypeId:N,productSerials:l}});n.productBoxId=H.productBoxId}const u=await ie(l[0]),{gtin:f}=v.value;c.value="Printing product box label. Please wait. 🕒";const B=await L({type:U.PRINT_REQUEST,id:S(),input:n.productBoxId.toString(),ipAddress:P.value.ipAddress,port:P.value.port,printer:j.ZEBRA_ZD420,labelType:Y.PRODUCT_BOX,content:u,gtin:f},3e4);if(c.value=B.message,u.startsWith("IG")){c.value="Printing product box Wi-Fi label. Please wait. 🕒";const N=await L({type:U.PRINT_REQUEST,id:S(),input:l[0],ipAddress:P.value.ipAddress,port:P.value.port,printer:j.ZEBRA_ZD420,labelType:Y.PRODUCT_BOX_WIFI},3e4);c.value=N.message}z(i,0,!1)}catch(u){const{code:f,msg:B}=await lo(u);if(f===400)try{const{data:no}=await I.productBoxGet({productBoxGetRequest:{productSerial:l[0]}}),{id:N,logisticsBox:H}=no.productBox;if(H){n.productBoxId=-2,c.value=`⚠️ Error: Product is already in logistics box ${H.id}`;return}n.productBoxId=N,c.value=`Product box ${N} loaded 💾`,z(i,0,!1);return}catch(no){const{code:N,msg:H}=await lo(no);n.productBoxId=-2,c.value=`⚠️ Error: ${H} [${N}]`;return}n.productBoxId=-2,c.value=`⚠️ Error: ${B} [${f}]`}}async function F(){try{for(const{pos:l,productBoxId:t,productSerials:n}of _.value){if(t===-1)throw new Error(`Missing productBoxId at pos ${l} with product serials ${n}`);if(t===-2)throw new Error(`Invalid productBoxId at pos ${l} with product serials ${n}`)}if(O.value<0){c.value="Creating new logistics box 📦";const l=_.value.map(u=>u.productBoxId),t=v.value.id,{data:n}=await I.logisticsBoxCreate({logisticsBoxCreateRequest:{logisticsBoxTypeId:t,productBoxIds:l}});O.value=n.logisticsBoxId}c.value="Print job started. Please wait. 🕒";const{message:i}=await L({type:U.PRINT_REQUEST,id:S(),input:O.value.toString(),ipAddress:P.value.ipAddress,port:P.value.port,printer:j.ZEBRA_ZD420,labelType:Y.LOGISTICS_BOX,content:v.value.content},3e4);c.value=i,g.value=!0}catch(i){const{msg:l}=await lo(i);c.value=`⚠️ Error: ${l}`}}async function so(){try{const{message:i}=await L({type:U.PRINT_REQUEST,id:S(),input:"824",ipAddress:P.value.ipAddress,port:P.value.port,printer:j.ZEBRA_ZD420,labelType:Y.PRODUCT_BOX,content:"PSB-350-10",gtin:"7777777777777"});c.value=i}catch(i){const{msg:l}=await lo(i);c.value=`⚠️ Error: ${l}`}}async function ao(){try{const{message:i}=await L({type:U.PRINT_REQUEST,id:S(),input:"00000300002USB",ipAddress:P.value.ipAddress,port:P.value.port,printer:j.ZEBRA_ZD420,labelType:Y.PRODUCT_BOX_WIFI});c.value=i}catch(i){const{msg:l}=await lo(i);c.value=`⚠️ Error: ${l}`}}async function oo(){try{const{message:i}=await L({type:U.PRINT_REQUEST,id:S(),input:"1",ipAddress:P.value.ipAddress,port:P.value.port,printer:j.ZEBRA_ZD420,labelType:Y.LOGISTICS_BOX,content:"TEST"});c.value=i}catch(i){const{msg:l}=await lo(i);c.value=`⚠️ Error: ${l}`}}const V=x([]);async function z(i=0,l=0,t=!0){t&&await new Promise(n=>setTimeout(n,600)),i<V.value.length?l<V.value[i].$el.children.length&&await V.value[i].$el.children[l].setFocus():X()}function X(){console.log("OK")}function h(i=-1){if(g.value=!1,O.value=-1,c.value="",i===-1){for(let l=0;l<_.value.length;l++){_.value[l].productBoxId=-1;for(let t=0;t<_.value[l].productSerials.length;t++)_.value[l].productSerials[t]=""}z();return}for(let l=0;l<_.value[i].productSerials.length;l++)_.value[i].productBoxId=-1,_.value[i].productSerials[l]=""}function eo(i,l,t){return t>1?`${i}${ke(l)}.`:`${i}.`}async function to(){R.value=!0}const W=Go(()=>_.value.length===0?!1:_.value.every(({productBoxId:i})=>i>=0));jo(v,()=>{const i=[],{count:l,perBox:t}=v.value;for(let n=0;n<l;n++)i.push({pos:n+1,productSerials:Array.from({length:t},()=>""),productBoxId:-1});_.value=i,qo(()=>{h(),z()})});function uo(i){const l=new Set;for(const t of i){if(t.productBoxId>-1&&l.has(t.productBoxId))return t;l.add(t.productBoxId)}return null}return jo(_,i=>{const l=uo(i);if(l!==null){c.value=`⚠️ Error: Product box id ${l.productBoxId} is a duplicate`,l.productBoxId=-2;return}const t=i.every(u=>u.productBoxId!==-1),n=i.length!==0;t&&n&&!g.value&&(F(),g.value=!0)},{deep:!0}),(i,l)=>{const t=To,n=$o,u=Lo,f=Eo,B=Do,no=De,N=So,H=Ro,co=Ao,Q=zo,bo=No,ho=_e,Bo=fe,fo=Oo,vo=Uo,d=Fo,E=te,Wo=Xo,Qo=Ho;return m(),M(io,null,[o(H,null,{default:e(()=>[o(u,null,{default:e(()=>[o(t,null,{default:e(()=>[a("📦 Product Packaging Labels")]),_:1}),o(n,null,{default:e(()=>[a(" Print product box and logistics box labels ")]),_:1})]),_:1}),o(N,null,{default:e(()=>[o(no,null,{start:e(()=>[o(f,{onClick:l[0]||(l[0]=w=>to())},{default:e(()=>[a("Start")]),_:1})]),end:e(()=>[s(k)("Supervisor","Developer")?(m(),T(f,{key:0,onClick:l[1]||(l[1]=w=>so()),color:"warning",slot:"end"},{default:e(()=>[o(B,{slot:"start",icon:"ioniconsFlask"in i?i.ioniconsFlask:s(Zo)},null,8,["icon"]),a(" Product box ")]),_:1})):G("",!0),s(k)("Supervisor","Developer")?(m(),T(f,{key:1,onClick:l[2]||(l[2]=w=>ao()),color:"warning",slot:"end"},{default:e(()=>[o(B,{slot:"start",icon:"ioniconsFlask"in i?i.ioniconsFlask:s(Zo)},null,8,["icon"]),a(" Product Box Wi-Fi ")]),_:1})):G("",!0),s(k)("Supervisor","Developer")?(m(),T(f,{key:2,onClick:l[3]||(l[3]=w=>oo()),color:"warning",slot:"end"},{default:e(()=>[o(B,{slot:"start",icon:"ioniconsFlask"in i?i.ioniconsFlask:s(Zo)},null,8,["icon"]),a(" Logistics box ")]),_:1})):G("",!0)]),_:1})]),_:1})]),_:1}),o(Qo,{"is-open":s(R),onWillDismiss:l[9]||(l[9]=w=>D(!1))},{default:e(()=>[o(bo,null,{default:e(()=>[o(Q,null,{default:e(()=>[o(co,null,{default:e(()=>[a("Print Packaging Labels")]),_:1}),o(f,{onClick:l[4]||(l[4]=w=>D(!1)),slot:"end",fill:"default"},{default:e(()=>[o(B,{icon:"ioniconsClose"in i?i.ioniconsClose:s(xo),size:"medium"},null,8,["icon"])]),_:1})]),_:1})]),_:1}),o(d,{class:"ion-padding"},{default:e(()=>[o(fo,null,{default:e(()=>[o(Bo,{modelValue:s(p),"onUpdate:modelValue":l[5]||(l[5]=w=>_o(p)?p.value=w:null),class:"select",placeholder:"Select packaging box",label:"Packaging box",interface:"action-sheet"},{default:e(()=>[(m(!0),M(io,null,mo(s($),({name:w,id:Z})=>(m(),T(ho,{value:Z},{default:e(()=>[a(C(w),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),(m(!0),M(io,null,mo(s(_),({pos:w,productSerials:Z,productBoxId:Po})=>(m(),T(fo,{ref_for:!0,ref_key:"qrRefs",ref:V},{default:e(()=>[(m(!0),M(io,null,mo(Z.keys(),po=>(m(),T(vo,{type:"text",label:eo(w,po+1,Z.length),modelValue:Z[po],"onUpdate:modelValue":r=>Z[po]=r,onKeyup:yo(r=>J(w,Z),["enter"]),disabled:s(W)},null,8,["label","modelValue","onUpdate:modelValue","onKeyup","disabled"]))),256)),Po>-1?(m(),T(B,{key:0,slot:"end",label:"Created",icon:Z.length>1?"ioniconsCheckmarkDone"in i?i.ioniconsCheckmarkDone:s(de):"ioniconsCheckmark"in i?i.ioniconsCheckmark:s(pe),color:"success"},null,8,["icon"])):G("",!0),Po===-2?(m(),T(B,{key:1,slot:"end",label:"Error",icon:"ioniconsClose"in i?i.ioniconsClose:s(xo),color:"danger"},null,8,["icon"])):G("",!0),o(B,{slot:"end",label:"Clear input",icon:"ioniconsBackspace"in i?i.ioniconsBackspace:s(Mo),onClick:po=>h(w-1)},null,8,["icon","onClick"]),o(B,{slot:"end",label:"Print box label",color:"tertiary",icon:"ioniconsPrint"in i?i.ioniconsPrint:s(ro),onClick:po=>J(w,Z)},null,8,["icon","onClick"])]),_:2},1536))),256)),s(W)?(m(),T(fo,{key:0,lines:"none"},{default:e(()=>[o(f,{class:"ion-margin-top",slot:"end",color:s(g)?"success":"primary",onClick:l[6]||(l[6]=w=>F())},{default:e(()=>[a(" Print logistics box label ")]),_:1},8,["color"])]),_:1})):G("",!0)]),_:1}),o(Wo,null,{default:e(()=>[o(Q,null,{default:e(()=>[o(fo,{lines:"none"},{default:e(()=>[o(vo,{type:"text",modelValue:s(c),"onUpdate:modelValue":l[7]||(l[7]=w=>_o(c)?c.value=w:null),readonly:""},null,8,["modelValue"])]),_:1}),o(E,{slot:"end"},{default:e(()=>[o(f,{class:"ion-padding-end",color:"warning",strong:!0,onClick:l[8]||(l[8]=w=>h())},{default:e(()=>[a(" Clear ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"])],64)}}}),Ne=Vo(ze,[["__scopeId","data-v-b6340d16"]]),Ue=["onClick"],Oe=Io({__name:"logisticsProductPackagingLookup",setup(q){const{request:L,newMsgId:S}=ko(wo.IPC_FLASH),I=Co(),{$api:k}=ee(),P=x(!1),c=t=>P.value=t,p=x(""),v=x(""),R=x(),D=x(!1),g=x(null),A=x(null),_=x(null),$=x(null),{historyAdd:O,historyUp:b,historyDown:y}=Te(v,"packagingLookup"),J=Go(()=>{var t;return((t=A.value)==null?void 0:t.articleNumber.startsWith("IG"))??!1});async function F(){oo(),D.value=!0;try{const{id:t,type:n,code:u}=we(v.value);switch(O(v.value),n){case Jo.PRODUCT_SERIAL:const{data:{productBox:f}}=await k.productBoxGet({productBoxGetRequest:{productSerial:u}});if(g.value=f,A.value=await h(),!g.value)throw new Error(`Nothing found for productSerial: ${u}`);break;case Jo.LOGISTICS_BOX_ID:const{data:{logisticsBox:B}}=await k.logisticsBoxGet({logisticsBoxGetRequest:{logisticsBoxId:t}});if(_.value=B,$.value=await z(),!_.value)throw new Error(`Nothing found for logisticsBoxId: ${t}`);break;default:throw new Error(`Unknown Identifier: ${u}`)}R.value.$el.classList.add("ion-valid")}catch(t){R.value.$el.classList.add("ion-invalid");const{msg:n}=await lo(t);p.value=`⚠️ Error: ${n}`}finally{R.value.$el.classList.add("ion-touched"),D.value=!1,v.value=""}}function so(){R.value&&R.value.$el.setFocus()}function ao(){v.value="",qo(()=>{so(),oo()})}function oo(){p.value="",g.value=null,_.value=null,$.value=null}function V(){var n,u,f,B;const t=((f=(u=(n=g.value)==null?void 0:n.logisticsBox)==null?void 0:u.type)==null?void 0:f.id)||((B=_.value)==null?void 0:B.type.id);if(t!==void 0)return t;throw new Error("Missing logistics box data")}async function z(){const t=V(),{data:n}=await k.logisticsBoxTypeList();if(n.logisticsBoxTypes===void 0)throw new Error("No logistic box types found");const u=n.logisticsBoxTypes.find(({id:f})=>f===t);if(u===void 0)throw new Error(`Logistics box type '${t}' not found`);return u}function X(){var n;const t=(n=g.value)==null?void 0:n.type.id;if(t!==void 0)return t;throw new Error("Missing product box data")}async function h(){const t=X(),{data:n}=await k.productBoxTypeList();if(n.productBoxTypes.length===0)throw new Error("No product box types found");const u=n.productBoxTypes.find(({id:f})=>f===t);if(u===void 0)throw new Error(`Product box type '${t}' not found`);return u}function eo(){const t=$.value;if(t===null)throw new Error("No logistic box type in ref");return t}async function to(t,n){try{const u=eo(),f=await ie(n[0]);p.value="Printing product box label. Please wait. 🕒";const B=await L({type:U.PRINT_REQUEST,id:S(),input:t.toString(),ipAddress:I.value.ipAddress,port:I.value.port,printer:j.ZEBRA_ZD420,labelType:Y.PRODUCT_BOX,content:f,gtin:u.productBoxType.gTIN});p.value=B.message}catch(u){const{code:f,msg:B}=await lo(u);p.value=`⚠️ Error: ${B} [${f}]`}}async function W(t){try{const n=await eo();p.value="Printing product box label. Please wait. 🕒";const u=await L({type:U.PRINT_REQUEST,id:S(),input:t.toString(),ipAddress:I.value.ipAddress,port:I.value.port,printer:j.ZEBRA_ZD420,labelType:Y.LOGISTICS_BOX,content:n.productBoxType.articleNumber});p.value=u.message}catch(n){const{code:u,msg:f}=await lo(n);p.value=`⚠️ Error: ${f} [${u}]`}}async function uo(){var t;if(J.value){const n=(t=g.value)==null?void 0:t.device.productSerials[0];if(n===void 0)throw new Error("Unable to print product box Wi-Fi label. No device data");p.value="Printing product box Wi-Fi label. Please wait. 🕒";const u=await L({type:U.PRINT_REQUEST,id:S(),input:n,ipAddress:I.value.ipAddress,port:I.value.port,printer:j.ZEBRA_ZD420,labelType:Y.PRODUCT_BOX_WIFI},3e4);p.value=u.message}}function i(t){v.value=`LB${t}`,F()}function l(t){v.value=t,F()}return(t,n)=>{const u=To,f=$o,B=Lo,no=Eo,N=So,H=Ro,co=Ao,Q=Do,bo=zo,ho=No,Bo=Uo,fo=ve,vo=Oo,d=ge,E=ne,Wo=Ce,Qo=le,w=ye,Z=Fo,Po=Xo,po=Ho;return m(),M(io,null,[o(H,null,{default:e(()=>[o(B,null,{default:e(()=>[o(u,null,{default:e(()=>[a("🔍 Product Packaging Lookup")]),_:1}),o(f,null,{default:e(()=>[a(" Query using a product serial, product box ID or logistics box ID ")]),_:1})]),_:1}),o(N,null,{default:e(()=>[o(no,{onClick:n[0]||(n[0]=r=>c(!0))},{default:e(()=>[a("Start")]),_:1})]),_:1})]),_:1}),o(po,{"is-open":s(P),onWillDismiss:n[14]||(n[14]=r=>c(!1)),onDidPresent:n[15]||(n[15]=r=>so())},{default:e(()=>[o(ho,null,{default:e(()=>[o(bo,null,{default:e(()=>[o(co,null,{default:e(()=>[a("Query")]),_:1}),o(no,{onClick:n[1]||(n[1]=r=>c(!1)),slot:"end",fill:"default"},{default:e(()=>[o(Q,{icon:"ioniconsClose"in t?t.ioniconsClose:s(xo),size:"medium"},null,8,["icon"])]),_:1})]),_:1})]),_:1}),o(Z,{class:"ion-padding"},{default:e(()=>[o(vo,null,{default:e(()=>[o(Bo,{ref_key:"inputRef",ref:R,type:"text",label:"QR Code",modelValue:s(v),"onUpdate:modelValue":n[2]||(n[2]=r=>_o(v)?v.value=r:null),onKeyup:[n[3]||(n[3]=yo(r=>F(),["enter"])),n[4]||(n[4]=yo(r=>s(b)(),["up"])),n[5]||(n[5]=yo(r=>s(y)(),["down"]))]},null,8,["modelValue"]),s(D)?(m(),T(fo,{key:0,slot:"end",size:"small",color:"primary",name:"crescent"})):G("",!0),o(Q,{slot:"end",label:"Clear input",icon:"ioniconsBackspace"in t?t.ioniconsBackspace:s(Mo),onClick:n[6]||(n[6]=r=>ao())},null,8,["icon"]),o(Q,{slot:"end",label:"Print",color:"tertiary",icon:"ioniconsSearch"in t?t.ioniconsSearch:s(me),onClick:n[7]||(n[7]=r=>F())},null,8,["icon"])]),_:1}),s(g)?(m(),T(w,{key:0,class:"ion-padding"},{default:e(()=>[o(co,{class:"ion-title"},{default:e(()=>[a("Product Box")]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Box ID")]),_:1}),o(d,{size:"7"},{default:e(()=>[a(C(s(g).id),1)]),_:1}),o(d,{size:"1"},{default:e(()=>[o(Q,{title:"Print Product Box Label",size:"small",color:"tertiary",icon:"ioniconsPrint"in t?t.ioniconsPrint:s(ro),onClick:n[8]||(n[8]=r=>to(s(g).id,s(g).device.productSerials))},null,8,["icon"])]),_:1})]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Type ID")]),_:1}),o(d,{size:"7"},{default:e(()=>{var r;return[a(C((r=s(A))==null?void 0:r.id),1)]}),_:1}),s(J)?(m(),T(d,{key:0,size:"1"},{default:e(()=>[o(Q,{title:"Print Product Box Wi-Fi Label",size:"small",color:"tertiary",icon:"ioniconsPrint"in t?t.ioniconsPrint:s(ro),onClick:n[9]||(n[9]=r=>uo())},null,8,["icon"])]),_:1})):G("",!0)]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("GTIN")]),_:1}),o(d,{size:"8"},{default:e(()=>{var r;return[a(C((r=s(A))==null?void 0:r.gTIN),1)]}),_:1})]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Article")]),_:1}),o(d,{size:"8"},{default:e(()=>{var r;return[a(C((r=s(A))==null?void 0:r.articleNumber),1)]}),_:1})]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Contents")]),_:1}),o(d,{size:"8"},{default:e(()=>{var r,K;return[a(C((r=s(A))==null?void 0:r.numberUnits)+"x "+C((K=s(A))==null?void 0:K.product.name),1)]}),_:1})]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Product Serials")]),_:1}),o(d,{size:"8"},{default:e(()=>[(m(!0),M(io,null,mo(s(g).device.productSerials,r=>(m(),T(Qo,{class:"product-serial",color:"tertiary"},{default:e(()=>[o(Wo,null,{default:e(()=>[a(C(r),1)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),o(co,{class:"ion-title"},{default:e(()=>[a("Logistics Box")]),_:1}),o(E,null,{default:e(()=>{var r,K;return[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Box ID")]),_:1}),(r=s(g).logisticsBox)!=null&&r.id?(m(),T(d,{key:0},{default:e(()=>[oe("a",{href:"#",onClick:n[10]||(n[10]=Yo(go=>i(s(g).logisticsBox.id),["prevent"]))},C(s(g).logisticsBox.id),1)]),_:1})):(m(),T(d,{key:1},{default:e(()=>[a("Not assigned")]),_:1})),(K=s(g).logisticsBox)!=null&&K.id?(m(),T(d,{key:2,size:"1"},{default:e(()=>[o(Q,{title:"Print Logistics Box Label",size:"small",color:"tertiary",icon:"ioniconsPrint"in t?t.ioniconsPrint:s(ro),onClick:n[11]||(n[11]=go=>W(s(g).logisticsBox.id))},null,8,["icon"])]),_:1})):G("",!0)]}),_:1})]),_:1})):G("",!0),s(_)?(m(),T(w,{key:1,class:"ion-padding"},{default:e(()=>[o(co,{class:"ion-title"},{default:e(()=>[a("Logistics Box")]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Box ID")]),_:1}),o(d,{size:"7"},{default:e(()=>[a(C(s(_).id),1)]),_:1}),o(d,{size:"1"},{default:e(()=>[o(Q,{title:"Print Logistics Box Label",size:"small",color:"tertiary",icon:"ioniconsPrint"in t?t.ioniconsPrint:s(ro),onClick:n[12]||(n[12]=r=>W(s(_).id))},null,8,["icon"])]),_:1})]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Type ID")]),_:1}),o(d,{size:"8"},{default:e(()=>{var r;return[a(C((r=s($))==null?void 0:r.id),1)]}),_:1})]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("GTIN")]),_:1}),o(d,{size:"8"},{default:e(()=>{var r;return[a(C((r=s($))==null?void 0:r.productBoxType.gTIN),1)]}),_:1})]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Article")]),_:1}),o(d,{size:"8"},{default:e(()=>{var r;return[a(C((r=s($))==null?void 0:r.productBoxType.articleNumber),1)]}),_:1})]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"4",class:"bold"},{default:e(()=>[a("Contents")]),_:1}),o(d,{size:"8"},{default:e(()=>{var r,K;return[a(C((r=s($))==null?void 0:r.numberUnits)+"x "+C((K=s($))==null?void 0:K.productBoxType.product.name),1)]}),_:1})]),_:1}),o(co,{class:"ion-title"},{default:e(()=>[a("Contents")]),_:1}),o(E,null,{default:e(()=>[o(d,{size:"1",class:"bold"},{default:e(()=>[a("Pos")]),_:1}),o(d,{size:"3",class:"bold"},{default:e(()=>[a("Product Box ID")]),_:1}),o(d,{size:"7",class:"bold"},{default:e(()=>[a("Product Serials")]),_:1}),o(d,{size:"1"})]),_:1}),(m(!0),M(io,null,mo(s(_).productBoxes,(r,K)=>(m(),T(E,null,{default:e(()=>[o(d,{size:"1"},{default:e(()=>[a(C(K+1)+".",1)]),_:2},1024),o(d,{size:"3"},{default:e(()=>[a(C(r.id),1)]),_:2},1024),o(d,{size:"7"},{default:e(()=>[(m(!0),M(io,null,mo(r.device.productSerials,go=>(m(),M("a",{class:"product-serial",href:"#",onClick:Yo(he=>l(go),["prevent"])},C(go),9,Ue))),256))]),_:2},1024),o(d,{size:"1"},{default:e(()=>[o(Q,{title:"Print Product Box Label",size:"small",color:"tertiary",icon:"ioniconsPrint"in t?t.ioniconsPrint:s(ro),onClick:go=>to(r.id,r.device.productSerials)},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1})):G("",!0)]),_:1}),o(Po,null,{default:e(()=>[o(bo,null,{default:e(()=>[o(vo,{lines:"none"},{default:e(()=>[o(Bo,{type:"text",modelValue:s(p),"onUpdate:modelValue":n[13]||(n[13]=r=>_o(p)?p.value=r:null),readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"])],64)}}}),Fe=Vo(Oe,[["__scopeId","data-v-ea689bfa"]]),Ve=Io({__name:"print",setup(q){const{request:L,newMsgId:S}=ko(wo.IPC_FLASH),I=Co(),k=x("");async function P(){try{const p=await L({type:U.PRINT_TEST_REQUEST,id:S(),ipAddress:I.value.ipAddress,port:I.value.port});console.log(p)}catch(p){console.error(p instanceof Error?p.message:p)}}async function c(){try{const p=await L({type:U.PRINT_COMMAND_REQUEST,id:S(),command:k.value,ipAddress:I.value.ipAddress,port:I.value.port});console.log(p)}catch(p){console.error(p instanceof Error?p.message:p)}}return(p,v)=>{const R=Be,D=te,g=Ao,A=Pe,_=zo,$=No,O=Do,b=le,y=xe,J=ne,F=$e,so=Ne,ao=Fe,oo=To,V=$o,z=Lo,X=Eo,h=So,eo=Ro,to=Uo,W=Oo,uo=Fo,i=be;return m(),T(i,null,{default:e(()=>[o($,null,{default:e(()=>[o(_,null,{default:e(()=>[o(D,{slot:"start"},{default:e(()=>[o(R)]),_:1}),o(g,null,{default:e(()=>[a("Print Labels")]),_:1}),o(D,{slot:"end"},{default:e(()=>[o(A)]),_:1})]),_:1})]),_:1}),o(uo,{fullscreen:!0,class:"ion-padding"},{default:e(()=>[o(J,{class:"left-padding"},{default:e(()=>[o(_,null,{default:e(()=>[o(O,{slot:"start",size:"large",color:"tertiary",icon:"ioniconsPrint"in p?p.ioniconsPrint:s(ro)},null,8,["icon"]),o(g,{class:"left-padding"},{default:e(()=>[a(" IP Address: "+C(s(I).ipAddress),1)]),_:1}),o(b,{class:"left-padding"},{default:e(()=>[a(" Port: "+C(s(I).port),1)]),_:1}),o(D,{slot:"end"},{default:e(()=>[o(y)]),_:1})]),_:1})]),_:1}),o(F),o(so),o(ao),o(eo,{class:"ion-hide"},{default:e(()=>[o(z,null,{default:e(()=>[o(oo,null,{default:e(()=>[a("Print Test Label")]),_:1}),o(V,null,{default:e(()=>[a("Print a Hello Solarnative Label")]),_:1})]),_:1}),o(h,null,{default:e(()=>[o(X,{onClick:v[0]||(v[0]=l=>P())},{default:e(()=>[a("Test")]),_:1})]),_:1})]),_:1}),o(eo,{class:"ion-hide"},{default:e(()=>[o(z,null,{default:e(()=>[o(oo,null,{default:e(()=>[a("Send Command")]),_:1}),o(V,null,{default:e(()=>[a("Directly to the printer via RawTCP")]),_:1})]),_:1}),o(h,null,{default:e(()=>[o(W,null,{default:e(()=>[o(to,{modelValue:s(k),"onUpdate:modelValue":v[1]||(v[1]=l=>_o(k)?k.value=l:null),label:">"},null,8,["modelValue"]),o(X,{size:"default",onClick:v[2]||(v[2]=l=>c())},{default:e(()=>[a("Send")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ke=Vo(Ve,[["__scopeId","data-v-f9923069"]]);export{Ke as default};
