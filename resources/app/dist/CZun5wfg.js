import{d as Ce,r as u,J as ke,c as Se,K as Z,L as r,A as e,M as we,t as s,z as t,B as i,N as n,O as m,P as f,v as j,Q as z,R as H,x as A,y as v,S as ae,T as ee,U as Le,V as Te,W as De,X as Pe,Y as Oe,Z as Ae,$ as Ue,a0 as Re,a1 as Ne,a2 as he,a3 as Be,a4 as Ke,a5 as Me,a6 as Ee,a7 as Ge,a8 as Je,a9 as $e,aa as qe,ab as je,ac as ze,ad as He,ae as te,C as We,D as xe,m as Fe,af as Qe,_ as Xe}from"./0fV2q4Ox.js";import{_ as Ye}from"./logout.js";import{u as Ze}from"./M_3S_cE4.js";import{p as ue,f as et}from"./D0r5xylr.js";import"./BYx_WZxC.js";const tt=U=>(We("data-v-b3e59c37"),U=U(),xe(),U),lt=tt(()=>A("h1",{slot:"start"},"Test API",-1)),ot=Ce({__name:"api",setup(U){const{$api:T}=Fe(),d=u(!1),y=u(""),V=u(""),b=u(""),R=u(),N=u(""),h=u(ae.ProductSerial),B=u(!1),K=u(3),W=u([]),x=u([]),M=u(3),D=u(3),F=u([]),se=u(""),E=u(10),G=u(new Date().toISOString()),g=u(""),I=Ze(),Q=ke(),le=u(!1),ie=Se(()=>Q.value.length===1?Q.value[0].variants:[]);Z(M,async l=>{const{data:o}=await T.productVariantList({productVariantListRequest:{productId:l}});Q.value=o.products,D.value=o.products.length>0&&o.products[0].variants.length>0?o.products[0].variants[0].id:-1},{immediate:!0}),Z(se,l=>{l!==void 0&&(F.value=l.split(/\r?\n|\r|\n/g))}),Z(N,l=>{l!==void 0&&(F.value=l.split(/\r?\n|\r|\n/g))});async function re(){d.value=!0,g.value="";try{let l=[];console.time("createProducts");for(let c=0;c<E.value;c++)l.push(T.createDevice({createDeviceRequest:{productVariantId:D.value,limit:1,remarks:G.value+c}}));const o=await Promise.allSettled(l);console.timeEnd("createProducts");for(const c of o){if(c.status==="fulfilled"){g.value+=c.value.data.deviceIdentifiers[0].productSerial+`\r
`;continue}console.error(`Unable to create device: ${c.reason}`)}}catch(l){l instanceof ee&&(g.value=JSON.stringify(await l.response.json(),null,2))}finally{d.value=!1}}async function de(){d.value=!0;try{R.value=await T.deviceList({deviceListRequest:{productCode:B.value?K.value:void 0,identifierType:h.value,identifierValues:F.value}})}catch(l){l instanceof ee&&(R.value=await l.response.json())}finally{d.value=!1}}async function ce(){try{d.value=!0,await I.update(),le.value=!0}catch(l){l instanceof ee&&(I.value=await l.response.json())}finally{d.value=!1}}async function pe(){try{d.value=!0;const{data:l}=await T.getTagList();W.value=l.tags}catch(l){const{msg:o}=await ue(l);console.error(o)}finally{d.value=!1}}async function fe(){try{d.value=!0;const{data:l}=await T.getDebugModeList();x.value=l.debugModes}catch(l){const{msg:o}=await ue(l);console.error(o)}finally{d.value=!1}}async function _e(){const{credentials:l}=await Le();if(l===void 0)throw new Error("Unauthorized");const{accessKeyId:o,secretAccessKey:c,sessionToken:J}=l;y.value=o,V.value=c,b.value=J??""}const X=l=>{window.electronAPI.copyToClipboard(l)};return(l,o)=>{const c=Te,J=De,me=Pe,ve=Ye,oe=Oe,ge=Ae,ye=Ue,C=Re,$=Qe,q=Ne,p=he,P=Be,_=Ke,k=Me,S=Ee,ne=Ge,w=Je,L=$e,Ve=qe,Y=je,be=ze,Ie=we;return s(),r(Ie,null,{default:e(()=>[t(ge,null,{default:e(()=>[t(oe,null,{default:e(()=>[t(J,{slot:"start"},{default:e(()=>[t(c)]),_:1}),t(me,null,{default:e(()=>[i("API")]),_:1}),t(J,{slot:"end"},{default:e(()=>[t(ve)]),_:1})]),_:1})]),_:1}),t(be,{fullscreen:!0,class:"ion-padding"},{default:e(()=>[t(oe,{class:"toolbar"},{default:e(()=>[lt,n(d)?(s(),r(ye,{key:0,slot:"end",color:"primary",name:"crescent"})):m("",!0)]),_:1}),t(L,null,{default:e(()=>[t(S,null,{default:e(()=>[t(C,null,{default:e(()=>[i("Create Products")]),_:1}),t(k,null,{default:e(()=>[t(p,{lines:"none"},{default:e(()=>[t(q,{modelValue:n(M),"onUpdate:modelValue":o[0]||(o[0]=a=>f(M)?M.value=a:null),class:"select",placeholder:"Select product",label:"Product to create",interface:"action-sheet"},{default:e(()=>[(s(!0),j(H,null,z(n(I),({name:a,id:O})=>(s(),r($,{value:O},{default:e(()=>[i(v(a),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(p,{lines:"none"},{default:e(()=>[t(q,{modelValue:n(D),"onUpdate:modelValue":o[1]||(o[1]=a=>f(D)?D.value=a:null),class:"select",placeholder:"Select variant",label:"Variant to create",interface:"action-sheet"},{default:e(()=>[(s(!0),j(H,null,z(n(ie),a=>(s(),r($,{value:a.id,title:a.remarks},{default:e(()=>[i(v(("toRaw"in l?l.toRaw:n(He))(("formatVariant"in l?l.formatVariant:n(et))(a))),1)]),_:2},1032,["value","title"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(p,{lines:"none"},{default:e(()=>[t(P,{label:"Number of devices",type:"number",modelValue:n(E),"onUpdate:modelValue":o[2]||(o[2]=a=>f(E)?E.value=a:null)},null,8,["modelValue"])]),_:1}),t(p,{lines:"full"},{default:e(()=>[t(P,{label:"Remarks",type:"text",modelValue:n(G),"onUpdate:modelValue":o[3]||(o[3]=a=>f(G)?G.value=a:null)},null,8,["modelValue"])]),_:1}),t(_,{class:"ion-margin-top",onClick:re},{default:e(()=>[i(" create ")]),_:1})]),_:1})]),_:1}),n(g)?(s(),r(w,{key:0},{default:e(()=>[t(p,{lines:"none"},{default:e(()=>[t(ne,{modelValue:n(g),"onUpdate:modelValue":o[4]||(o[4]=a=>f(g)?g.value=a:null),label:"Responses","auto-grow":!0},null,8,["modelValue"])]),_:1})]),_:1})):m("",!0)]),_:1}),t(L,null,{default:e(()=>[t(S,null,{default:e(()=>[t(C,null,{default:e(()=>[i("Device Details List")]),_:1}),t(k,null,{default:e(()=>[t(p,{lines:"none"},{default:e(()=>[t(Ve,{class:"ion-margin-start",slot:"end",onIonChange:o[5]||(o[5]=a=>B.value=a.detail.checked),checked:n(B)},null,8,["checked"]),t(q,{modelValue:n(K),"onUpdate:modelValue":o[6]||(o[6]=a=>f(K)?K.value=a:null),disabled:!n(B),class:"select",placeholder:"Select product code",label:"Product Code (optional)",interface:"action-sheet"},{default:e(()=>[(s(!0),j(H,null,z(n(I),({name:a,productCode:O})=>(s(),r($,{value:O},{default:e(()=>[i(v(a),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1}),t(p,{lines:"none"},{default:e(()=>[t(q,{modelValue:n(h),"onUpdate:modelValue":o[7]||(o[7]=a=>f(h)?h.value=a:null),label:"Identifier Type","auto-grow":!0},{default:e(()=>[(s(!0),j(H,null,z(Object.entries(n(ae)),([a,O])=>(s(),r($,{key:a},{default:e(()=>[i(v(O),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{lines:"full"},{default:e(()=>[t(ne,{modelValue:n(N),"onUpdate:modelValue":o[8]||(o[8]=a=>f(N)?N.value=a:null),label:"Identifier",placeholder:"00000300002UDG","auto-grow":!0},null,8,["modelValue"])]),_:1}),t(_,{class:"ion-margin-top",onClick:de},{default:e(()=>[i(" Go ")]),_:1})]),_:1})]),_:1}),n(R)?(s(),r(w,{key:0},{default:e(()=>[A("pre",null,v(JSON.stringify(n(R),null,2)),1)]),_:1})):m("",!0)]),_:1}),t(L,null,{default:e(()=>[t(S,null,{default:e(()=>[t(C,null,{default:e(()=>[i("Product List")]),_:1}),t(k,null,{default:e(()=>[t(_,{class:"ion-margin-top",onClick:ce},{default:e(()=>[i(" Go ")]),_:1})]),_:1})]),_:1}),n(le)&&n(I)?(s(),r(w,{key:0},{default:e(()=>[A("pre",null,v(JSON.stringify(n(I),null,2)),1)]),_:1})):m("",!0)]),_:1}),t(L,null,{default:e(()=>[t(S,null,{default:e(()=>[t(C,null,{default:e(()=>[i("Tag List")]),_:1}),t(k,null,{default:e(()=>[t(_,{class:"ion-margin-top",onClick:pe},{default:e(()=>[i("Go")]),_:1})]),_:1})]),_:1}),n(W).length>0?(s(),r(w,{key:0},{default:e(()=>[A("pre",null,v(JSON.stringify(n(W),null,2)),1)]),_:1})):m("",!0)]),_:1}),t(L,null,{default:e(()=>[t(S,null,{default:e(()=>[t(C,null,{default:e(()=>[i("Debug Mode List")]),_:1}),t(k,null,{default:e(()=>[t(_,{class:"ion-margin-top",onClick:fe},{default:e(()=>[i(" Go ")]),_:1})]),_:1})]),_:1}),n(x).length>0?(s(),r(w,{key:0},{default:e(()=>[A("pre",null,v(JSON.stringify(n(x),null,2)),1)]),_:1})):m("",!0)]),_:1}),t(L,null,{default:e(()=>[t(S,null,{default:e(()=>[t(C,null,{default:e(()=>[i("AWS Credentials")]),_:1}),t(k,null,{default:e(()=>[t(_,{class:"ion-margin-top",onClick:_e},{default:e(()=>[i(" Go ")]),_:1})]),_:1})]),_:1}),t(w,null,{default:e(()=>[n(y)?(s(),r(p,{key:0,lines:"none"},{default:e(()=>[t(P,{disabled:"",label:"Access Key",modelValue:n(y),"onUpdate:modelValue":o[9]||(o[9]=a=>f(y)?y.value=a:null)},null,8,["modelValue"]),t(_,{fill:"clear",color:"light",title:"Copy to clipboard",onClick:o[10]||(o[10]=a=>X(n(y)))},{default:e(()=>[t(Y,{slot:"icon-only",color:"dark",icon:"ioniconsClipboardOutline"in l?l.ioniconsClipboardOutline:n(te)},null,8,["icon"])]),_:1})]),_:1})):m("",!0),n(V)?(s(),r(p,{key:1,lines:"none"},{default:e(()=>[t(P,{disabled:"",label:"Secret Key",modelValue:n(V),"onUpdate:modelValue":o[11]||(o[11]=a=>f(V)?V.value=a:null)},null,8,["modelValue"]),t(_,{fill:"clear",color:"light",title:"Copy to clipboard",onClick:o[12]||(o[12]=a=>X(n(V)))},{default:e(()=>[t(Y,{slot:"icon-only",color:"dark",icon:"ioniconsClipboardOutline"in l?l.ioniconsClipboardOutline:n(te)},null,8,["icon"])]),_:1})]),_:1})):m("",!0),n(b)?(s(),r(p,{key:2,lines:"none"},{default:e(()=>[t(P,{disabled:"",label:"Session Token",modelValue:n(b),"onUpdate:modelValue":o[13]||(o[13]=a=>f(b)?b.value=a:null)},null,8,["modelValue"]),t(_,{fill:"clear",color:"light",title:"Copy to clipboard",onClick:o[14]||(o[14]=a=>X(n(b)))},{default:e(()=>[t(Y,{slot:"icon-only",color:"dark",icon:"ioniconsClipboardOutline"in l?l.ioniconsClipboardOutline:n(te)},null,8,["icon"])]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),rt=Xe(ot,[["__scopeId","data-v-b3e59c37"]]);export{rt as default};
