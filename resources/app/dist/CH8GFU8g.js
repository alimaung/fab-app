import{_ as X,t as r,v as C,aB as Y,d as K,aI as oe,aJ as ae,r as k,o as Z,b as le,x as _,c as O,al as ne,z as e,A as t,B as a,N as s,d8 as se,aR as ie,P as re,y as d,R as $,Q as D,L as w,am as T,an as Q,az as ue,eB as de,eC as ce,O as _e,X as fe,ab as me,a4 as pe,W as ge,Y as he,aj as ve,aW as be,a2 as Ie,a3 as ye,at as we,dh as Ce,di as Re,db as Le,ap as Ae,C as Be,D as Fe,m as Se}from"./0fV2q4Ox.js";import{e as $e}from"./M_3S_cE4.js";import{o as U,c as ke}from"./D0r5xylr.js";const Ne={},Ve={class:"radio-item"};function De(p,N){return r(),C("span",Ve,[Y(p.$slots,"default")])}const Pe=X(Ne,[["render",De]]),Ee=_("div",{class:"radio-highlight"},null,-1),ze=K({__name:"radioButtonGroup",props:oe(["defaultColor"],{modelValue:{type:[String,null]},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const N=p,R=ae(p,"modelValue"),v=k(),L=N.defaultColor??"#2563eb";function A(f){var F,S;const l=f.target;if(l.classList.contains("radio-item")){(F=l.parentElement)==null||F.querySelectorAll(".radio-item[active]").forEach(n=>{n.removeAttribute("active")}),l.setAttribute("active",""),R&&(R.value=l.getAttribute("value"));const b=(S=l==null?void 0:l.parentElement)==null?void 0:S.querySelector(".radio-highlight");if(!b)return;const o=l.offsetLeft;if(b.style.left=`${o}px`,b.style.width=`${l.offsetWidth}px`,l.hasAttribute("neutral"))b.style.setProperty("--highlight","#AAA");else if(l.getAttribute("color")!==null){const n=l.getAttribute("color");b.style.setProperty("--highlight",n)}else b.style.setProperty("--highlight",L)}}return Z(()=>{le(()=>{var f,l;(l=(f=v.value)==null?void 0:f.querySelector(".radio-item[active]"))==null||l.click()})}),(f,l)=>(r(),C("div",{class:"radio-group",ref_key:"radioGroupRef",ref:v,onClick:A},[Ee,Y(f.$slots,"default")],512))}}),B=p=>(Be("data-v-e71f9651"),p=p(),Fe(),p),He={class:"ion-padding",slot:"content"},qe=B(()=>_("span",{slot:"start",class:"firmware-label"},"Release Channel:",-1)),Te=B(()=>_("span",{slot:"start",class:"firmware-label"},"File Name:",-1)),Ge=B(()=>_("span",{slot:"start",class:"firmware-label"},"File Hash:",-1)),Me=B(()=>_("div",{class:"firmware-spacer"},null,-1)),We={class:"ion-padding",slot:"content"},je=B(()=>_("div",{class:"firmware-spacer"},null,-1)),Je={class:"ion-padding",slot:"content"},Oe={class:"firmware-file-badge"},Qe=B(()=>_("p",{class:"ion-text-center"},"No releases found",-1)),Ue=K({__name:"releases",setup(p){const{$api:N}=Se(),R=$e(),v=k(null),L=k(""),A=k(""),f=k({}),l=O(()=>{const o={};for(const n in f.value){const g=f.value[n]??[];o[n]=g.filter(i=>(!v.value||i.type.id===parseInt(v.value))&&(!L.value||i.files.some(I=>I.name.toLowerCase().includes(L.value.toLowerCase())))&&(!A.value||i.files.some(I=>I.fileHash.toLowerCase().includes(A.value.toLowerCase()))))}return o}),F=O(()=>{let o=0;for(const n in l.value)o+=l.value[n].length;return o});async function S(o=!1){const n=o?await R.update():R.value;if(n.length>0){const g=n.map(i=>i.id);await b(g)}}async function b(o){const{data:n}=await N.getFirmwareReleaseList({getFirmwareReleaseListRequest:{firmwareIds:o}}),g=n.firmwareReleases.reverse();o.forEach(i=>f.value[i]=g.filter(I=>I.firmware.id===i))}return Z(S),(o,n)=>{const g=fe,i=me,I=pe,x=ge,ee=he,G=ve,V=be,m=Ie,P=Pe,te=ze,M=ye,W=we,E=Ce,z=Re,H=Le,y=Ae,q=ne("tooltip");return r(),C($,null,[e(G,null,{default:t(()=>[e(ee,null,{default:t(()=>[e(g,{slot:"start"},{default:t(()=>[a("List")]),_:1}),e(x,{slot:"end"},{default:t(()=>[e(I,{color:"medium",onClick:n[0]||(n[0]=u=>S(!0))},{default:t(()=>[e(i,{slot:"start",icon:"ioniconsReload"in o?o.ioniconsReload:s(se)},null,8,["icon"]),a(" Reload ")]),_:1}),e(I,{color:"primary","router-link":"/firmware/createRelease"},{default:t(()=>[e(i,{slot:"start",icon:"ioniconsAdd"in o?o.ioniconsAdd:s(ie)},null,8,["icon"]),a(" Create Release ")]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{value:"filter"},{default:t(()=>[e(E,{value:"filter"},{default:t(()=>[e(m,{slot:"header",color:"light"},{default:t(()=>[e(V,null,{default:t(()=>[a("Filter")]),_:1})]),_:1}),_("div",He,[e(m,null,{default:t(()=>[qe,e(te,{modelValue:s(v),"onUpdate:modelValue":n[1]||(n[1]=u=>re(v)?v.value=u:null)},{default:t(()=>[e(P,{value:"1"},{default:t(()=>[a("Debug")]),_:1}),e(P,{neutral:"",active:""},{default:t(()=>[a("Any")]),_:1}),e(P,{value:"2"},{default:t(()=>[a("Production")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[Te,e(M,{"aria-label":"File Name Filter",placeholder:"Enter a file name to filter by...",debounce:200,"clear-input":!0,value:s(L),onIonInput:n[2]||(n[2]=u=>L.value=u.target.value)},null,8,["value"])]),_:1}),e(m,null,{default:t(()=>[Ge,e(M,{"aria-label":"File Hash Filter",placeholder:"Enter a file hash to filter by...",debounce:200,"clear-input":!0,value:s(A),onIonInput:n[3]||(n[3]=u=>A.value=u.target.value)},null,8,["value"])]),_:1}),e(G,{class:"ion-justify-content-center ion-padding"},{default:t(()=>[e(W,null,{default:t(()=>[a("This filter applies to "+d(s(F))+" "+d(s(F)!==1?"releases":"release"),1)]),_:1})]),_:1})])]),_:1})]),_:1}),e(z,{expand:"inset"},{default:t(()=>[(r(!0),C($,null,D(s(R),u=>{var j;return r(),w(E,{value:u.id.toString(),disabled:(((j=s(l)[u.id])==null?void 0:j.length)??[])===0},{default:t(()=>{var J;return[e(m,{slot:"header",color:"light"},{default:t(()=>[e(V,null,{default:t(()=>[a(d(u.name),1)]),_:2},1024),Me,(r(!0),C($,null,D(u.fileTypes,c=>T((r(),w(H,{style:Q(`--background: ${("getBgColor"in o?o.getBgColor:s(U))(c.id)}`)},{default:t(()=>[a(d(c.name),1)]),_:2},1032,["style"])),[[q,`ID: ${c.id}`]])),256))]),_:2},1024),_("div",We,[e(g,null,{default:t(()=>[a("Releases")]),_:1}),e(z,{expand:"inset"},{default:t(()=>[(r(!0),C($,null,D(s(l)[u.id],c=>(r(),w(E,{value:c.id.toString()},{default:t(()=>[e(m,{slot:"header",color:"light"},{default:t(()=>[e(V,null,{default:t(()=>[a(d(c.tag),1)]),_:2},1024),je,T((r(),w(H,{color:"medium"},{default:t(()=>[a(d(("capitalize"in o?o.capitalize:s(ke))(c.type.name)),1)]),_:2},1024)),[[q,`ID: ${c.type.id}`]])]),_:2},1024),_("div",Je,[e(m,{lines:"none",class:"firmware-item"},{default:t(()=>[e(i,{slot:"start",color:"medium",icon:"ioniconsPricetag"in o?o.ioniconsPricetag:s(ue)},null,8,["icon"]),e(y,{class:"firmware-label"},{default:t(()=>[a("ID:")]),_:1}),e(y,null,{default:t(()=>[a(d(c.id),1)]),_:2},1024)]),_:2},1024),e(m,{lines:"none",class:"firmware-item"},{default:t(()=>[e(i,{slot:"start",color:"medium",icon:"ioniconsCalendar"in o?o.ioniconsCalendar:s(de)},null,8,["icon"]),e(y,{class:"firmware-label"},{default:t(()=>[a("Created:")]),_:1}),e(y,null,{default:t(()=>{var h;return[a(d((h=c.creationTimeStamp)==null?void 0:h.toLocaleString("de")),1)]}),_:2},1024)]),_:2},1024),e(m,{lines:"none",class:"firmware-item"},{default:t(()=>[e(i,{slot:"start",color:"medium",icon:"ioniconsPencil"in o?o.ioniconsPencil:s(ce)},null,8,["icon"]),e(y,{class:"firmware-label"},{default:t(()=>[a("Remarks:")]),_:1}),e(y,null,{default:t(()=>[a(d(c.remarks),1)]),_:2},1024)]),_:2},1024),e(g,null,{default:t(()=>[a("Files")]),_:1}),(r(!0),C($,null,D(c.files,h=>(r(),w(m,null,{default:t(()=>[_("div",Oe,[T((r(),w(H,{slot:"start",style:Q(`--background: ${("getBgColor"in o?o.getBgColor:s(U))(h.type.id)}`)},{default:t(()=>[a(d(h.type.name),1)]),_:2},1032,["style"])),[[q,`ID: ${h.type.id}`]])]),_("div",null,[e(V,null,{default:t(()=>[a(d(h.name),1)]),_:2},1024),e(W,{class:"firmware-small"},{default:t(()=>[a(" Version: "+d(h.version)+" | Hash: "+d(h.fileHash),1)]),_:2},1024)])]),_:2},1024))),256))])]),_:2},1032,["value"]))),256))]),_:2},1024),(((J=s(l)[u.id])==null?void 0:J.length)??[])===0?(r(),w(y,{key:0,color:"medium",class:"ion-padding"},{default:t(()=>[Qe]),_:1})):_e("",!0)])]}),_:2},1032,["value","disabled"])}),256))]),_:1})],64)}}}),Ze=X(Ue,[["__scopeId","data-v-e71f9651"]]);export{Ze as default};
