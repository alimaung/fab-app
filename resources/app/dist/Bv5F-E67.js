import{d as O,aI as L,aK as V,aL as B,r as w,aJ as R,c as v,t as l,L as p,A as r,z as i,v as q,R as E,Q as F,N as t,B as C,y as N,O as T,e7 as Q,ay as $,ba as A,ah as D,bO as H,aN as K,dy as U,af as j,a1 as z,ab as J,a2 as G}from"./0fV2q4Ox.js";import{a as W}from"./M_3S_cE4.js";const Z=O({__name:"comPortSelect",props:L({title:{type:String,required:!1,default:"COM Port"},lines:{type:String,required:!1,default:"inset"},isCamera:{type:Boolean,required:!1,default:!1}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const{newMsgId:y,request:h}=V(B.IPC_FLASH),s=W(),c=w(!1),o=R(f,"modelValue"),u=f,d=v(()=>s.getBySerial(o.value)),I=s.update;async function M(){if(d.value)try{c.value=!0,u.isCamera?await D(d.value).send(H):await h({type:K.COM_PORT_TEST_REQUEST,id:y(),comPort:d.value,baudRate:9600,durationInMs:9e3,intervalInMs:300},1e4)}catch{await(await U.create({header:"Error ❌",subHeader:"Failed to open port",message:"Make sure the COM port is not being used by another app",buttons:["OK"]})).present()}finally{c.value=!1}}async function P(){o.value=""}const S=v(()=>o.value===""?"light":c.value?"warning":"medium");return(a,e)=>{const g=j,b=z,m=J,_=G;return l(),p(_,{lines:u.lines},{default:r(()=>[i(b,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value=n),class:"select",placeholder:"Select COM Port",label:u.title},{default:r(()=>[(l(!0),q(E,null,F(t(s),({serialNumber:n,friendlyName:k})=>(l(),p(g,{value:n},{default:r(()=>[C(N(k),1)]),_:2},1032,["value"]))),256)),t(s).length===0?(l(),p(g,{key:0,value:""},{default:r(()=>[C(" No COM ports detected ")]),_:1})):T("",!0)]),_:1},8,["modelValue","label"]),i(m,{slot:"end",color:t(S),title:"Flash LEDs",icon:"ioniconsFlashlight"in a?a.ioniconsFlashlight:t(Q),onClick:e[1]||(e[1]=n=>M())},null,8,["color","icon"]),i(m,{slot:"end",color:o.value.length===0?"light":"danger",icon:"ioniconsBackspace"in a?a.ioniconsBackspace:t($),onClick:e[2]||(e[2]=n=>P())},null,8,["color","icon"]),i(m,{slot:"end",color:"tertiary",icon:"ioniconsRefresh"in a?a.ioniconsRefresh:t(A),onClick:e[3]||(e[3]=n=>t(I)())},null,8,["icon"])]),_:1},8,["lines"])}}});export{Z as _};
