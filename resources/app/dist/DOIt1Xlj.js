import{bU as Y,d as q,bV as z,b6 as E,bW as P,r as d,c as X,bX as j,U as D,L as m,A as o,M as O,t as a,z as e,B as s,x as t,y as v,N as l,v as I,R as Q,Q as Z,O as y,V as G,W as J,X as K,Y as $,Z as oo,aW as eo,a2 as to,a0 as no,a6 as ao,a8 as so,a9 as co,bY as lo,ac as _o,aq as ro}from"./0fV2q4Ox.js";import{_ as io}from"./logout.js";import{g as uo,f as mo}from"./BJKABpwS.js";import"./BYx_WZxC.js";const po=Y("/fab-app-logo.svg"),go=t("div",{class:"cogs-container"},[t("div",{class:"cog cog-small"}),t("div",{class:"cog cog-medium"}),t("div",{class:"cog cog-big"})],-1),fo={class:"center-container"},ho=t("img",{slot:"start",src:po,width:"300",height:"300"},null,-1),bo=t("h1",{style:{"font-size":"4rem",color:"#2d3070"}},"Welcome",-1),vo={style:{"margin-top":"0.75em"}},Io={key:0,style:{"margin-top":"0.5em"}},yo=t("a",{href:"mailto:fab-app@solarnative.com?subject=Fab App Role Requestâš¡&body=Manager's name and reason for access:",style:{color:"#ffeeeecc"}}," fab-app@solarnative.com ",-1),Co={class:"pages"},Bo=q({__name:"home",setup(Ro){const C=z(),p=E(),_=P(),g=d(),r=d(),R=d(),f=X(()=>_.value.length===0);return j(async()=>{var i,u;try{g.value=await D(),r.value=(i=g.value.tokens)==null?void 0:i.idToken,R.value=await uo();const c=await mo(),n=((u=r.value)==null?void 0:u.payload["cognito:groups"])??[];_.value=n,p.value.email=c.email??"",p.value.roles=n,console.log("Production Mode")}catch{console.log("Unauthenticated. Redirecting to login"),await C.replace("/login")}}),(i,u)=>{const c=G,n=J,k=K,A=io,U=$,x=oo,B=ro,w=eo,L=to,M=no,T=ao,V=so,N=co,H=lo,W=_o,F=O;return a(),m(F,null,{default:o(()=>[e(x,null,{default:o(()=>[e(U,null,{default:o(()=>[e(n,{slot:"start"},{default:o(()=>[e(c)]),_:1}),e(k,null,{default:o(()=>[s("Home")]),_:1}),e(n,{slot:"end"},{default:o(()=>[e(A)]),_:1})]),_:1})]),_:1}),e(W,{class:"ion-padding"},{default:o(()=>[go,t("div",fo,[e(L,{lines:"none"},{default:o(()=>[ho,e(w,null,{default:o(()=>{var h,b;return[bo,t("p",vo," Email: "+v((b=(h=l(r))==null?void 0:h.payload)==null?void 0:b.email),1),l(f)?y("",!0):(a(),I("p",Io,[s(" Role: "),(a(!0),I(Q,null,Z(l(_),S=>(a(),m(B,{color:"primary"},{default:o(()=>[s(v(S.replace("Fab","")),1)]),_:2},1024))),256))]))]}),_:1})]),_:1}),l(f)?(a(),m(N,{key:0,color:"danger"},{default:o(()=>[e(T,null,{default:o(()=>[e(M,null,{default:o(()=>[s("Role Missing ðŸ”’")]),_:1})]),_:1}),e(V,null,{default:o(()=>[s(" Your account has no assigned role. Contact your fab app team at "),yo]),_:1})]),_:1})):y("",!0),t("div",Co,[e(H,{omitHome:""})])])]),_:1})]),_:1})}}});export{Bo as default};
